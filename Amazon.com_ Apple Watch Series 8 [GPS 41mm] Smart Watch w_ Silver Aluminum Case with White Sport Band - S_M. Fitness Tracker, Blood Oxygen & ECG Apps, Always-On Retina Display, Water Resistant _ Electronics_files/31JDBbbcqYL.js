(function(l){var g=window.AmazonUIPageJS||window.P,r=g._namespace||g.attributeErrors,k=r?r("MarsContentGridAssets",""):g;k.guardFatal?k.guardFatal(l)(k,window):k.execute(function(){l(k,window)})})(function(l,g,r){function k(d,c,h){h||(h=c,c=d,d=[]);var f=g.AmazonUIPageJS||g.P||l;f.now(c).execute("Registrant",function(g){if(!g)try{f.when.apply(f,d).register(c,h)}catch(b){f.log("ContentGridModuleRegistration error: "+b,"WARN")}})}l.when("ContentGridModuleRegistration").execute("content-grid-interstitial.js",
function(d){d.safeRegister(["A","MakoCommonCartHelper","a-modal","marsRefTagUtils","ExtraDataHelper"],"MarsContentGridInterstitial",function(c,h,f,d,b){var a=c.$,e,t=c.createClass({create:function(a,b,e,h){this.interstitialName=a;this.clientName=b;this.isMobile=h;this.header=e;this.baseReftag="MarsContentGrid_"+a;this._bindEvents()},_bindEvents:function(){a('input#add-to-cart-button[name\x3d"submit.add-to-cart"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#addToCart",'input#add-to-cart-button[name\x3d"submit.add-to-cart"]'));
a('input#installments-button[name\x3d"submit.installments"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#addToCart",'input#installments-button[name\x3d"submit.installments"]'));a('input#buy-now-button[name\x3d"submit.buy-now"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#addToCart",'input#buy-now-button[name\x3d"submit.buy-now"]'));a('input#buy-now-button[type\x3d"submit"]').bind("click",a.proxy(this._handleAtcEvent,this,"form#buyNow",'input#buy-now-button[type\x3d"submit"]'))},
_handleAtcEvent:function(b,e,f){try{var c=this;f.preventDefault();var n=a(b),d=a('#buybox select[name\x3d"quantity"]').val(),p,m,t;"form#buyNow"===b?(a("form#buyNowCheckout").length&&(n=a("form#buyNowCheckout")),p=n.find('input[type\x3d"hidden"][name\x3d"asin"]').val(),m=n.find('input[type\x3d"hidden"][name\x3d"offeringID"]').val(),t=n.find('input[type\x3d"hidden"][name\x3d"sessionID"]').val()):this.isMobile?('input#installments-button[name\x3d"submit.installments"]'===e&&(n=a("form#mobile-installments")),
t=n.find('input[type\x3d"hidden"][name\x3d"verificationSessionID"]').val(),p=n.find('input[type\x3d"hidden"][name\x3d"a"]').val(),m=n.find('input[type\x3d"hidden"][name\x3d"oid"]').val()):(p=n.find(e).val(),m=n.find('input[type\x3d"hidden"][name\x3d"offerListingID"]').val(),t=n.find('input[type\x3d"hidden"][name\x3d"session-id"]').val());var q=a(e).closest('.a-declarative[data-action\x3d"aw-mash"]');if(q&&q.length){var u=q.data("awMash");t=u.inputs.verificationSessionID;p=u.inputs.a;m=u.inputs.oid;
d=u.inputs.quantity}var k=h.createRequest(t,this.clientName),r=c._handleInstallmentandGifting(0,!1),r=c._handlePreRegistration(n,q,0,r);k.setAdditionalData(r);k.addAsinData(p,m,d).setReftag(this.baseReftag+"_ATC");k.sendRequest().done(function(a){c._showInterstitial()}).fail(function(a){l.log("An error has occurred with common cart handler with: "+a+" for asin: "+p+", offerListingId: "+m+", quantity: "+d,"FATAL","MarsContentGridAssets");g.ue&&g.ue.count("MarsContentGrid_Interstitial_CartRequestError",
1)})}catch(w){g.ue&&g.ue.count("MarsContentGrid_Interstitial_HandleATCError",1)}},_showInterstitial:function(){var b={dataStrategy:"preload",name:this.interstitialName,header:this.header},e="#"+this._getCamelCaseFromSnakeCase(this.interstitialName),h=this.baseReftag+"_InterstitialOpened";if(this.isMobile)l.when("a-secondary-view").execute(function(c){var f=c.get(this.interstitialName);f||(f=c.create(a(e),b));f.show();d.send(h)});else{var c=f.get(this.interstitialName);c||(c=f.create(a(e),b));c.show();
d.send(h)}},_getCamelCaseFromSnakeCase:function(a){return a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})},_handlePreRegistration:function(a,e,c,h){try{var f;if(e.length){var d=e.data("action");if(d){var g=e.data(d);g&&g.inputs&&(f=b.getObjectExtraData(g.inputs))}}else a.length&&(f=b.getFormExtraData(a[0]));f&&b.setObjectExtraData(h,f,c)}catch(t){l.log("Pre Registration UATC custom param inclusion failed: "+t)}return h},_handleInstallmentandGifting:function(b,e){var c={};e&&(e=a("#installments-programId"))&&
e.val()&&(c["isInstallmentsSelected."+b]=1,c["installments-programId."+b]=e.val(),c["installmentsProgram."+b]=e.val());if(a("#gift-wrap").is(":checked"))for(e=0;e<=b;e++)c["isToBeGiftWrapped."+e]="true";return c}});return{getInstance:function(){e||(e=new t);return e}}})});l.when("ContentGridModuleRegistration").execute("content-grid-modal.js",function(d){d.safeRegister(["A","marsRefTagUtils"],"MarsContentGridModal",function(c,h){var f,d=c.createClass({create:function(b,a,e,f,d,g,q,k,n){var r=c.$,
r=r("#"+a.replace(/-([a-z])/g,function(a){return a[1].toUpperCase()})),p=r.parent();e||(e=a);var m={name:e};if(d){var v=this;c.capabilities.isAmazonApp&&(m.hideHeader=!0);l.when("a-secondary-view").execute(function(a){if(g){var b=a.get(e);b?(p.data("a-popover-id",b.id),a.create(p,m)):(m.inlineContent="Loading...",a.create(p,m),v.bindModalBeforeShowListener(e,g,q,k,n))}else p.attr("data-a-secondary-view",JSON.stringify(m))})}else v=this,l.when("a-modal").execute(function(a){m.header=f;m.width="750";
if(g){var b=a.get(e);b?(p.data("a-popover-id",b.id),a.create(p,m)):(m.inlineContent="Loading...",a.create(p,m),v.bindModalBeforeShowListener(e,g,q,k,n))}else p.attr("data-a-modal",JSON.stringify(m))});r.one("click",function(){h.send("mars_content_grid_"+e+"_"+b)})},bindModalBeforeShowListener:function(b,a,e,f,h){c.on("a:popover:beforeShow:"+b,function(d){var q=d.popover;q.inlineContent&&f&&q.inlineContent!==e&&"Loading..."!==q.inlineContent||(g.ue&&(g.ue.count("MarsContentGrid_Modal_GetRemoteContentRequest",
1),q.inlineContent===e&&g.ue.count("MarsContentGrid_Modal_GetRemoteContentRetry",1)),a&&a.includes("contentV2")||(l.log("Ajax modal is not calling HMC contentV2 API, the URL being called is: "+a,"FATAL","MarsContentGridAssets"),g.ue&&g.ue.count("MarsContentGrid_Modal_GetRemoteContentInvalidURL",1)),c.get(a,{withCredentials:h,success:function(a,b,e){q.update({inlineContent:a,dataStrategy:"inline"})},error:function(a,c,f){l.log("Get remote content failed in modal: "+b+", url: "+a.http.responseURL+", status: "+
a.http.status+", errorThrown: "+f,"FATAL","MarsContentGridAssets");e&&q.update({inlineContent:e,dataStrategy:"inline"});g.ue&&g.ue.count("MarsContentGrid_Modal_GetRemoteContentError",1)}}))})}});return{getInstance:function(){f||(f=new d);return f}}})});"use strict";l.when("ContentGridModuleRegistration").execute("hi-res-image-lazy-loading.js",function(d){d.safeRegister(["A"],"MarsContentGridImageLoader",function(c){return{load:function(h){c.loadHiResImage(h);h.classList.remove("content-grid-image-lazy-loading")}}})});
"use strict";l.when("ContentGridModuleRegistration").execute("content-grid-accessibility-processor.js",function(d){d.safeRegister(["A"],"MarsContentGridAccessibilityProcessor",function(c){var h=c.$,f,d=c.createClass({init:function(){this.hasPageLoaded="complete"===document.readyState||!1;this.doProcessMarkup=!1;this.videoJsContainers=[];this.hasPageLoaded||this._bindPageReadyEvents()},requestProcessMarkup:function(){this.hasPageLoaded?this._processLinksForAriaLabel():this.doProcessMarkup=!0},requestProcessVideoJsMarkup:function(b){!b||
!b instanceof h||!b instanceof HTMLElement||(b instanceof HTMLElement&&(b=h(b)),this.hasPageLoaded?this._processVideoJsMarkup(b):this.videoJsContainers.push(b))},_bindPageReadyEvents:function(){var b=this;l.when("ready").execute(function(){b.hasPageLoaded=!0;b.doProcessMarkup&&b._processLinksForAriaLabel();if(b.videoJsContainers.length){for(var a=0;a<b.videoJsContainers.length;a++)b._processVideoJsMarkup(b.videoJsContainers[a]);b.videoJsContainers=[]}})},_processLinksForAriaLabel:function(){h(".content-grid-row-wrapper").find("a[title]").each(function(b,
a){b=h(a);b.attr("aria-label")||b.attr("aria-label",b.attr("title"))})},_processVideoJsMarkup:function(b){h(b).find("button.vjs-menu-button[title]").each(function(a,b){b=h(b);a=b.attr("title");b.attr("aria-label")||b.attr("aria-label",a);b=b.parent().find(".vjs-menu-content");b.attr("aria-label")||b.attr("aria-label",a)})}});return{getInstance:function(){f||(f=new d);return f}}})});"use strict";l.when("ContentGridModuleRegistration").execute("marsRefTagUtils.js",function(d){d.safeRegister(["A"],"marsRefTagUtils",
function(c){var h=c.$;return{send:function(c,d){if(!c)throw Error("refTag is not defined");h.get((d||"/hctp/log/refMarker")+"?ref_\x3d"+c)}}})});"use strict";l.when("ContentGridModuleRegistration").execute("mako-vse-light-player.js",function(d){d.safeRegister(["A","Mako.VSEHelper","VSEPlayerIntegrationWithMako"],"Mako.IVSELightPlayer",function(c,h,f){var d=["videoUrl"],b=!1;return{render:function(a,e){if("undefined"===typeof e)throw"Argument required: playerParentId";for(var g=0;g<d.length;g++){var k=
d[g];if(!c.$.trim(a[k]))throw"Argument required: options."+k;}g=(a.locale||h.getLocale()).replace(/-/g,"_");k={videoURL:a.videoUrl,imageURL:a.imageUrl};"true"===a.captionEnabled&&(k.closedCaptions=a.closedCaption);a={video:k,locale:g,marketplaceID:a.marketplaceID||h.getMarketplaceId(),page:a.pageType||h.getPageType(),placement:a.placement||"placement_"+e,requester:"Mako",clientPrefix:"mako"+e};l.now("Brila").execute("update-request",function(a){a!==r&&(b=!0)});b&&(a.excludeAssets=["Brila","VSEPlayer"]);
f.render(a,e,h.getVideoComponentEndpointHost())}}});d.safeRegister(["A"],"VSEPlayerIntegrationWithMako",function(c){return{render:function(h,f,d){c.ajax(d+"/vap/ew/subcomponent/vseplayer",{params:h,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",withCredential:!0,timeout:4E3,success:function(b){var a=c.$("#"+f);if(1===a.length)a.html(b);else throw["Did not find the appropriate number of video parent elements.","Expecting 1; found: "+a.length,"Possible reasons: - conflicting players with non-unique ids\n - id name is not formatted correctly\n - parent element was removed or is not available (possibly race condition)"].join("\n");
},error:function(b){throw"Error calling VSE player endpoint. "+("string"===typeof b)?b:"";}})}}});d.safeRegister(["A"],"Mako.VSEHelper",function(c){var d=g.opt||{};return{getMarketplaceId:function(){return d.obfuscatedMarketId||"ATVPDKIKX0DER"},getLocale:function(){return d.language||"en_US"},getPageType:function(){return d.pageType||"Unknown"},getVideoComponentEndpointHost:function(){var c=g.location.host,d="https://www.amazon.com";0<=c.indexOf(".amazon.")&&(d="https://"+c);return d}}})});k([],"ContentGridModuleRegistration",
function(){return{safeRegister:k}});"use strict";l.when("ContentGridModuleRegistration").execute("mars-content-grid-link-helper.js",function(d){d.safeRegister(["A","marsRefTagUtils"],"contentGridLinkHelper",function(c,d){var f=c.$;return{linkEventBinder:function(c){return{$selector:f("#"+c),bindSendRefTagEvent:function(b,a,c,f){this.$selector.live("click",function(){"true"===c?d.send(b+"_"+a,f):d.send(b,f)});return this},bindSmoothScrollAnimation:function(b){/^#/.test(b)&&this.$selector.live("click",
function(a){a=f(b).offset().top;if(g.history.pushState)g.history.pushState(null,null,b);else{var c=f(b),d=c.attr("id");c.removeAttr("id");g.location.hash=b;c.attr("id",d)}f("html, body").stop().animate({scrollTop:a},500)});return this},clearEvents:function(){this.$selector.die();return this}}}}})})});