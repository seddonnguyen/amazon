(function(f){var n=window.AmazonUIPageJS||window.P,z=n._namespace||n.attributeErrors,d=z?z("TurboCheckoutBaseAssets",""):n;d.guardFatal?d.guardFatal(f)(d,window):d.execute(function(){f(d,window)})})(function(f,n,z){"use strict";f.register("turbo-function-adapter",function(){return{adapt:function(d){return function(){if("function"!==typeof d)throw"Parameter 'property' is invalid. Expected a function but got "+typeof d;return d.apply(d,arguments)}}}});"use strict";f.when("turbo-configuration","turbo-function-adapter").execute("turbo-signin-adapter-factory",
function(d,c){f.when(d.get(d.KEYS.SHOW_SIGN_IN_INTERFACE)).register("turbo-signin-adapter",function(a){return{show:c.adapt(a.show)}})});"use strict";f.when("turbo-configuration","turbo-function-adapter").execute("turbo-view-adapter-factory",function(d,c){f.when(d.get(d.KEYS.VIEW_ADAPTER)).register("turbo-view-adapter",function(a){return{registerCallbacks:c.adapt(a.registerCallbacks),close:c.adapt(a.close),show:c.adapt(a.show),removeContent:c.adapt(a.removeContent),setContent:c.adapt(a.setContent),
closeImmediatelyThenExecute:c.adapt(a.closeImmediatelyThenExecute),closeAndNavigate:c.adapt(a.closeAndNavigate),closeToFullscreen:c.adapt(a.closeToFullscreen),updateBounds:c.adapt(a.updateBounds),getHeight:c.adapt(a.getHeight),updateMinHeight:c.adapt(a.updateMinHeight),updateScrollHeight:c.adapt(a.updateScrollHeight)}})});"use strict";f.when("turbo-checkout-page-ready").execute(function(){f.declare("turbo-eligibility-override",!1)});"use strict";f.when("A","turbo-checkout-csm","turbo-configuration",
"turbo-checkout-page-ready").register("turbo-checkout-address-id",function(d,c,a){function b(a){for(var b=0;b<a.length;b++){var d=e(a[b]);if(0<d.length)return c.logCount("turboCheckoutAddressSelectorIndex"+b),d}c.logCount("turboCheckoutAddressSelectorMissing");return e()}var e=d.$;return{getAddressId:function(){return b(a.get(a.KEYS.ADDRESS_INPUT_SELECTORS)).val()||""},set:function(c){b(a.get(a.KEYS.ADDRESS_INPUT_SELECTORS)).val()!==c&&b(a.get(a.KEYS.ADDRESS_INPUT_SELECTORS)).val(c).trigger("change",
[c])}}});"use strict";f.when("A","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkbox-exclusion-listener",function(d,c,a,b,e){function g(a){var c=q;q=!1;for(var b=0;b<p.length;b++){var d=m(p[b]).find("input[type\x3dcheckbox]");a(d)}c!==q&&(h("Exclusion checkbox state changed"),r.callAll("exclusionCheckbox"))}function k(a){var c;if(!(c=q)){c=!1;for(var b=0;b<a.length&&!c;b++){var d=m(a[b]);(c=d.prop("checked"))&&
h("Exclusion checkbox is checked",d)}}q=c}function h(a,b){c.logDebug("turbo-checkbox-exclusion-listener",a,b)}function l(){g(k)}var p=b.get(b.KEYS.CHECKBOX_EXCLUSION_ROOT_NODES),m=d.$,r=a.create(),q=!1;e.bind(function(){g(function(a){h("Listening for change events on:",a);a.unbind("change",l).bind("change",l);k(a)})});return{onStateChange:function(a){r.push(a)},isAnyCheckboxChecked:function(){return q}}});"use strict";f.when("A","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-custom-price-input",
function(d,c,a){function b(){var a=e();h!==a&&(h=a,k.callAll())}function e(){return g("#gcPriceOverride").val()||""}var g=d.$,k=c.create(),h;a.bind(function(){h=e();g("#gcPriceOverride").unbind("change",b).bind("change",b)});return{getCustomPrice:e,onChange:function(a){k.push(a)}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-quantity-input",function(d,
c,a,b,e,g){function k(c){var b=c?c.value?parseInt(c.value,10):c.target&&c.target.value?parseInt(c.target.value,10):void 0:void 0;q===b?a.logDebug("turbo-checkout-quantity-input","Quantity change event does NOT have new quantity. Suppressing callbacks",void 0):(q=b,a.logDebug("turbo-checkout-quantity-input","Quantity change event",c),p.callAll())}function h(a){a=a.val();(a=parseInt(a,10))||c.logCount("turboCheckoutNoQuantityFromPage");return a}var l=d.$,p=e.create(),m=b.get(b.KEYS.QUANTITY_SELECT_SELECTOR),
r="Multiple quantity nodes present on the page. This may lead to an incorrect quantity being used in Turbo! Selector \x3d "+m,q;g.bind(function(){var b=l(m);q=h(b);b.unbind("change",k).bind("change",k);1<b.length&&(a.logError(r,"turbo-checkout-quantity-input"),a.logDebug("turbo-checkout-quantity-input",r,b));c.logCount("turboCheckoutQuantityNodes",b.length)});return{getQuantity:function(){return h(l(m))},setQuantity:function(a){var c=l(m),b=h(c);a=parseInt(a,10);b!==a&&c.val(a).change()},onChange:function(a){p.push(a)}}});
"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-quantity-input","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-warranty-input",function(d,c,a,b,e,g,k){var h=d.$,l=b.create(),p=e.get(e.KEYS.WARRANTY_CHECKBOX_INPUT_SELECTOR),m=e.get(e.KEYS.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR),r=e.get(e.KEYS.WARRANTY_ASIN_INPUT_NAME),q=e.get(e.KEYS.WARRANTY_OFFER_INPUT_SELECTOR);k.bind(function(){h(p).unbind("click",
l.callAll).bind("click",l.callAll)});return{select:function(a){a&&h(m+" input[name^\x3d"+r+"][value\x3d"+a+"]").parents(m).find(p).click()},onChange:function(a){l.push(a)},getLineItem:function(b){if(h(p+":checked").length){var d=h(p+":checked").first().parents(m).find("input[name^\x3d"+r+"]").val()||"",e=h(q).val()||"";b=parseInt(b,10)||g.getQuantity()||1;if(d&&e)return{asin:d,offerListingId:e,quantity:b,isDiscoveredAsin:!0};c.logCount("turboCheckoutIncompleteWarrantyInputs");a.logError("Incomplete input data for the selected warranty checkbox - asin:"+
d+", offerId:"+e+", quantity:"+b)}else a.logDebug("turbo-checkout-warranty-input","No warranty checkbox is selected",void 0)}}});"use strict";f.when("A","turbo-checkout-csm","turbo-callback-list","turbo-configuration","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-vas-input",function(d,c,a,b,e){function g(){return p(h).prop("checked")||!1}function k(){var a=r;r=g();a!==r&&m.callAll(r)}var h=b.get(b.KEYS.VAS_CHECKBOX_SELCTOR),l=b.get(b.KEYS.VAS_CHANGE_EVENTS),p=
d.$,m=a.create(),r;e.bind(function(){r=g();l.forEach(function(a){d.off(a,k);d.on(a,k)})});return{isSelected:g,onChange:function(a){m.push(a)}}});"use strict";f.when("A","turbo-checkout-utils","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-csm","turbo-checkout-aui-page-state-parser","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-accessories-input",function(d,c,a,b,e,g,k){function h(){var a=v;v=y();v!==a&&t.callAll()}function l(){if(f===z&&u(w).length){var a=
g.parse("simpleBundleParameterMap",".simpleBundleFeatureContainer");0===a.length?(e.logCount("Turbo:Accessories:No:State"),f={}):p(a)}}function p(a){f={};a[0].items.forEach(function(a){f[a.asin]={asin:a.asin,offerListingId:a.offerListingId,isDiscoveredAsin:!0}})}function m(){return u(w).find("input[type\x3dcheckbox]")}function r(){m().unbind("change",h).bind("change",h)}function q(){return u(w).length?1>=v:0===v}function y(){var a=0;m().each(function(){u(this).prop("checked")&&a++});c.logDebug("turbo-checkout-accessories-input",
"Accessories selected "+a);return a}var u=d.$,t=a.create(),v=0,f,w=k.get(k.KEYS.ENABLED_ACCESSORIES_SELECTOR);l();r();b.bind(function(){l();r();y()});return{isEligible:q,registerCallback:function(a){t.push(a)},getLineItem:function(){if(q()){var a=m().filter(":checked").val();a=f?f[a]:void 0;return a||z}return z},select:function(a){a&&u(w+" input[type\x3dcheckbox][value\x3d"+a+"]").click()}}});"use strict";f.when("A","turbo-checkout-csm","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-session-id-input",
function(d,c,a){var b=d.$;return{getSessionId:function(){var d=b(a.get(a.KEYS.SESSION_ID_SELECTOR));d&&0<d.length||(c.logCount("turboCheckoutSessionIdSelectorMissing"),d=b());return d.val()||""}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-form","turbo-checkout-ref-tagger","turbo-checkout-page-state","turbo-checkout-product-state","turbo-checkout-page-ready").register("turbo-checkout-joined-state",function(d,c,a,b,e,g,k){function h(a,c,b){c&&(b&&(c.quantity=
b),a.push(c))}function l(a,g){function k(){var b=a.turboWeblab;b||c.logCount("turboCheckoutWeblabNameNotDefinedInState");return b}function l(){return a.turboWeblabTreatment}this.pageState=a;this.productStates=g;this.getLineItems=function(){return h.lineItemInputs};this.getActiveId=function(){return h.id};this.getHeaderText=function(){return h?h.turboHeaderText||a.turboHeaderText:a.turboHeaderText};this.getLoadingText=function(){return a.turboLoadingText};this.getAddressId=function(){return a.addressId};
this.getRequestId=function(){return a.requestId};this.getSessionId=function(){return a.sessionId};this.getAdditionalWeblabs=function(){return a.additionalWeblabs};this.getInitiateSelector=function(){return a.initiateSelector};this.getWeblab=k;this.getWeblabTreatment=l;this.isTurboLaunched=function(){return!k()&&"C"!==l()};this.isProductStateEligible=function(){return g.isTurboEligible};this.getRefTag=function(){if(!h)throw"Turbo checkout product state is NOT resolved. Cannot generate ref tag";var a=
d.$("#"+h.id);a=b.getRefTag(a);return e.generateJoinedValue(a)};this.getCSRFToken=function(){return a.csrfToken};this.getClientId=function(){return h&&h.checkoutClientId?h.checkoutClientId:"retailwebsite"};this.resolve=function(a){if(a){h=g.states[a];if(!h)throw a="Resolved turbo checkout product state is undefined. Id \x3d "+a,p(a,g),a;p("Resolved new product state",h);d.trigger("turbo:checkout:state:product:resolved")}};var h=1!==g.states.length?z:g.states[0]}function p(c,b){a.logDebug("turbo-checkout-joined-state",
c,b)}return{createTurboState:function(a,b,d,e,u,t){if(e&&d)throw"Custom item price is NOT supported with warranty";var q=g.get();b&&(q.addressId=b);b=k.get();if(a||e||d||t)a=parseInt(a,10),b.states.forEach(function(b){b.lineItemInputs.forEach(function(b){a&&(b.quantity=a);e?(b.customItemPrice=e,c.logCount("turboCheckoutItemPriceOverrided")):b.customItemPrice&&c.logCount("turboCheckoutItemPriceSelectorFallBackToTurboState")});h(b.lineItemInputs,t,a);h(b.lineItemInputs,d,a)});q=new l(q,b);q.resolve(u);
return q}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-constants","turbo-checkout-page-ready").register("turbo-checkout-page-state",function(d,c,a,b,e,g){function k(a,c,b,d,e,h,k,l,m,p,r,f){this.version=a;this.turboWeblab=c;this.turboWeblabTreatment=b;this.initiateSelector=d;this.turboLoadingText=e;this.turboHeaderText=h;this.addressId=k;this.requestId=l;this.sessionId=m;this.csrfToken=p;this.turboAssetsMode=
r;this.isJavaPipelineEligible="0"!==this.version&&this.turboAssetsMode!==g.ASSET_MODE_TURBO_ONLY;this.additionalWeblabs=f}function h(c,b){a.logDebug("turbo-checkout-page-state",c,b)}var l=b.get(b.KEYS.TURBO_PAGE_STATE_KEY),p=b.get(b.KEYS.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR),m=b.get(b.KEYS.LEGACY_SESSION_ID_IDENTIFIER),r=new k("0","","C","#buy-now-button","","","","","","",g.ASSET_MODE_TURBO_ONLY,"");return{get:function(b,d){b=b||l;d=d||p;d=e.parse(b,d);c.logCount("turboCheckoutPageStates",d.length);
1<d.length?(a.logError("Multiple turbo checkout page states found! Turbo will NOT show","turbo-checkout-page-state",void 0),h("PageStates",d),b=void 0):(0===d.length&&h("Turbo checkout page state ["+b+"] is NOT present"),b=d[0]);if(b)if(b.version)b=new k(b.version,b.turboWeblab||"",b.turboWeblabTreatment||"C",b.initiateSelector||".buy-now-button",b.turboLoadingText||"",b.turboHeaderText||"",b.addressId||"",b.requestId||"",b.sessionId||"",b.csrfToken||"",b.turboAssetsMode||g.ASSET_MODE_TURBO_ONLY,
b.additionalWeblabs||"{}");else{d=b.inputs||{};var u=b.strings||{};b=new k("1",b.turboWeblab||"",b.turboWeblabTreatment||"C",(b.configurations||{}).initiateSelector||"#buy-now-button",u.TURBO_LOADING_TEXT||"",u.TURBO_CHECKOUT_HEADER||"",d.addressId||"",d.requestId||"",d.sessionId||d[m]||"",b.csrfToken||"",b.turboAssetsMode||g.ASSET_MODE_TURBO_ONLY,b.additionalWeblabs||"{}")}else c.logCount("turboCheckoutStateNotDefined"),b=r;h("Turbo Checkout PageState",b);return b}}});"use strict";f.when("A","turbo-checkout-csm",
"turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-checkout-page-ready").register("turbo-checkout-product-state",function(d,c,a,b,e){function g(a,b){this.isTurboEligible=a;this.states=b}function k(a,b,c,d,e){this.id=a;this.isTurboEligible=b;this.lineItemInputs=c;this.turboHeaderText=d||"";this.checkoutClientId=e}function h(a,b,c,d,e,g,h,k,l,m){this.asin=b||"";this.offerListingId=c||"";this.quantity=parseInt(d,10)||1;this.isTurboEligible=!!this.asin&&!!this.offerListingId&&
a;this.productTitle=e||"";this.incentivizedCart=g||"";this.customItemPrice=h||"";this.addToCartTimeAsUnixEpochMilliseconds=k||"";this.addToCartSessionId=l||"";this.isDiscoveredAsin=!!m}function l(b,c){a.logDebug("turbo-checkout-product-state",b,c)}function p(a){if(!a.lineItemInputs||!a.lineItemInputs.length||!a.id)return l('Versioned product state is invalid. Expected non empty "id" and "lineItemInputs". Turbo may NOT show',a),q;var b=!0,c=d.map(a.lineItemInputs,function(a){a=new h(a.isTurboEligible,
a.asin,a.offerListingId,a.quantity,a.productTitle,a.incentivizedCart,a.customItemPrice,a.addToCartTimeAsUnixEpochMilliseconds,a.addToCartSessionId,a.isDiscoveredAsin);b=b&&a.isTurboEligible;return a});return new k(a.id,b,c,a.turboHeaderText,a.checkoutClientId)}var m=b.get(b.KEYS.TURBO_PRODUCT_STATE_KEY),r=b.get(b.KEYS.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR),q=new k("buy-now-button",!1,[],"","retailwebsite"),y=new g(!1,[q]);return{get:function(b,d){b=b||m;d=d||r;d=e.parse(b,d);c.logCount("turboCheckoutProductStates",
d.length);1<d.length&&"turbo-checkout-page-state"===b?(a.logError("turbo-checkout-page-state only supports the single item use case! Turbo will NOT show","turbo-checkout-product-state",void 0),b=[]):b=d;if((d=b)&&d.length){var t=!1;b=[];for(var u=0;u<d.length;u++){var f=d[u];if(f)if(f.version)var n=p(f);else f.inputs&&f.eligibility?(n=f.strings||{},f=new h(f.eligibility.isEligible,f.inputs.a,f.inputs.oid,f.inputs.quantity,n.TURBO_CHECKOUT_HEADER,f.inputs.incentivizedCart,f.inputs.customItemPrice),
n=new k("buy-now-button",f.isTurboEligible,[f],n.TURBO_CHECKOUT_HEADER,"retailwebsite")):(l('Legacy product state is missing "inputs" or "eligibility". Turbo will NOT show',f),n=q);else l("Product state parsed DOM object is invalid. Turbo may NOT show",f),n=q;t=t||n.isTurboEligible||!1;f=n.id;if(b[f])throw d="Duplicate product state found. id \x3d "+f,l(d,b),d;b.push(n);b[n.id]=n}b=new g(t,b)}else l("Parsed states are invalid. Turbo will NOT show",d),b=y;l("Turbo Checkout Product State(s)",b);return b}}});
"use strict";f.when("A","turbo-configuration","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-auto-open","turbo-checkout-address-id","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-custom-price-input","turbo-callback-list","turbo-checkout-joined-state","turbo-checkout-accessories-input","turbo-checkout-session-id-input","turbo-checkout-page-ready").register("turbo-checkout-state-handler",function(d,c,a,b,e,g,k,h,l,p,m,r,q){function y(a,b,c,d,e,y){a=a||k.getQuantity();
b=b||g.getAddressId();c=c||h.getLineItem(a);d=d||l.getCustomPrice();y=y||r.getLineItem();return m.createTurboState(a,b,c,d,e,y)}function u(a,c){b.logDebug("turbo-checkout-state-handler",a,c)}function t(a,c){b.logWarning("turbo-checkout-state-handler",a,c)}function f(a,b,c,d,e){x=y(a,b,c,z,d,e)}function n(){d.trigger("turbo:checkout:product:onChange");D.callAll()}function w(){var a=y();b.isDeepEquals(x,a)||(x=a,u("New Turbo State",x),n())}var A=d.$,I=c.get(c.KEYS.AJAX_PAGE_UPDATE_EVENT),D=p.create(),
E=!1;var x=y();return{isProductTurboEligible:function(){return!E&&x.isProductStateEligible()||c.get(c.KEYS.OVERRIDE_ELIGIBILITY)},getLineItems:function(){return x.getLineItems()},getAddressId:function(){return x.getAddressId()},getWeblabAllocation:function(){return x.getWeblabTreatment()},registerCallback:function(a){D.push(a)},startMonitoringPage:function(){e.updateInputsAndThen(f);k.onChange(w);h.onChange(w);l.onChange(w);r.registerCallback(w);d.off(I,w);d.on(I,w);n()},getRequestId:function(){return x.getRequestId()},
getSessionId:function(){return x.getSessionId()},getExperimentName:function(){return x.getWeblab()},getAdditionalWeblabAndTreatmentMap:function(){try{return JSON.parse(x.getAdditionalWeblabs())}catch(H){a.logCount("turboCheckoutParseAdditionalWeblabsException"),t("JSON::parse exception. Exception \x3d "+H)}},getStrings:function(){return{TURBO_LOADING_TEXT:x.getLoadingText(),TURBO_CHECKOUT_HEADER:x.getHeaderText()}},getInitiateSelector:function(){return x.getInitiateSelector()},isTurboLaunched:function(){return x.isTurboLaunched()},
isPhysicalGiftCardExperimentEligible:function(){var b=0!==A("#giftcardcustomtwister_feature_div").length;b&&(u("Physical Gift Card use case"),a.logCount("turboCheckoutGiftCardUseCase"));return b},setTurboStateNotEligible:function(){E=!0},resolveProductState:function(a){x.resolve(a)},getActiveId:function(){return x.getActiveId()},getRefTag:function(){return x.getRefTag()},getCSRFToken:function(){var b;(b=x.getCSRFToken())||(b=(b=x.getSessionId())&&0<b.length?b:q.getSessionId());b=b||"";if(!b||0>=b.length)t("CSRF Token is empty. This will result in denied requests."),
a.logCount("turboCheckoutNoValidCSRFToken");return b},getClientId:function(){return x.getClientId()}}});"use strict";f.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-aui-page-state-parser",function(d,c){var a=d.$;return{parse:function(b,d){b="script[data-a-state*\x3d'"+b+"'], #"+b;d=d?a(d).find(b):a(b);b=[];for(var e=0;e<d.length;e++){a:{try{var k=a(d[e]).text();var h=JSON.parse(k);break a}catch(l){c.logError("JSON::parse exception. Exception \x3d "+l,"turbo-checkout-aui-page-state-parser",
void 0)}h=void 0}h&&b.push(h)}return b}}});"use strict";f.when("jQuery","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-page-load-spinner",function(d,c){function a(){0!==d("#turbo-checkout-auto-load-spinner-container").length&&(d("#turbo-checkout-auto-load-spinner-container").remove(),e.unbind("touchmove touchstart touchend touchcancel click scroll",b))}function b(a){a.preventDefault();a.stopPropagation()}var e=d("body");c.isAutoOpenEligible()&&(e.bind("touchmove touchstart touchend touchcancel click scroll",
b),e.append("\x3cdiv id\x3d'turbo-checkout-auto-load-spinner-container' class\x3d'turbo-checkout-auto-load-spinner-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-circle-container' class\x3d'turbo-checkout-auto-load-circle-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-spinner' class\x3d'a-spinner a-spinner-medium turbo-checkout-auto-load-spinner'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),setTimeout(a,5E3));return{removePageLoadSpinner:a}});"use strict";f.when("turbo-configuration","turbo-checkout-ref-tagger",
"turbo-checkout-utils","is-turbo-shopping-portal-integration-enabled","turbo-checkout-page-ready").register("turbo-checkout-urls",function(d,c,a,b){function e(a,b,c){a="\x26pipelineType\x3dturbo\x26clientId\x3d"+a;var e=d.get(d.KEYS.DEVICE_OVERRIDE);return a+(e?"\x26devicestring-override\x3d"+e:"")+p(b,c)}function g(a){var b=d.get(d.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return"ref_\x3d"+a+"\x26referrer\x3d"+b}function k(b){return a.isNonEmptyString(b)?"\x26weblab\x3d"+b:""}function h(){return d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)?
"\x26temporaryAddToCart\x3d1":""}function l(b){if(!b||!b.length)return"";d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)||a.logError('Discovered asins present but add to cart is disabled? This will generate a "clickstream_ignore" hit on the server side and cause the hit to be ignored by clickstream and the attribution lost!',"turbo-checkout-urls");var c="";b.forEach(function(a,b){c+="\x26discoveredAsins."+b+"\x3d"+a});return c}function p(b,c){var d="";a.isNonEmptyString(b)&&(d+="\x26pageRequestId\x3d"+b);a.isNonEmptyString(c)&&
(d+="\x26pageSessionId\x3d"+c);return d}function m(){return q("auiDebug","auiDebug")+q("ds_user","ds_user")+q("ds_turbo_workspace","ds_workspace")+q("stringDebug","stringDebug")}function r(a){a=a?a:[];var b="";a.forEach(function(a,c){b+="\x26asin."+(c+1)+"\x3d"+a.asin});return b}function q(b,c){var d="";b=a.getUrlQueryParam(b);a.isNonEmptyString(b)&&(d="\x26"+c+"\x3d"+b);return d}return{buildInitiatePathWith:function(a,c,d,l,p,q){var f=b?"/checkout/turbo/initiate":"/checkout/turbo-initiate";return f+
"?"+g(a)+e(d,l,p)+k(c)+h()+m()+r(q)},buildEligibilityPathWith:function(a,b,c,d,l){return"/checkout/turbo-initiate?"+g(a)+e(c,d,l)+k(b)+"\x26checkEligibilityOnly\x3dtrue"+h()+m()},buildConfirmPathWith:function(a,b,c,d,m,p){return"/checkout/turbo-initiate/confirm?"+g(a)+e(c,d,m)+k(b)+h()+l(p)},buildLogPageHitPathWith:function(a,b,d){return"/checkout/log-page-hit?"+c.generateRefTag(a,c.ACTIONS.CLOSE,b)+e(d)},buildTriggerWeblabPathWith:function(a,b,c,d,e){return"/checkout/triggerWeblab?"+g(a)+k(b)+"\x26weblabAllocation\x3d"+
c+p(d,e)},buildTriggerWeblabPathWithoutWeblab:function(a,b,c){return"/checkout/triggerWeblab?"+g(a)+p(b,c)}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-callback-list",function(){function d(){var c=[];this.callAll=function(){for(var a=0;a<c.length;a++){var b=c[a];b.apply(b,arguments)}};this.push=function(a){if("function"!==typeof a)throw"Invalid callback. Expected typeof 'callback' to be 'function'. typeof \x3d "+typeof a;-1===c.indexOf(a)&&c.push(a)};this.remove=function(a){a=
c.indexOf(a);-1!==a&&c.splice(a,1)}}return{create:function(){return new d}}});"use strict";f.when("turbo-callback-list","turbo-checkout-page-ready").register("turbo-filtered-callback-list",function(d){function c(a){var b=d.create();this.callAll=b.callAll;this.remove=b.remove;this.push=function(c){(c=c[a])&&"function"===typeof c&&b.push(c)}}return{create:function(a){if(!a||"string"!==typeof a)throw"Invalid filter parameter. Expected 'filter' to be a non empty string. typeof \x3d "+typeof a+" value \x3d "+
a;return new c(a)}}});"use strict";f.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-form",function(d,c,a){function b(a){var b=c.get(c.KEYS.FORM_SELECTOR_OVERRIDE);if(b&&0<e(b).length)return e(b);b=c.get(c.KEYS.FORM_TYPE);if("link"===b)return a.find("a");if("form"===b)return a.closest("form");throw"Unsupported FORM_TYPE is configured. value \x3d "+b;}var e=d.$,g=/[\/?&]ref_?=([^?&]+)/;return{getForms:b,getRefTag:function(c){if(1!==c.length)return a.logError("Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",
"turbo-checkout-form"),a.logDebug("turbo-checkout-form","Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",c),"";c=b(c);c=((c.attr("action")||c.attr("href")||"")+"\x26"+c.serialize()).match(g)||{};return 2===c.length?c[1]:""}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-ajax-wrapper",function(d,c){return{load:function(a,b){b.hasOwnProperty("timeout")||(b.timeout=2E4);return d.ajax(a,b)},
loadWithJQXHR:function(a,b){b.hasOwnProperty("timeout")||(b.timeout=2E4);return d.$.ajax(a,b)},createXHRRequest:function(){var a=new XMLHttpRequest;a.timeout=2E4;return a}}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-session-storage","turbo-checkout-quantity-input","turbo-checkout-address-id","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-auto-open",function(d,c,a,b,e,g,k,h){function l(b,
c){a.logDebug("turbo-checkout-auto-open",b,c)}function p(){return m()&&0!==u}function m(){var d;if(d="1"===v.trb_open||"1"===a.getUrlQueryParam("trb_open"))(d=b.isPresent("hasTurboAutoOpened"))&&c.logCount("turboCheckoutAutoOpenLoopPrevented"),d=!d;return d}function r(){return 1===u&&m()}function q(){r()&&(p()&&(u=2,b.set("hasTurboAutoOpened","1")),C(v.trb_bid),d.trigger("turbo:checkout:auto:open"))}var f=d.$,u=0,t="trb_open trb_addr trb_qty trb_warrAsin trb_auth trb_sid trb_bid trb_accessoryAsin trb_accessoryOffer".split(" "),
v={},C=function(){};return{setup:function(b,c){if(m()){u=1;var e=n.location.href;f.each(t,function(b,c){b=a.getUrlQueryParam(c);v[c]=b;e=a.removeQueryParam(c,b,e)});l("Parameters:",v);a.replaceHistory(e);"function"===typeof b?C=b:a.logError("Initiate action must be supplied, and it must be a function.");d.on("turbo:checkout:prefetcher:state:dataStale",q);c()}else u=0,l("Disabled")},reset:function(){b.remove("hasTurboAutoOpened")},isAutoOpenEligible:m,isAutoOpenEnabled:p,isAutoOpenReadyToBeOpened:r,
updateInputsAndThen:function(a){var b=v.trb_qty,c=v.trb_addr,d=v.trb_warrAsin,l=v.trb_bid,m=v.trb_accessoryAsin,p=v.trb_accessoryOffer;if(b||c||d||l||m||p){b&&e.setQuantity(b);c&&g.set(c);if(d){k.select(d);var r=k.getLineItem(b)}if(m&&p){h.select(m);var q=h.getLineItem()}a(b,c,r,l,q)}}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-checkout-utils",function(){function d(){return navigator.userAgent}function c(a,b){if(a===b||"function"===typeof a&&"function"===typeof b)return!0;
if(typeof a!==typeof b)return!1;if("object"!==typeof a||null===a||null===b)return a===b||a!==a&&b!==b;var d=Object.getOwnPropertyNames(a);if(d.length!==Object.getOwnPropertyNames(b).length)return!1;for(var g=0;g<d.length;g++){var k=d[g];if(!a.hasOwnProperty(k)||!b.hasOwnProperty(k)||!c(a[k],b[k]))return!1}return!0}return{logError:function(a,b){f.log(a,"ERROR",b||"turbo-checkout-utils")},logWarning:function(a,b){f.log(a,"WARN",b||"turbo-checkout-utils")},logDebug:function(){},getUserAgent:d,isAndroid:function(){return!!d().match(/[a|A]ndroid/)},
isIPhone:function(){return!!d().match(/iPhone/)},isIPad:function(){return!!d().match(/iPad/)},isInternetExplorer:function(){return!!d().match(/MSIE/)},createFQDN:function(a){/^http/.test(a)||(a=n.location.origin?n.location.origin+a:n.location.protocol+"//"+n.location.hostname+":"+n.location.port+a);return a},getUrlQueryParam:function(a,b){b||(b=n.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(b))?a[2]?decodeURIComponent(a[2].replace(/\+/g,
" ")):"":z},removeQueryParam:function(a,b,c){var d=c;a&&b&&c&&(a=a+"\x3d"+b,d=c.replace(new RegExp("\\?"+a+"[\x26]?","g"),"?"),d=d.replace(new RegExp("[\x26]?"+a,"g"),""));return d},replaceHistory:function(a){n.history.pushState&&n.history.replaceState(null,n.title,a)},isNonEmptyString:function(a){return"string"===typeof a&&0<a.length},isDeepEquals:c}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-csm",function(d){function c(a,c,d,e){return"function"===
typeof n.uet?n.uet.apply(n.uet,arguments):e||b()}function a(a,b,c){return"function"===typeof n.ues?n.ues.apply(n.ues,arguments):c}function b(){return+new Date}function e(d){function e(){k&&g&&l&&h&&!f&&"function"===typeof t&&(t(k,g,l,h),f=!0)}var g,h,l,k,f=!1,t;this.getId=function(){return d};this.markClick=function(){k=c("tc",d)};this.markFirstByte=function(){g=a("t0",d,b())};this.markAboveTheFold=function(){l=c("af",d);e()};this.markCriticalFeature=function(){h=c("cf",d);e()};this.whenDataSet=function(a){t=
a;e()}}function g(a){"undefined"!==typeof n.ue_t0&&n.ue.count(a,Date.now()-n.ue_t0)}var k=0,h=[];return{createScope:function(){return new e("chk_turbo_"+ ++k)},logCount:function(a,b){b=b||1;d.logDebug("Logging counter "+a+" with value "+b);if(n.ue&&n.ue.count){var c=a+"_time";n.ue.count(a,b);g(c);for(var e=0;e<h.length;++e)n.ue.count(a+"."+h[e],b),g(c+"."+h[e])}},addCounterExtraSuffix:function(a){h.push(a)},timestamp:b}});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-counter",
function(d,c){var a=0,b=0,e=0,g=0,k=0,h=0,l="u";d.on("turbo:checkout:sheet:beforeOpen",function(){c.logCount("turboCheckoutSheetOpen",a);"u"!==l?(++k,c.logCount("turboCheckoutPrefetchUsed",k),"p"===l?c.logCount("turboCheckoutPrefetchUsedInProgress",k):c.logCount("turboCheckoutPrefetchUsedFull",k)):(++h,c.logCount("turboCheckoutPrefetchMissing",h))});d.on("turbo:checkout:sheet:beforeClose",function(){++b;c.logCount("turboCheckoutSheetClose",b)});d.on("turbo:checkout:prefetcher:state:dataPrefetching",
function(){c.logCount("turboCheckoutPrefetchRequested",e);l="p"});d.on("turbo:checkout:prefetcher:state:dataFresh",function(){++g;c.logCount("turboCheckoutPrefetchAvailable",g);l="a"});d.on("turbo:checkout:prefetcher:state:dataStale",function(){l="u"});return{incrementSheetOpenedCounter:function(){a++},incrementPrefetchCounter:function(){e++},getSheetOpenCount:function(){return a},getPrefetchCount:function(){return e}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-checkout-cacher",
function(){return{createCache:function(d){var c=!1,a;return function(){c||(a=d(),c=!0);return a}}}});"use strict";f.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-counter","turbo-checkout-page-ready").register("turbo-checkout-ref-tagger",function(d,c,a,b){function e(a,c,d){a="chk_"+a+"_"+(c+"_"+b.getPrefetchCount()+"-"+b.getSheetOpenCount());return g(d?a+"_"+d:a)}function g(a){if(!("string"===typeof a&&0<a.length&&64>=a.length&&h.test(a))||l.test(a))throw"Invalid ref tag. This would be filtered and replaced in clickstream. Value \x3d "+
a;return a}var k={ELIGIBILITY:"eligibility",BUY_NOW:"buyNow",CLOSE:"close"},h=/(^[A-z]$|^[A-z][A-z0-9_-]*[A-Za-z0-9]$)/,l=/[_-]{2,}/,f=c.get(c.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return{generateRefTag:function(a,b,c){return"ref_\x3d"+e(a,b,c)},generateValue:e,generateJoinedValue:function(c){if(!c)return e(f,k.BUY_NOW,"fallback");try{var d=c+"_"+(k.BUY_NOW+"_"+b.getPrefetchCount()+"-"+b.getSheetOpenCount());return g(d)}catch(q){return a.logError(q,"turbo-checkout-ref-tagger"),e(f,k.BUY_NOW,"fallback")}},
generateEligibilityValue:function(){return e(f,k.ELIGIBILITY)},ACTIONS:k,TAGS:{TOUCH:"touch",TOUCH_X:"touchX",BACK:"back",ROTATION:"rotation"}}});"use strict";f.when("A","turbo-checkout-page-ready").register("turbo-checkout-prefetch-timer",function(d){function c(){g||(g=!0,d.trigger("turbo:checkout:timer:onTimeout"))}function a(){if(g)return!0;var a=(new Date).getTime();return e?6E5<=a-e:!1}var b,e,g=!1;return{startTimer:function(){b||(b=n.setTimeout(c,6E5));e||(e=(new Date).getTime())},isTimeout:a,
resetTimer:function(){n.clearTimeout(b);g=!1;e=b=null},checkTimeout:function(){a()&&c()}}});"use strict";f.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-form","turbo-checkout-buy-now-onclick-handler","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-buy-now-button",function(d,c,a,b,e,g,k,h){function l(a,c){b.logDebug("turbo-checkout-buy-now-button",a,c)}function f(a){return a?m(a):c(e.getInitiateSelector())}function m(d){var e=
c("#"+d),g=h.get(h.KEYS.BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID);if(!g)return e;var k=c("[id\x3d"+d+"]");if(2>k.length)return e;a.logCount("turboCheckoutBuyNowDuplicateIdPresent");l("Duplicate nodes present for BuyNow button ID: #"+d+". Resolving BuyNow button with CSS: "+g);k=k.filter(g);return 1!==k.length?(a.logCount("turboCheckoutBuyNowUnableToResolveButtonIdWithCss"),b.logError("Unable to resolve a unique BuyNow button with CSS: "+g+". Defaulting to first button with ID: #"+d,"turbo-checkout-buy-now-button",
void 0),e):k}function r(b){l("Buy now button clicked");a.logCount("turboCheckoutBuyNowClicked");k.isConflictingOnClickListenerPresent(c(b.currentTarget))&&(A=!0);b&&b.currentTarget&&b.currentTarget.id||(l("Click event target is INVALID. Expected event target with an id. Turbo will NOT show",b),A=!0);if(A)A=!1,l("Buy now button callbacks supressed");else{e.resolveProductState(b.currentTarget.id);l("Calling buy now button callbacks...");var d=!1;for(var h=0;h<w.length;h++)d=d||w[h]();d?(l("Supressing default buy now button action"),
b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),d=!0):d=void 0;if(d)return!1}g.getForms(c(b.currentTarget)).attr("data-action",q());l("Calling default BuyNow action. User will be sent to Checkout SPC. Turbo will NOT show.");a.logCount("turboCheckoutBuyNowDefault");k.callCachedOnClickListenerIfPresent(b.currentTarget,b);return!0}function q(){return f().attr("name")||"submit.buy-now"}function y(a){for(var b=w.length-1;0<=b;--b)w[b]===a&&w.splice(b,1)}function u(a){if(!a&&1<f().length)throw"Button id parameter is NOT present. Cannot execute action without a button id on a page with multiple buy now buttons!";
}function t(a){a=f(a);n(a);a.click()}function n(b){for(var d=h.get(h.KEYS.CONFLICTING_INITIATE_LISTENERS),e=0;e<d.length;e++){var g=d[e];l("Unbound configured event '"+g+"' from buy now button");a.logCount("turboCheckoutBuyNowButtonConflictingListeners");b.unbind(g);c(document.body).undelegate(b.selector,g)}}var C=h.get(h.KEYS.BUY_NOW_CLICK_EVENT),w=[],A=!1;d.on("turbo:checkout:clickInitiate",t);a.logCount("turboCheckoutBuyNowButtonBound");return{registerOnClickCallback:function(a){y(a);w.push(a)},
deregisterOnClickCallback:y,executeOriginalBuyNowAction:function(a){u(a);A=!0;d.trigger("turbo:checkout:buyNowDisabled");d.trigger("turbo:checkout:clickInitiate",a)},executeTurboBuyNowAction:function(a){u(a);A=!1;t(a)},getSubmitAction:q,bindTurboClickEvent:function(a){a=a||f();k.removeConflictingOnClickListenerIfPresentAndCacheIt(a);a.unbind(C).bind(C,r)},removeConflictingListeners:n,getBuyNowButtons:f}});"use strict";f.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-buy-now-onclick-handler",
function(d,c,a,b){function e(a,b){a.each(function(a,d){c(d).removeProp(b)})}function g(a,b){var d=!1;a.each(function(){var a=c(this),e=a.find("[onclick]"),g=a.prop("onclick"),k=e.prop("onclick");return l(g)&&l(k)||1<e.length||!l(g||k)||h(a)!==b?(d=!0,!1):!0});return d}function k(a){return a.prop("onclick")||a.find("[onclick]").prop("onclick")}function h(a){return a.attr("onclick")||a.find("[onclick]").attr("onclick")}function l(a){return"function"===typeof a}function f(a,c){b.logDebug("turbo-checkout-buy-now-onclick-handler",
a,c)}var m;return{callCachedOnClickListenerIfPresent:function(b,c){l(m)&&(f("BuyNow button onclick listener function called."),a.logCount("turboCheckoutBuyNowButtonOnClickListenerCalled"),m.call(b,c.originalEvent))},removeConflictingOnClickListenerIfPresentAndCacheIt:function(b){var c=k(b),d=h(b);l(c)&&d&&(g(b,d)?(f("[DOM ERROR] Turbo will NOT show. BuyNow button node has INVALID 'onclick' DOM structure.",b),a.logCount("turboCheckoutBuyNowButtonInvalidOnClickDOM")):(f("BuyNow button node has 'onclick' attribute. Removing its listener and caching it.",
b),a.logCount("turboCheckoutBuyNowButtonOnClickListenerRemoveAndCache"),m=c,c=b.find("[onclick]"),e(b,"onclick"),e(c,"onclick")))},isConflictingOnClickListenerPresent:function(b){if(b=l(k(b)))f("Turbo will NOT show. BuyNow button node has conflicting 'onclick' listener."),a.logCount("turboCheckoutBuyNowButtonConflictingOnClickListener");return b}}});"use strict";f.when("A","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-checkout-page-ready").register("turbo-checkout-buy-now-integration",
function(d,c,a){function b(a,b){c.logDebug(a,"turbo-checkout-buy-now-integration",b)}var e=d.$,g=[];d.on("turbo:checkout:page:reappear",function(){b("Removing additional form inputs from form",g);for(var a;(a=g.shift())!==z;)a.remove()});return{isBuyNow:function(b){return b instanceof e&&b.attr("data-action")===a.getSubmitAction()},checkoutWith:function(a,d){if(Array.isArray(a)&&d instanceof e){var h=d;for(var k=1;0<h.find('input[name\x3d"asin.'+k+'"]').length||0<h.find('input[name\x3d"offeringID.'+
k+'"]').length;)k++;h=k;k=[];for(var f=0;f<a.length;f++){var r=a[f];if(r!==z&&r.asin&&r.offerListingId){var q=h;r=[e("\x3cinput /\x3e",{type:"hidden",name:"asin."+q,value:r.asin}),e("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+q,value:r.offerListingId}),e("\x3cinput /\x3e",{type:"hidden",name:"quantity."+q,value:r.quantity||1})];Array.prototype.push.apply(k,r);h++}else b('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',r),
c.logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!')}f=d.find('input[name\x3d"itemCount"]');1===f.length?f.val(h):d.append(e("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:h}));b("Appended additional buy now inputs.",k);d.append.apply(d,k);g=k}else h="Inputs are invalid. Expected array and jQuery object. lineItems \x3d "+a+" $form \x3d "+d,b(h,arguments),c.logError(h)}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-configuration-keys",
function(d){var c={HOST_PAGE_TYPE_IDENTIFIER:"HOST_PAGE_TYPE_IDENTIFIER",FORM_TYPE:"FORM_TYPE",FORM_SELECTOR_OVERRIDE:"FORM_SELECTOR_OVERRIDE",BUY_NOW_BUTTON_SELECTOR:"BUY_NOW_BUTTON_SELECTOR",BUY_NOW_BUTTON_V2_SELECTOR:"BUY_NOW_BUTTON_V2_SELECTOR",BUY_NOW_CLICK_EVENT:"BUY_NOW_CLICK_EVENT",BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID:"BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID",QUANTITY_SELECT_SELECTOR:"QUANTITY_SELECT_SELECTOR",ADDRESS_INPUT_SELECTORS:"ADDRESS_INPUT_SELECTORS",SESSION_ID_SELECTOR:"SESSION_ID_SELECTOR",
LEGACY_SESSION_ID_IDENTIFIER:"LEGACY_SESSION_ID_IDENTIFIER",WARRANTY_CHECKBOX_INPUT_SELECTOR:"WARRANTY_CHECKBOX_INPUT_SELECTOR",WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR:"WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR",WARRANTY_ASIN_INPUT_NAME:"WARRANTY_ASIN_INPUT_NAME",WARRANTY_OFFER_INPUT_SELECTOR:"WARRANTY_OFFER_INPUT_SELECTOR",AJAX_PAGE_UPDATE_EVENT:"AJAX_PAGE_UPDATE_EVENT",PREFETCH_TREATMENT:"PREFETCH_TREATMENT",NO_PREFETCH_TREATMENT:"NO_PREFETCH_TREATMENT",BUY_NOW_ONLY_TREATMENT:"BUY_NOW_ONLY_TREATMENT",
IS_DEVICE_FILTER_REQUIRED:"IS_DEVICE_FILTER_REQUIRED",IS_SIGN_IN_SUPPORTED:"IS_SIGN_IN_SUPPORTED",USES_MASH_WILL_REAPPEAR:"USES_MASH_WILL_REAPPEAR",SHOW_SIGN_IN_INTERFACE:"SHOW_SIGN_IN_INTERFACE",IFRAME_ID:"IFRAME_ID",EXTEND_ELIGIBLE_STATE:"EXTEND_ELIGIBLE_STATE",VIEW_ADAPTER:"VIEW_ADAPTER",PAGE_STATE_PARSING_ROOT_NODE_SELECTOR:"PAGE_STATE_PARSING_ROOT_NODE_SELECTOR",PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR:"PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR",TURBO_PAGE_STATE_KEY:"TURBO_PAGE_STATE_KEY",TURBO_PRODUCT_STATE_KEY:"TURBO_PRODUCT_STATE_KEY",
DEVICE_OVERRIDE:"DEVICE_OVERRIDE",CONFLICTING_INITIATE_LISTENERS:"CONFLICTING_INITIATE_LISTENERS",VAS_CHANGE_EVENTS:"VAS_CHANGE_EVENTS",VAS_CHECKBOX_SELCTOR:"VAS_CHECKBOX_SELCTOR",CHECKBOX_EXCLUSION_ROOT_NODES:"CHECKBOX_EXCLUSION_ROOT_NODES",MASH_ADAPTER:"MASH_ADAPTER",IS_ADD_TO_CART_ENABLED:"IS_ADD_TO_CART_ENABLED",IS_BUYNOW_ENABLED_FOR_SCREENREADER:"IS_BUYNOW_ENABLED_FOR_SCREENREADER",BACKGROUND_SCROLL_TARGET_SELECTOR:"BACKGROUND_SCROLL_TARGET_SELECTOR",NO_PREFETCH_EXPERIMENT_WEBLABS:"NO_PREFETCH_EXPERIMENT_WEBLABS",
ENABLED_ACCESSORIES_SELECTOR:"ENABLED_ACCESSORIES_SELECTOR",OVERRIDE_ELIGIBILITY:"OVERRIDE_ELIGIBILITY",validate:function(a){if("string"!==typeof a||!c[a])throw"The key '"+a+"' is not defined within 'turbo-configuration-keys'.";}};return c});"use strict";f.when("A","turbo-configuration-keys","turbo-device-configuration","turbo-client-configuration","turbo-eligibility-override","turbo-checkout-page-ready").register("turbo-configuration",function(d,c,a,b,e){function g(a,b){var c=k(a);f[a]=c===z?b:c}
function k(c){var d=b[c];c=a[c];if(h(d))return d;if(h(c))return c}function h(a){return"boolean"===typeof a||a}function l(c){if(!h(b[c])&&!h(a[c]))throw"Required configuration override for key '"+c+"' is missing";f[c]=k(c)}var f;return{get:function(a){c.validate(a);f||(f={},l(c.HOST_PAGE_TYPE_IDENTIFIER),l(c.SHOW_SIGN_IN_INTERFACE),l(c.EXTEND_ELIGIBLE_STATE),l(c.VIEW_ADAPTER),g(c.FORM_TYPE,"form"),g(c.FORM_SELECTOR_OVERRIDE,""),g(c.BUY_NOW_BUTTON_SELECTOR,"#buy-now-button"),g(c.BUY_NOW_BUTTON_V2_SELECTOR,
".checkout-buy-now"),g(c.BUY_NOW_CLICK_EVENT,"click.turboCheckout"),g(c.BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID,""),g(c.QUANTITY_SELECT_SELECTOR,'select[name\x3d"quantity"]'),g(c.SESSION_ID_SELECTOR,""),g(c.LEGACY_SESSION_ID_IDENTIFIER,""),g(c.ADDRESS_INPUT_SELECTORS,["#unifiedLocation1ClickAddress","#unifiedLocationAddress"]),g(c.WARRANTY_CHECKBOX_INPUT_SELECTOR,".mbb-checkbox input[name\x3dmbba]"),g(c.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR,".mbb-checkbox-column"),g(c.WARRANTY_ASIN_INPUT_NAME,
"mbba"),g(c.WARRANTY_OFFER_INPUT_SELECTOR,"#mbb-offering-id"),g(c.AJAX_PAGE_UPDATE_EVENT,"a:pageUpdate"),g(c.PREFETCH_TREATMENT,"PREFETCH_DISABLED"),g(c.NO_PREFETCH_TREATMENT,"T1"),g(c.BUY_NOW_ONLY_TREATMENT,"BUY_NOW_LAUNCHED"),g(c.IS_DEVICE_FILTER_REQUIRED,!1),g(c.IS_SIGN_IN_SUPPORTED,!0),g(c.USES_MASH_WILL_REAPPEAR,!1),g(c.IFRAME_ID,"turbo-checkout-iframe"),g(c.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),g(c.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),g(c.TURBO_PAGE_STATE_KEY,
"turbo-checkout-page-state"),g(c.TURBO_PRODUCT_STATE_KEY,"turbo-checkout-page-state"),g(c.DEVICE_OVERRIDE,""),g(c.CONFLICTING_INITIATE_LISTENERS,[]),g(c.CHECKBOX_EXCLUSION_ROOT_NODES,"#simpleBundle_feature_div #monthlyPayments_feature_div #bbg_feature_div #addons_feature_div #mobile-accessory-upsell #detailPageGifting_feature_div #twister-plus-feature".split(" ")),g(c.ENABLED_ACCESSORIES_SELECTOR,".simpleBundleCheckBoxArea"),g(c.MASH_ADAPTER,""),g(c.IS_ADD_TO_CART_ENABLED,!0),g(c.IS_BUYNOW_ENABLED_FOR_SCREENREADER,
!0),g(c.BACKGROUND_SCROLL_TARGET_SELECTOR,"#productTitleGroupAnchor"),g(c.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),g(c.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),g(c.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),g(c.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),g(c.NO_PREFETCH_EXPERIMENT_WEBLABS,["RCX_CHECKOUT_TURBO_PRIME_UPSELL_222066"]),g(c.OVERRIDE_ELIGIBILITY,e));var b=f;return b[a]},KEYS:d.copy(c)}});"use strict";f.when("A","turbo-checkout-utils","turbo-checkout-weblab-allocation",
"turbo-checkout-state-handler","turbo-checkbox-exclusion-listener","turbo-checkout-content-loader","turbo-checkout-device-filter","turbo-callback-list","turbo-checkout-auto-open","turbo-checkout-vas-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-base-eligible-state",function(d,c,a,b,e,g,k,h,l,f,m){function p(){w=!0}function q(){w=!1}function n(){var c=new u;k.isDeviceTurboEligible()||c.invalidate("Device is NOT eligible");g.isError()&&!a.isNoPrefetch()&&c.invalidate("Prefetch failed");
b.isProductTurboEligible()||c.invalidate("Product is NOT eligible");l.isAutoOpenEnabled()||w||c.invalidate("Cheetah eligibility response is false");a.isControl()&&c.invalidate("Weblab is in CONTROL");a.isBuyNowOnly()&&c.invalidate("Weblab is in buy now only treatment");f.isSelected()&&c.invalidate("Value added service is selected and NOT supported");m.isEligible()||c.invalidate("Accessory selection was not eligible");e.isAnyCheckboxChecked()&&c.invalidate("Exclusion case checkbox is checked");0!==
A("#account-linking").length&&c.invalidate("Account linking checkbox present");v.callAll(c);c.logInvalidState();return c.canShow()}function u(){var a=!0,b=[];this.invalidate=function(c){a=!1;b.push(c)};this.logInvalidState=function(){a||c.logDebug("turbo-base-eligible-state","Cannot show turbo because: "+b)};this.canShow=function(){return a}}function t(a){C.callAll(n(),a)}var v=h.create(),C=h.create(),w=!1,A=d.$;return{addStateCheck:function(a){v.push(a)},canShow:n,registerStateChangeCallback:function(a){C.push(a)},
onStateChange:t,setup:function(){g.registerCallback({onTurboEligible:p,onFinish:p,onTurboIneligible:q});b.registerCallback(t);e.onStateChange(t);f.onChange(t);m.registerCallback(t)}}});"use strict";f.when("A","turbo-callback-list","turbo-checkout-page-ready").register("turbo-checkout-base-view",function(d,c){function a(a){if("string"!==typeof a)throw"Parameter 'iFrameContainerSelector' is not a string.";this.onBoundsAdjustedCallbacks=c.create();this.IFRAME_CONTAINER_SELECTOR=a}var b=d.$;a.prototype.updateBounds=
function(a,b){if("number"!==typeof a)throw'Parameter "iFrameContainerHeightInPixels" is not a number. Cannot validate bounds.';var c=this.$getIFrameContainer().height(),d=a-c,e=c+d;0!==d&&(this.$getIFrameContainer().height(e),this.updateScrollHeight(a,b),a=parseInt(this.$getIFrameContainer().css("min-height"),10),e=e>a?e:a,c!==e&&this.onBoundsAdjustedCallbacks.callAll(e))};a.prototype.updateScrollHeight=function(a,b){b&&a!==b?(this.$getIFrame().height(b),this.$getIFrameContainer().css("overflow-y",
"scroll"),this.$getIFrameContainer().css("-webkit-overflow-scrolling","touch")):(this.$getIFrame().height("100%"),this.$getIFrameContainer().css("overflow-y",""),this.$getIFrameContainer().css("-webkit-overflow-scrolling",""))};a.prototype.getHeight=function(){return this.$getIFrameContainer().height()};a.prototype.$getIFrameContainer=function(){return b(this.IFRAME_CONTAINER_SELECTOR)};a.prototype.$getIFrame=function(){return b(this.IFRAME_CONTAINER_SELECTOR+" iframe")};a.prototype.pushBoundsAdjustedCallback=
function(a){this.onBoundsAdjustedCallbacks.push(a)};return{extend:function(){function b(){a.apply(this,arguments)}b.prototype=Object.create(a.prototype);return b.prototype.constructor=b}}});"use strict";f.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-eligible-state-check",function(d){d.get(d.KEYS.EXTEND_ELIGIBLE_STATE)||f.when("turbo-base-eligible-state").register("turbo-checkout-eligible-state",function(c){return{canShow:c.canShow,registerStateChangeCallback:c.registerStateChangeCallback,
setup:c.setup}})});"use strict";f.when("A","turbo-checkout-state-handler","turbo-configuration","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-weblab-allocation",function(d,c,a){function b(){return c.getWeblabAllocation()}function e(){return c.getExperimentName()}function g(){return c.getAdditionalWeblabAndTreatmentMap()}function k(){return"C"===b()}function h(){var b=a.get(a.KEYS.NO_PREFETCH_EXPERIMENT_WEBLABS);return Array.isArray(b)&&-1!==b.indexOf(e())&&!k()}return{getAllocation:b,
getExperimentName:e,getAdditionalWeblabAndTreatmentMap:g,isControl:k,isBuyNowOnly:function(){return b()===a.get(a.KEYS.BUY_NOW_ONLY_TREATMENT)},isDisableTurboWeblabInTreatment:function(){var a=g();return"RCX_CHECKOUT_DISABLE_TURBO_FOR_NPA_EXPERIMENT_543201"in a&&"T1"===a.RCX_CHECKOUT_DISABLE_TURBO_FOR_NPA_EXPERIMENT_543201},isPrefetch:function(){return!h()&&b()===a.get(a.KEYS.PREFETCH_TREATMENT)},isNoPrefetch:function(){var c=a.get(a.KEYS.NO_PREFETCH_TREATMENT);return h()||!!b().match(c)}}});"use strict";
f.when("A","jQuery","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-buy-now-button","turbo-checkout-form","turbo-configuration","turbo-checkout-state-handler","turbo-checkout-eligibility-response-weblabs","turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-weblab-trigger",function(d,c,a,b,e,g,k,h,f,p,m,r,q){function l(){d.on("turbo:checkout:prefetch:onTurboEligible",
function(){B=!0;C()})}function u(){d.on("turbo:checkout:prefetch:onTurboIneligible",function(){B=!1;C()})}function t(){d.on("a:pageUpdate",function(){C()})}function v(){d.on("turbo:checkout:auto:open",function(){z()})}function C(){0===w().length?g.logCount("turboCheckoutBuyNowButtonMissing"):0===f.getForms(w()).length&&g.logCount("turboCheckoutBuyNowFormMissing");0<f.getForms(w()).length&&(B?(b.logDebug("turbo-checkout-weblab-trigger","Adding trigger to form: "+k.getAllocation()),E.val(k.getAllocation()),
x.val(k.getExperimentName()),H.val(m.getRequestId()),F.val(m.getSessionId()),f.getForms(w()).append(E,x,H,F)):(b.logDebug("turbo-checkout-weblab-trigger","Removing trigger from form: "+k.getAllocation()),E.remove(),x.remove(),H.remove(),F.remove()))}function w(){var a=p.get(p.KEYS.BUY_NOW_BUTTON_SELECTOR),b=p.get(p.KEYS.BUY_NOW_BUTTON_V2_SELECTOR);return 0===c(a).length?c(b):c(a)}function A(){if(r.get()&&0<r.get().length||B&&!m.isTurboLaunched()){b.logDebug("turbo-checkout-weblab-trigger","Calling cheetah to trigger: "+
k.getAllocation());0<f.getForms(w()).find(E).length||g.logCount("turboCheckoutTriggerMissing");var a=!B||m.isTurboLaunched()?e.buildTriggerWeblabPathWithoutWeblab(m.getRefTag,m.getRequestId(),m.getSessionId()):e.buildTriggerWeblabPathWith(m.getRefTag(),k.getExperimentName(),k.getAllocation(),m.getRequestId(),m.getSessionId());if(B&&!m.isTurboLaunched()&&q.canShow()){var c=k.getAdditionalWeblabAndTreatmentMap();var d=[],h;for(h in c)c.hasOwnProperty(h)&&d.push({weblabName:h,weblabAllocation:c[h]});
c=d}else c=[];z(a,c)}}function z(a,b){b=[].concat(b).concat(r.get());b={additionalWeblabsToTrigger:JSON.stringify(b)};var d="function"===typeof n.Blob;"function"===typeof n.navigator.sendBeacon&&d?(b=new Blob([c.param(b)],{type:"application/x-www-form-urlencoded"}),n.navigator.sendBeacon(a,b)||g.logCount("turboCheckoutTriggerRecordingFailed")):D(a,b)}function D(b,c){a.load(b,{method:"POST",params:c,error:function(a,b,c){a&&204===a.http.status||g.logCount("turboCheckoutTriggerRecordingFailed")},abort:function(a){g.logCount("turboCheckoutTriggerRecordingFailed")}})}
var E,x,H,F,B=!1;return{setup:function(){E=c("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblab",value:""});x=c("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblabName",value:""});H=c("\x3cinput/\x3e",{type:"hidden",name:"turboPageRequestId",value:""});F=c("\x3cinput/\x3e",{type:"hidden",name:"turboPageSessionId",value:""});t();l();u();h.registerOnClickCallback(A);v()}}});"use strict";f.when("A","turbo-checkout-form","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-page-filter",
function(d,c,a,b){function e(b,c){a.logDebug("turbo-checkout-page-filter",b,c)}return{isCurrentViewTurboEligible:function(){var a=d.$(b.getInitiateSelector()),k=c.getForms(a),h=0<a.length&&a.length===k.length;h||(e("Page is NOT turbo eligible. Parent forms / nested links do not match the number of initiate selectors",a),e("Forms",k));return h}}});"use strict";f.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-device-filter-check",function(d){d.get(d.KEYS.IS_DEVICE_FILTER_REQUIRED)||
f.when("turbo-checkout-cacher","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(c){var a=function(){return!0};return{isDeviceTurboEligible:c.createCache(a),isSignInSupported:c.createCache(a)}})});"use strict";f.when("A","turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-page-filter","turbo-checkout-weblab-allocation","turbo-checkout-page-ready").register("turbo-checkout-eligibility-aggregator",function(d,c,a,b,e){return{isTurboEligible:function(){return b.isCurrentViewTurboEligible()&&
c.isProductTurboEligible()&&!e.isBuyNowOnly()},isSignInSupported:function(){return a.isSignInSupported()&&!e.isBuyNowOnly()},shouldAttemptPrefetch:function(){return a.isDeviceTurboEligible()&&!e.isBuyNowOnly()}}});"use strict";f.when("A","turbo-checkout-ref-tagger","turbo-filtered-callback-list","turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-eligibility-aggregator","turbo-checkout-eligibility-response-weblabs",
"turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-content-loader",function(d,c,a,b,e,g,k,h,f,p,m){function l(a){h.logCount("turboCheckoutInitiate");E();M=!1;L=Date.now();t("Notifying loading callbacks");B="started";Q.callAll();d.trigger("turbo:checkout:prefetch:onStart");h.logCount("turboCheckoutPrefetchStart");var g=a?[]:b.getLineItems(),f=a?c.generateEligibilityValue():b.getRefTag();g=(a?k.buildEligibilityPathWith:k.buildInitiatePathWith)(f,b.getExperimentName(),
b.getClientId(),b.getRequestId(),b.getSessionId(),g);F=e.loadWithJQXHR(g,{type:"POST",data:q(a),headers:y(),xhr:u,success:w,error:A})}function q(a){var c={isAsync:1};b.getAddressId()&&(c.addressID=b.getAddressId());b.isPhysicalGiftCardExperimentEligible()&&(c.isPhysicalGiftCard=b.isPhysicalGiftCardExperimentEligible());if(a&&m.isEligible()&&m.getLineItem()){var d=m.getLineItem();c["offerListing.1"]=d.offerListingId;c["requiresEligibilityCheck.1"]="true"}a||b.getLineItems().forEach(function(a,b){b+=
1;c["offerListing."+b]=a.offerListingId;c["quantity."+b]=a.quantity;a.incentivizedCart&&(c["incentivizedCart."+b]=a.incentivizedCart,c.incentivizedCart=a.incentivizedCart);a.customItemPrice&&(c["customItemPrice."+b]=a.customItemPrice,c.customItemPrice=a.customItemPrice);var d=a.addToCartTimeAsUnixEpochMilliseconds;d&&(c["addToCartTimeAsUnixEpochMilliseconds."+b]=d);(a=a.addToCartSessionId)&&(c["addToCartSessionId."+b]=a)});return c}function y(){var a={"x-amz-support-custom-signin":1};a["x-amz-turbo-checkout-dp-url"]=
n.location.href;a["x-amz-checkout-entry-referer-url"]=n.location.href;var c=b.getCSRFToken();c&&0<c.length&&(a["x-amz-checkout-csrf-token"]=c);return a}function u(){var a=e.createXHRRequest();a.addEventListener("readystatechange",function(){if(M||!a.readyState||2>a.readyState)t("Ignoring ready state changed event because headers already received or missing xhr");else if(M=!0,h.logCount("turboCheckoutPrefetchHeadersReceived"),h.logCount("turboCheckoutPrefetchHeadersReceivedDuration",Date.now()-L),
I(a)){t("Headers received: Turbo eligible");h.logCount("turboCheckoutTurboEligibleAfterCheetahChecks");var b=v(a),c=f.isSignInSupported();b&&(t("Headers received: Signin required"),h.logCount("turboCheckoutSigninRequired"),c||(t("Sign-in required but it is disabled or not supported."),h.logCount("turboCheckoutSigninNotSupported")));if(c||!b)t("Notifying turbo eligible callbacks"),J.callAll(),d.trigger("turbo:checkout:prefetch:onTurboEligible");C(a)&&T.callAll(a.getResponseHeader("x-amzn-checkout-login-provider"))}else t("Headers received: Not turbo eligible"),
U.callAll(),d.trigger("turbo:checkout:prefetch:onTurboIneligible")});return a}function t(a,b){g.logDebug("turbo-checkout-content-loader",a,b)}function v(a){return a&&a.getResponseHeader("x-amzn-checkout-login-required")}function C(a){return f.isSignInSupported()&&v(a)}function w(a,b,c){h.logCount("turboCheckoutPrefetchEnd",Date.now()-L);F=null;b=I(c);var e=a&&a.match(x);if(e&&0<e.length)try{var f=H(e[0]);var k=H.parseJSON(f.text())}catch(P){g.logError("Could not extract page state from cheetah page: "+
P)}else t("Could not extract page state from response data");f=k&&"turbo"===k.pipelineType;e=k&&k.currentPurchaseId&&0<String(k.currentPurchaseId).trim().length;var l=c.getResponseHeader("x-amzn-experiment-weblabs-to-trigger");if(l!==z){var q=[];try{q=JSON.parse(l)}catch(P){console.error("Error parsing additional weblabs from xhr response header: ",P)}p.set(q)}f&&!e&&g.logError("No purchaseid provided, cannot show turbo");b&&f&&e?("started"!==B&&g.logError("turbo-checkout-content-loader","Error processing turbo available callbacks. Expected state to be started but was "+
B),t("Notifying turbo available callbacks"),B="success",R.callAll(a,k),d.trigger("turbo:checkout:prefetch:onSuccess"),h.logCount("turboCheckoutTurboPrefetchSuccess")):b&&C(c)?t("Body received: Eligible and sign-in is supported and required."):(t("Body received: No turbo page or not eligible: isTurboEligible: "+b+" isTurboPage: "+f+" hasPurchaseId: "+e),D(),h.logCount("turboCheckoutTurboPrefetchFail"))}function A(a,b,c){h.logCount("turboCheckoutPrefetchEnd");F=null;t("Error while initiate",c);h.logCount("turboCheckoutTurboPrefetchError");
"timeout"===b&&h.logCount("turboCheckoutInitiateTimeOut");D()}function I(a){return a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")}function D(){"started"!==B&&g.logError("turbo-checkout-content-loader","Error processing turbo not available callbacks. Expected state to be started but was "+B);t("Notifying error callbacks");B="error";O.callAll();d.trigger("turbo:checkout:prefetch:onError")}function E(){F&&F.abort&&(t("Aborting running request..."),F.abort())}var x=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,
H=d.$,F,B="stopped",L,M=!1,Q=a.create("onStart"),R=a.create("onFinish"),O=a.create("onError"),J=a.create("onTurboEligible"),U=a.create("onTurboIneligible"),T=a.create("onSigninRequired");d.on("turbo:checkout:signInController:onDoSignIn",D);return{registerCallback:function(a){Q.push(a);R.push(a);O.push(a);J.push(a);T.push(a);U.push(a)},callInitiate:function(){t("Calling turbo initiate");l()},checkEligibility:function(){t("Calling turbo eligibility check only");l(!0)},abortCall:E,isSuccess:function(){return"success"===
B},isError:function(){return"error"===B},isStarted:function(){return"started"===B}}});"use strict";f.when("A","jQuery","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-history-manager",function(d,c,a,b){function e(){if(n.history.state&&n.history.state.turboAction)return n.history.state.turboAction}function g(){e();e()||(b.logDebug("turbo-checkout-history-manager","Adding turbo history state"),n.history.pushState({turboAction:"popover"},document.title+
" Turbo open"))}var f=!1;c(n).bind("popstate.turbo",function(c){e();f?(b.logDebug("turbo-checkout-history-manager","Trigger Subpanel Back Clicked"),d.trigger("turbo:checkout:dimmer:clicked"),f=!1,g()):e()?(b.logDebug("turbo-checkout-history-manager","Trigger sheet open"),d.trigger("turbo:checkout:sheet:doOpen")):(b.logDebug("turbo-checkout-history-manager","Trigger sheet close"),d.trigger("turbo:checkout:sheet:doClose",{immediate:!1,reason:a.TAGS.BACK}))});return{sheetOpened:g,sheetClosed:function(){e();
e()&&(b.logDebug("turbo-checkout-history-manager","Removing turbo history state"),n.history.back())},subPanelOpened:function(){f=!0},subPanelClosed:function(){f=!1}}});"use strict";f.when("A","turbo-checkout-page-ready").register("turbo-base-visibility-manager",function(d){function c(){d.trigger("turbo:checkout:page:gone")}return{setup:function(){d.on("turbo:checkout:sheet:onNavigateAway",c)}}});f.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-mash-will-reappear-check",function(d){d.get(d.KEYS.USES_MASH_WILL_REAPPEAR)||
f.when("turbo-base-visibility-manager").register("turbo-checkout-page-visibility-manager",function(c){return c})});"use strict";f.when("A","jQuery","turbo-checkout-view-state","turbo-checkout-weblab-allocation","turbo-checkout-state-handler","turbo-checkout-content-loader","turbo-checkout-prefetch-timer","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-utils","turbo-checkout-eligibility-aggregator","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-prefetcher",
function(d,c,a,b,e,g,f,h,l,p,m,n){function k(a){var b=u;u=a;p.logDebug("turbo-checkout-prefetcher","Transitioning from "+b.name+" to "+a.name);if(b.onExit)b.onExit(a.name);if(a.onEnter)a.onEnter(b.name);d.trigger("turbo:checkout:prefetcher:state:"+a.name);d.trigger("turbo:checkout:prefetcher:state",a.name)}var y,u,t=function(){var a=g.isError(),b=!m.isTurboEligible(),c=f.isTimeout(),d=0===y;p.logDebug("turbo-checkout-prefetcher","Test is data stale: isStaleWhenCheetahReturnsError: "+a+" isStaleWhenProductNotEligiblie: "+
b+" isStaleWhenTimeoutOccurs: "+c+" isStaleWhenNoMorePrefetchesAvailable: "+d);return a||b||c||d},v=function(){var a=m.isTurboEligible()&&!f.isTimeout()&&0<y;p.logDebug("turbo-checkout-prefetcher","Test should prefetch: eligibilityAggregator.isTurboEligible(): "+m.isTurboEligible()+" !timer.isTimeout(): "+!f.isTimeout()+" _prefetchesAvailable: "+y);return a},r={name:"start",onEvent:function(a){m.shouldAttemptPrefetch()?"controller:onPageLoaded"===a&&k(w):k(D)},onExit:function(){e.startMonitoringPage()}},
w={name:"dataStale",onEvent:function(a){"page:gone"!==a&&"prefetch:onError"!==a&&"sheet:afterClose"!==a&&v()&&k(A)}},A={name:"dataPrefetching",onEnter:function(){l.incrementPrefetchCounter();b.isPrefetch()||a.isOpeningOrOpen()||n.isAutoOpenReadyToBeOpened()?g.callInitiate():g.checkEligibility();--y},onEvent:function(a){if("page:gone"===a)k(w);else{var c=g.isSuccess()&&b.isPrefetch(),d=g.isSuccess()&&b.isNoPrefetch();p.logDebug("turbo-checkout-prefetcher","Test is data fresh: isFreshWhenPrefetchResultOKInT1: "+
c+" isFreshWhenPrefetchResultOKInT4: "+d);c||d?k(z):t()?k(w):"product:onChange"===a&&v()&&k(A)}},onExit:function(a){"dataFresh"!==a&&g.abortCall()}},z={name:"dataFresh",onEnter:function(){f.startTimer()},onEvent:function(b){"page:gone"===b?k(w):t()?k(w):(a.isClosed()||"product:onChange"===b)&&v()&&k(A)},onExit:function(){f.resetTimer()}},D={name:"end"},E="controller:onPageLoaded sheet:beforeOpen sheet:afterClose product:onChange prefetch:onSuccess prefetch:onError timer:onTimeout page:gone page:reappear".split(" "),
x={"sheet:beforeOpen":function(){y=10}};return{setup:function(){y=10;u=r;c.each(E,function(a,b){var c=x[b];d.on("turbo:checkout:"+b,function(a){p.logDebug("turbo-checkout-prefetcher","Processing "+b);c&&c();if(u.onEvent)u.onEvent(b)})})},getState:function(){return u.name}}});"use strict";f.when("A","turbo-signin-adapter","turbo-checkout-content-loader","turbo-checkout-buy-now-button","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-utils","turbo-callback-list","turbo-checkout-state-handler",
"turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-signin-controller",function(d,c,a,b,e,g,f,h,l,p){function k(){v=!1}function n(a){v=!0;z=a;e.logCount("turboCheckoutSigninRequired")}function q(){var a=v&&p.canShow();a&&(f.logDebug("turbo-checkout-signin-controller","Showing sign in dialog"),e.logCount("turboCheckoutSigninPopup"),c.show(z,y,u),d.trigger("turbo:checkout:signInController:onDoSignIn"));return a}function y(){f.logDebug("turbo-checkout-signin-controller",
"Signin success");e.logCount("turboCheckoutSigninSuccess");t.callAll()}function u(){f.logDebug("turbo-checkout-signin-controller","Signin failed");e.logCount("turboCheckoutSigninFailed")}var t=h.create(),v=!1,z;return{setup:function(){a.registerCallback({onStart:k,onSigninRequired:n});b.registerOnClickCallback(q)},registerCallback:t.push}});"use strict";f.when("A","turbo-configuration","turbo-callback-list","turbo-filtered-callback-list","turbo-checkout-page-ready").register("turbo-checkout-iframe",
function(d,c,a,b){function e(){return d.$("#"+p)}function g(){if(!(0<e().length))throw"Attempted to read / write the iFrame without it being in the DOM. This would result in an undefined iFrame document.";var a=e()[0];return a.contentDocument||a.contentWindow.document}function f(){if(0<e().length)throw"Attempted to insert multiple Turbo Checkout iFrames";}function h(){return d.$("\x3ciframe/\x3e",{id:p,src:"about:blank",scrolling:"no","class":"turbo-checkout-blank"})}function l(a){q.push(a)}var p=
c.get(c.KEYS.IFRAME_ID),m=b.create("beforeFramePopulated"),n=b.create("afterFramePopulated"),q=a.create();l(function(a){a.addClass("turbo-checkout-shown")});d.on("turbo:checkout:iframe:document:loaded",function(){q.callAll(e())});return{write:function(a){m.callAll();a+='\x3cscript\x3e"use strict";window.parent.P.now("turbo-checkout-controller").execute("callbackPageController", function callbackPageController(controller) {controller.frameHtmlRendered();});P.when("load").execute("onTurboDocumentLoaded", function onTurboDocumentLoaded() {window.parent.P.when("A").execute("triggerTurboDocumentLoaded", function triggerTurboDocumentLoaded(A) {A.trigger("turbo:checkout:iframe:document:loaded");});});\x3c/script\x3e';
if("string"!==typeof a)throw"Attempted to write non-string value to iFrame. typeof \x3d "+typeof a;var b=g();b.open();b.write(a);b.close();n.callAll(e()[0])},remove:function(){e().remove()},appendTo:function(a){f();a.append(h())},insertInto:function(a){f();a.html(h())},hasContent:function(){var a=0<e().length&&g();return a&&(a.body.hasChildNodes()||a.head.hasChildNodes())},registerCallbacks:function(a){m.push(a);n.push(a)},onContentLoaded:l}});"use strict";f.when("A","turbo-checkout-page-ready").register("turbo-checkout-view-state",
function(d){function c(a,b){return function(){return e===a||e===b}}function a(a){return function(){e=a;b.apply(b,arguments)}}function b(a,b){a&&"string"===typeof a&&d.trigger(a,b)}var e=0;return{isClosed:c(0),isClosing:c(1),isOpen:c(2),isOpening:c(3),isClosingOrClosed:c(1,0),isOpeningOrOpen:c(3,2),setToOpen:a(2),setToOpening:a(3),setToClosed:a(0),setToClosing:a(1)}});"use strict";f.when("A","turbo-view-adapter","turbo-checkout-view-state","turbo-checkout-eligible-state","turbo-checkout-content-loader",
"turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-weblab-trigger","turbo-checkout-csm","turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-ajax-wrapper","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-prefetcher","turbo-checkout-prefetch-timer","turbo-checkout-buy-now-button","turbo-checkout-signin-controller","turbo-checkout-auto-open","turbo-checkout-urls","turbo-checkout-ref-tagger","turbo-configuration","turbo-checkout-event-verification",
"turbo-checkout-page-ready").register("turbo-checkout-controller",function(d,c,a,b,e,g,f,h,l,p,n,r,q,y,u,t,v,z,w,A,I,D,E){function k(){v.bindTurboClickEvent();d.off("turbo:checkout:dimmer:clicked");d.on("turbo:checkout:dimmer:clicked",function(a){a()})}function m(a,b){g.logDebug("turbo-checkout-controller",a,b)}function C(a,b){J();a||c.close({reason:b})}function B(){m("Handling signin success");M()}function L(){m("Handling buy now button click");M();return!0}function M(){Y=setTimeout(Q,2E4);K=l.createScope();
K.markClick();N="loading";V=!1;t.checkTimeout();y.incrementSheetOpenedCounter();c.show()}function Q(){l.logCount("turboCheckoutContenLoadTimeout")}function R(){J();c.removeContent()}function O(){J();E.logBuyNowButtonClickHandlerMetrics()}function J(){b.canShow()&&!f.isDisableTurboWeblabInTreatment()?(m("Registering with buy now button"),d.trigger("turbo:checkout:buyNowEnabled"),v.registerOnClickCallback(L)):(m("Unregistering from buy now button"),d.trigger("turbo:checkout:buyNowDisabled"),v.deregisterOnClickCallback(L))}
function U(a,b){l.logCount("turboCheckoutPrefetchSuccess");a&&(f.isControl()||f.isBuyNowOnly())&&(m("Received content in control: "+a.substring(0,255)),l.logCount("turboCheckoutControlContentReceived"));W=b;c.setContent(a);J()}function T(){J();a.isOpeningOrOpen()&&(l.logCount("turboCheckoutYieldNewPurchase"),c.closeImmediatelyThenExecute(X))}function aa(){clearTimeout(Y);N="unknown";!G||G.isResolved()||G.isRejected()||(m("Initiate confirm called for "+W.currentPurchaseId+" with existing confirm still executing. Aborting"),
l.logCount("turboCheckoutConfirmPending"),G._supersedByNewPurchase=!0,G.abort());ca()}function ba(){var a=p.getLineItems().filter(function(a){return a&&a.isDiscoveredAsin}).map(function(a,b){return a.asin});l.logCount("turboCheckoutDiscoveredAsins",a.length);return a}function ca(){l.logCount("turboCheckoutConfirm");var a=W.currentPurchaseId,b=A.buildConfirmPathWith(p.getRefTag(),f.getExperimentName(),p.getClientId(),p.getRequestId(),p.getSessionId(),ba());G=r.loadWithJQXHR(b,{type:"POST",data:{pid:a},
headers:da(),success:function(a,b,c){l.logCount("turboCheckoutConfirmSuccess")},error:function(b,d,e){"abort"===d?l.logCount("turboCheckoutConfirmAborted"):("timeout"===d&&l.logCount("turboCheckoutConfirmTimeOut"),l.logCount("turboCheckoutConfirmFailed"));b._supersedByNewPurchase||(g.logError("Issue confirming turbo initiate prefetch for pid "+a+": "+e+", "+d),l.logCount("turboCheckoutYieldNewPurchase"),c.closeImmediatelyThenExecute(X))}})}function da(){var a={},b=p.getCSRFToken();b&&0<b.length&&
(a["x-amz-checkout-csrf-token"]=b);return a}function ea(){K.markFirstByte()}function S(){return D.get(D.KEYS.HOST_PAGE_TYPE_IDENTIFIER)}function X(){v.executeOriginalBuyNowAction(p.getActiveId())}function fa(a){d.trigger("turbo:checkout:embedded:page:showSpinner");G.done(a)}function P(a,b,c){N=c;V=!1}function ha(){V=!0}function ia(a){d.off("turbo:checkout:dimmer:clicked");d.on("turbo:checkout:dimmer:clicked",function(a){a()});a&&a.doNotLog||(a&&!a.doNotLog?Z(N,a.reason):Z(N,!1));N="closed"}function Z(a,
b){var c=A.buildLogPageHitPathWith(V?a+"2":a,b,p.getClientId());m("Logging page hit from "+a+" to "+S()+" reason "+b);r.load(c,{method:"POST",params:{pageType:S(),referrer:a},timeout:4E3})}function ja(){a.isOpeningOrOpen()&&l.logCount("turboCheckoutProductChangedWhileOpening")}var K,N,W,V;I=D.get(D.KEYS.AJAX_PAGE_UPDATE_EVENT);var Y,G;d.on(I,k);k();return{pageLoaded:function(){var a=f.getExperimentName();if(a){var g=f.getAllocation();l.addCounterExtraSuffix("wl:"+g);l.addCounterExtraSuffix(a+":"+
g)}n.isDeviceTurboEligible()&&(b.setup(),b.registerStateChangeCallback(C),q.setup(),e.registerCallback({onStart:R,onTurboEligible:O,onFinish:U,onError:T}),h.setup(),z.setup(),z.registerCallback(B),K=l.createScope(),c.registerCallbacks({beforeFramePopulated:aa,afterFramePopulated:ea}),p.registerCallback(ja),d.on("turbo:checkout:sheet:beforeClose",ia),d.on("turbo:checkout:embedded:page:beforeReload",P),d.on("turbo:checkout:embedded:page:animation:start",ha),w.setup(v.executeTurboBuyNowAction,O),u.setup(),
d.trigger("turbo:checkout:controller:onPageLoaded"))},loadFullscreen:function(a,b){function d(){a=g.createFQDN(a);"thankyou"===b?(l.logCount("turboCheckoutYieldTYP"),"primewardrobe"===p.getClientId()&&l.logCount("turboCheckoutYieldTYP:pw"),c.closeAndNavigate(a)):"thirdPartyPaymentInterstitial"===b?c.closeAndNavigate(a):"verifyMfaPage"===b?("primewardrobe"===p.getClientId()&&l.logCount("turboCheckoutYieldTYP:pw"),c.closeAndNavigate(a)):(l.logCount("turboCheckoutYield"),c.closeToFullscreen(a))}!G||
G.isResolved()||G.isRejected()?d():(l.logCount("turboCheckoutWaitYield"),fa(d))},frameContentReady:function(a,b,c){d.trigger("turbo:checkout:embedded:page:ready",a,b);(function(){var a=function(){K.markCriticalFeature();c.confirmHit(S(),p.getRefTag());K.whenDataSet(c.recordClientSideMetrics);b.off("checkout:afterReload",a)};b.on("checkout:afterReload",a)})();(function(){b.on("checkout:beforeReload",function(c){d.trigger("turbo:checkout:embedded:page:beforeReload",a,b,c)});b.on("checkout:reload",function(c){d.trigger("turbo:checkout:embedded:page:reload",
a,b,c)});b.on("checkout:afterReload",function(c){d.trigger("turbo:checkout:embedded:page:afterReload",a,b,c)});b.on("turbo:checkout:animation:start",function(){d.trigger("turbo:checkout:embedded:page:animation:start")});d.on("turbo:checkout:embedded:page:showSpinner",function(){c.showSpinner()});d.off("turbo:checkout:dimmer:clicked");d.on("turbo:checkout:dimmer:clicked",function(a){b.trigger("turbo:checkout:dimmer:clicked:iFrame",a)});b.on("turbo:checkout:update:dimmer",function(a){d.trigger("turbo:checkout:update:dimmer:afterReload",
a)});b.on("turbo:checkout:update:modal:header",function(a){d.trigger("turbo:checkout:update:modal:header:afterReload",a)})})()},frameHtmlRendered:function(){K.markAboveTheFold()},updateBounds:function(a,b){c.updateBounds(a,b)},getHeight:function(){return c.getHeight()},updateMinHeight:function(a){return c.updateMinHeight(a)},updateScrollHeight:function(a,b){return c.updateScrollHeight(a,b)},updateDimmer:function(a){d.trigger("turbo:checkout:update:dimmer:typReload",a)},getHostPageType:S}});"use strict";
f.when("turbo-checkout-page-load-spinner","turbo-checkout-controller","turbo-checkout-csm","turbo-checkout-page-state","turbo-constants","turbo-checkout-page-ready").register("turbo-checkout-startup",function(d,c,a,b,e){b.get().turboAssetsMode!==e.ASSET_MODE_CLT_CX_ONLY&&(d.removePageLoadSpinner(),a.logCount("turboCheckoutControllerPageLoaded"),c.pageLoaded())});"use strict";f.when("turbo-checkout-assets-load-trigger").register("turbo-checkout-page-ready",function(){n.ue&&n.ue.count&&"undefined"!==
typeof n.ue_t0&&n.ue.count("turboCheckoutPageReady",Date.now()-n.ue_t0)});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-authportal-return-query",function(d,c,a,b,e,f,k){function g(b){a.logDebug("turbo-checkout-authportal-return-query",b)}function l(a){return!!a.match("trb_auth\x3d1")}function p(d){if(l(d)){d=
((d||"").match(q)||[])[1]||"";var e=b.getSessionId();a.isNonEmptyString(d)||c.logCount("turboCheckoutPostAuthEmptySessionParameter");a.isNonEmptyString(e)||c.logCount("turboCheckoutPostAuthEmptySessionPageState");a.isNonEmptyString(d)&&a.isNonEmptyString(e)&&d!==e&&(a.logWarning("Turbo Session Flip Detected. Post authentication sessionId \x3d "+e+", Expected \x3d "+d,"turbo-checkout-authportal-return-query"),c.logCount("turboCheckoutPostAuthSessionFlip"))}}var m=/&?(openid|aToken|serial)[^&]*/g,r=
/&?trb_(open|auth|qty|warrAsin|sid|accessory(Asin|Offer))=[^&]*/g,q=/&?trb_sid=([^&]*)/,y=/\?[?&]*/,u=/[?&]{2,}/g;p(n.location.search);return{buildFrom:function(a){g("Initial Query \x3d "+a);a=(a||"?").replace(m,"");a=a.replace(r,"");a+="\x26trb_auth\x3d1\x26trb_open\x3d1";var c=e.getQuantity();a+=1<c?"\x26trb_qty\x3d"+c:"";c=f.getLineItem();a+=c&&c.asin?"\x26trb_warrAsin\x3d"+c.asin:"";c=b.getSessionId();a+=0<c.length?"\x26trb_sid\x3d"+c:"";c=b.getActiveId();a+=c?"\x26trb_bid\x3d"+c:"";c=k.getLineItem();
a+=c&&c.asin&&c.offerListingId?"\x26trb_accessoryAsin\x3d"+c.asin+"\x26trb_accessoryOffer\x3d"+c.offerListingId:"";a=a.replace(y,"?").replace(u,"\x26");g("Final Query \x3d "+a);return a},isReturningFromAuthPortal:l,validateSession:p}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-csm","turbo-checkout-authportal-return-query","turbo-checkout-page-ready").register("turbo-checkout-signin-utils",function(d,c,a){function b(a){return null!==a.match(f)}function e(){var b=a.buildFrom(n.location.search);
return encodeURIComponent("https://"+n.location.hostname+n.location.pathname.replace(k,"/ref\x3dtrb_chk_auth")+b)}var f=/openid\.return_to=([^&$]+)/,k=/(\/ref=[^/]*\/?$|\/?$)/;return{encodeSignInUrl:function(a){if(b(a)){c.logCount("turboCheckoutForceMobileClaimCollection");var g=a.match(f)[1],h=decodeURIComponent(g);g===h&&d.logError("The pre-defined returnTo seems to be un-encoded");h=encodeURIComponent(h+(-1===h.indexOf("?")?"?":"\x26")+"openid.return_to\x3d"+e());return a.replace(g,h)}return a+
(-1===a.indexOf("?")?"?":"\x26")+"openid.return_to\x3d"+e()},isEnforceMobileClaimUrl:function(a){var b=null!==a.match("openid.pape.preferred_auth_policies%3DEnforcePossessionOnMobileClaim")||null!==a.match(decodeURIComponent("openid.pape.preferred_auth_policies%3DEnforcePossessionOnMobileClaim"));a=null!==a.match("intercept%3Dfalse")||null!==a.match(decodeURIComponent("intercept%3Dfalse"));return b&&a},_isReturnToParameterPredefined:b}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-csm",
"turbo-checkout-auto-open","turbo-checkout-authportal-return-query","turbo-checkout-signin-utils","turbo-checkout-page-ready").register("turbo-checkout-browser-signin",function(d,c,a,b,e){function f(){var a=n.location.search.match(k)?"turboCheckoutSigninSuccess":"turboCheckoutSigninFailed";c.logCount(a)}var k=/openid\.mode=id_res/;b.isReturningFromAuthPortal(n.location.search)&&(c.logCount("turboCheckoutAuthPortalReturn"),f());return{show:function(b){b=e.encodeSignInUrl(b);c.logCount("turboCheckoutSignInUrlSize",
b.length);a.reset();n.location.assign(b)}}});"use strict";f.when("turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-strings",function(d,c){function a(a){return function(){var b=c.getStrings()[a];if(b)return b;d.logDebug("turbo-checkout-strings",'String for key "'+a+'" is undefined! Returning empty string.');return""}}return{getHeaderText:a("TURBO_CHECKOUT_HEADER"),getLoadingText:a("TURBO_LOADING_TEXT")}});"use strict";f.when("jQuery","turbo-checkout-page-ready").register("turbo-checkout-loading-spinner",
function(d){function c(){return d("#turbo-loading-container")}function a(a){var b=d("\x3cdiv\x3e",{id:"turbo-loading-content"}).append(d("\x3cdiv\x3e",{id:"turbo-loading-spinner","class":"a-spinner a-spinner-medium"}));"string"===typeof a&&a&&b.append(d("\x3cdiv\x3e",{id:"turbo-loading-text",text:a}));return b}return{create:function(b){return d("\x3cdiv\x3e",{id:"turbo-loading-container"}).append(a(b))},get:c,show:function(){c().addClass("turbo-checkout-shown")}}});"use strict";f.when("A","turbo-checkout-utils",
"turbo-checkout-page-ready").register("turbo-checkout-eligibility-response-weblabs",function(d,c){var a=[];return{set:function(b){d.$.isArray(b)&&(a=b)},get:function(){return a}}});"use strict";f.when("turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-session-storage",function(d,c){function a(a,d){c.logDebug("turbo-checkout-session-storage",a,d)}return{isPresent:function(b){a:{try{var c=n.sessionStorage.getItem(b);break a}catch(g){d.logCount("turboCheckoutSessionStorageExceptionGet"),
a("get() exception",g)}c=null}return null!==c&&c!==z},set:function(b,c){try{n.sessionStorage.setItem(b,c)}catch(g){d.logCount("turboCheckoutSessionStorageExceptionSet"),a("set() exception",g)}},remove:function(b){try{return n.sessionStorage.removeItem(b)}catch(e){d.logCount("turboCheckoutSessionStorageExceptionRemove"),a("remove() exception",e)}}}});"use strict";f.when("A","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-load-events",function(d,c){var a=c.get(c.KEYS.AJAX_PAGE_UPDATE_EVENT);
return{bind:function(b){d.off(a,b);d.off("turbo:checkout:controller:onPageLoaded",b);d.on(a,b);d.on("turbo:checkout:controller:onPageLoaded",b)}}});"use strict";f.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-event-verification",function(d,c,a,b,e,f){function g(){var a=f.get(f.KEYS.BUY_NOW_CLICK_EVENT).split(".");return 1<a.length?a[1]:"turboCheckout"}function h(b){var c=b.map(function(a){return a.namespace}).filter(function(a,
b,c){return c.indexOf(a)===b});b.length!==c.length&&a.logCount("turboCheckoutBuyNowButtonDuplicateClickHandler")}function l(b){if((b=b.filter(function(a){return a!==z&&"click"===a.type&&0<=r.indexOf(a.namespace)}))&&0<b.length){var c=0;b.forEach(function(b){b.namespace!==g()&&(a.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelisted:"+b.namespace),c++)});0<c&&a.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelistedQuantity:"+c)}}function n(b){if((b=b.filter(function(a){return a!==z&&"click"===
a.type&&0>r.indexOf(a.namespace)}))&&0<b.length){var c=0;b.forEach(function(){a.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelisted");c++});a.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelistedQuantity:"+c)}}var m=!1,r=[g(),"accessoryUpsellInterstitial","makoPreRegistration","moq","siatc","hctpDFL","bbg","vasBuyNow","ppdBundles","makoGiftingMetrics","financialOptionsCheckout"];return{logBuyNowButtonClickHandlerMetrics:function(){var d=e.getBuyNowButtons();if(!m&&d&&0<d.length){for(var f=
0;f<d.length;f++){var g=c._data(d[f],"events");if(!g||!g.click){a.logCount("turboCheckoutBuyNowButtonNoBoundHandlers");return}var k=(g=g.click)?g.length:0;1<k&&(b.logDebug("turbo-checkout-event-verification","Multiple handlers bound to 'click' in Buy Now button. Number of handlers: "+k,void 0),a.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBound"),a.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBoundQuantity:"+k));h(g);n(g);l(g)}m=!0}}}});"use strict";f.when("turbo-checkout-page-ready").register("turbo-constants",
function(){return{ASSET_MODE_TURBO_ONLY:"TURBO_ONLY",ASSET_MODE_CLT_CX_ONLY:"CLT_CX_ONLY",ASSET_MODE_TURBO_AND_CLT_CX:"TURBO_AND_CLT_CX"}});"use strict";f.when("turbo-checkout-page-ready").execute(function(){f.declare("is-turbo-shopping-portal-integration-enabled",!1)})});
/* ******** */
(function(f){var p=window.AmazonUIPageJS||window.P,r=p._namespace||p.attributeErrors,a=r?r("TurboCheckoutDesktopAssets",""):p;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,p,r){f.when("turbo-configuration-keys","turbo-checkout-page-ready").register("turbo-device-configuration",function(a){if(!c){var c={};c[a.SHOW_SIGN_IN_INTERFACE]="turbo-checkout-browser-signin";c[a.EXTEND_ELIGIBLE_STATE]=!1;c[a.IS_DEVICE_FILTER_REQUIRED]=!0;c[a.VIEW_ADAPTER]="turbo-checkout-modal";
c[a.WARRANTY_CHECKBOX_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]";c[a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR]=".abbListItem";c[a.WARRANTY_OFFER_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]:checked";c[a.WARRANTY_ASIN_INPUT_NAME]="asin"}return c});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-device-variant","turbo-checkout-is-touch-and-orientation-enabled","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a,
c,g,f,h,p){function k(a){var b=!1;this.countOnce=function(){b||(c.logCount(a),b=!0)}}function d(a){g.logDebug("turbo-checkout-device-filter",a)}var r="turboCheckoutDisabledDesktopAuiVariant"+h,l,b,y,u,t,m,v;return{isDeviceTurboEligible:function(){l=l||new k("Desktop"===h?"turboCheckoutDesktopAuiVariantEligible":r);var e;(e=b)||(e=g.isInternetExplorer()?"turboCheckoutDisabledDesktopIE":g.isIPad()?"turboCheckoutDisabledDesktopIPad":g.isIPhone()?"turboCheckoutDisabledDesktopIPhone":g.isAndroid()?"turboCheckoutDisabledDesktopAndroid":
"turboCheckoutDesktopUserAgentEligible",e=new k(e));b=e;y=y||new k("turboCheckoutDisabledDesktopTouch");u=u||new k("turboCheckoutDisabledDesktopOrientation");t=t||new k("turboCheckoutDisabledDesktopTouchAndOrientation");m=m||new k("turboCheckoutDisabledTurboDesktopOnDevice");v=v||new k("turboCheckoutEnabledTurboDesktopOnDevice");l.countOnce();"Desktop"===h||d("Aui device variant is NOT Desktop. Turbo will NOT show. Variant is "+h);(e="Desktop"!==h)||(b.countOnce(),e=!!(g.isInternetExplorer()||g.isIPad()||
g.isAndroid()||g.isIPhone()));if(e)return m.countOnce(),!1;if(e=a.capabilities.touch)y.countOnce(),d("Touch enabled device. Turbo will NOT show");var c=a.capabilities.orientation;c&&(u.countOnce(),d("Orientation enabled device. Turbo will NOT show"));e&&c&&t.countOnce();if((e||c)&&!p)return m.countOnce(),!1;v.countOnce();return!0},isSignInSupported:function(){return f.get(f.KEYS.IS_SIGN_IN_SUPPORTED)}}});"use strict";f.when("turbo-checkout-page-ready").execute(function(){f.declare("turbo-checkout-device-variant",
"Desktop")});"use strict";f.when("A","a-modal","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-iframe","turbo-checkout-base-view","turbo-checkout-loading-spinner","turbo-checkout-view-state","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-checkout-page-ready").register("turbo-checkout-modal",function(a,c,f,F,h,G,k,d,z,l){function b(a){F.logDebug("turbo-checkout-modal",a)}function g(){!A()||d.isOpeningOrOpen()?b("show() suppressed. View is null or undefined or view state is opening or open"):
(d.setToOpening(),m().show())}function u(){w&&d.isOpeningOrOpen()&&(h.appendTo(e()),h.write(w))}function t(){h.remove();if(0<e().length)b("Modal frame is in DOM. Inserting Spinner"),e().height("").html(k.create(l.getLoadingText())).append(v()),q("#turbo-checkout-modal-header").text(l.getHeaderText());else{b("Modal frame is NOT in DOM. Resetting Modal");var a={inlineContent:q("\x3cdiv\x3e",{id:"turbo-checkout-frame"}).html(k.create(l.getLoadingText())).append(v()).prop("outerHTML"),padding:"none",
dataStrategy:"inline",header:'\x3cdiv id\x3d"turbo-checkout-modal-header"\x3e'+l.getHeaderText()+"\x3c/div\x3e"};m().update(a)}}function m(){return B=B||c.get(q("#turbo-checkout-modal"))}function v(){return q("\x3cscript/\x3e",{type:"text/javascript",html:'P.when("A").execute(function turboFrameReady(A) { A.trigger("turbo:checkout:frame:ready"); });'})}function e(){return q("#turbo-checkout-frame")}function x(a){!A()||d.isClosingOrClosed()?b("close() suppressed. View is undefined or null or view state is closing or closed"):
(n=a||n,n.notify=!0===n.notify||n.notify===r,d.setToClosing(),m().hide())}function A(){var a=m();a||b("Modal is undefined or null. Modal \x3d "+a);return a?!0:!1}function C(b){q(document.body).unbind("click");b();a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,immediate:!0,doNotLog:!0})}function D(a){b("onDismiss");n={notify:!0,reason:a}}var q=a.$,n={},w,B,E=new (G.extend())("#turbo-checkout-frame");h.onContentLoaded(function(a){k.get().remove()});a.on("a:popover:dismiss:turbo",function(){b("onClick_X");
D(z.TAGS.TOUCH_X)});a.declarative("a-popover-floating-close","click",function(){b("onDimmerClicked");D(z.TAGS.TOUCH)});a.on("a:popover:beforeShow:turbo",function(){b("onBeforeOpen");d.setToOpening("turbo:checkout:sheet:beforeOpen");t()});a.on("a:popover:show:turbo",function(){b("onOpen");d.setToOpen();w||k.show()});a.on("a:popover:beforeHide:turbo",function(){b("onBeforeClose");d.setToClosing.apply(d,!0===n.notify?["turbo:checkout:sheet:beforeClose",n]:r);e().removeClass("turbo-checkout-shown")});
a.on("a:popover:hide:turbo",function(){b("onClose");d.setToClosed("turbo:checkout:sheet:afterClose");n={}});a.on("a:popover:afterHide:turbo",t);a.on("turbo:checkout:sheet:doOpen",g);a.on("turbo:checkout:sheet:doClose",x);a.on("turbo:checkout:frame:ready",u);a.on(a.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,function(){f.logCount("turboCheckoutDesktopOrientationChange");d.isOpen()&&f.logCount("turboCheckoutDesktopOrientationChangeWhenModalOpen")});a.on("turbo:checkout:state:product:resolved",function(){q("#turbo-checkout-modal-header").text(l.getHeaderText())});
a.on("turbo:checkout:update:modal:header:afterReload",function(a){null!==a&&q("#turbo-checkout-modal-header").text(a)});return{show:g,setContent:function(a){w=a;b("iFrame content saved");d.isOpeningOrOpen()?u():(b("setFrameContent NOT called"),b("viewState is not opening? isOpeningOrOpen \x3d "+d.isOpeningOrOpen()),b("iFrame already has content? iFrame.hasContent \x3d "+h.hasContent()))},removeContent:function(){w="";t()},close:x,closeToFullscreen:function(a){C(function(){p.location.href=a})},closeImmediatelyThenExecute:C,
closeAndNavigate:function(b){p.location.href=b;a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,doNotLog:!0})},registerCallbacks:h.registerCallbacks,updateBounds:function(a){E.updateBounds(a)},getHeight:function(){return E.getHeight()}}});"use strict";f.declare("turbo-checkout-is-touch-and-orientation-enabled",!1)});
/* ******** */
(function(c){var d=window.AmazonUIPageJS||window.P,e=d._namespace||d.attributeErrors,a=e?e("DetailPageTurboCheckoutDesktopAssets",""):d;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,d,e){c.when("turbo-configuration-keys","turbo-product-state-key","turbo-state-parsing-root-node-selector","turbo-checkout-page-ready").register("turbo-client-configuration",function(a,c,d){var b;b||(b={},b[a.HOST_PAGE_TYPE_IDENTIFIER]="detail",b[a.BUY_NOW_ONLY_TREATMENT]="T1",b[a.NO_PREFETCH_TREATMENT]=
/T[2-9]/,b[a.ADDRESS_INPUT_SELECTORS]=["#unifiedLocation1ClickAddress","#addToCart input[name\x3d'dropdown-selection']","#unifiedLocationAddress","input[name\x3d'dropdown-selection']"],b[a.QUANTITY_SELECT_SELECTOR]="#quantity",b[a.CONFLICTING_INITIATE_LISTENERS]=["click.siatc"],b[a.VAS_CHANGE_EVENTS]=["vas:remove-service-asin-buybox-event","vas:add-service-asin-buybox-event"],b[a.VAS_CHECKBOX_SELCTOR]="#ppdb-add-service-checkbox",b[a.SESSION_ID_SELECTOR]='input[name\x3d"session-id"]',b[a.TURBO_PRODUCT_STATE_KEY]=
c,b[a.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR]=d,b[a.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR]=d);return b});"use strict";c.when("turbo-checkout-page-ready").execute(function(){c.declare("turbo-product-state-key","turbo-checkout-product-state")});"use strict";c.when("turbo-checkout-page-ready").execute(function(){c.declare("turbo-state-parsing-root-node-selector",".turbo-checkout-state-root")})});
/* ******** */
