(function(g){var k=window.AmazonUIPageJS||window.P,u=k._namespace||k.attributeErrors,a=u?u("HLCXDetailPageAssets",""):k;a.guardFatal?a.guardFatal(g)(a,window):a.execute(function(){g(a,window)})})(function(g,k,u){g.register("wty:natc-constants",function(){return{PARAMETERS:{ATC:{ASIN:"items[0.warranty][asin]",OFFER_LISTING_ID:"items[0.warranty][offerListingId]",QUANTITY:"items[0.warranty][quantity]"},IA:{ASSOCIATED_ITEM_ID:"items[0.warranty][additionalParameters][itemAssociation][associatedItemId]",
PROGRAM_TYPE:"items[0.warranty][additionalParameters][itemAssociation][programType]",RENDER_TYPE:"items[0.warranty][additionalParameters][itemAssociation][renderType]",MUTUALLY_INCLUSIVE:"items[0.warranty][additionalParameters][itemAssociation][deleteConstraint][mutuallyInclusive]",QUANTITY_INVARIANCE_FACTOR:"items[0.warranty][additionalParameters][itemAssociation][quantityConstraint][invarianceFactor]",QUANTITY_EDITABLE:"items[0.warranty][additionalParameters][itemAssociation][quantityConstraint][quantityEditable]"}}}});
g.when("A","wty:natc-constants").register("wty:natcFormHelper",function(a,b){var d=function(a,c){var b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("name",a);b.setAttribute("value",c);return b},c=function(a,c,h){return[d(b.PARAMETERS.ATC.ASIN,a),d(b.PARAMETERS.ATC.OFFER_LISTING_ID,c),d(b.PARAMETERS.ATC.QUANTITY,h)]};return{createItemAssocParams:function(a){return[d(b.PARAMETERS.IA.ASSOCIATED_ITEM_ID,a),d(b.PARAMETERS.IA.PROGRAM_TYPE,"AmazonProtect"),d(b.PARAMETERS.IA.RENDER_TYPE,
"renderAll"),d(b.PARAMETERS.IA.MUTUALLY_INCLUSIVE,!1),d(b.PARAMETERS.IA.QUANTITY_INVARIANCE_FACTOR,1),d(b.PARAMETERS.IA.QUANTITY_EDITABLE,!1)]},addAtcParams:function(b,f,d,g){b=c(b,f,d);a.$.each(b,function(a,c){g.append(c)})},clearParams:function(c,b){var d=a.$.map(Object.keys(b),function(a){return'input[name\x3d"'+b[a]+'"]'}).join(",");c.find(d).each(function(a,c){c.parentNode.removeChild(c)})}}});g.when("A","wty:natc-constants").register("wty:natcDeclarativeHelper",function(a,b){return{createItemAssocParams:function(a){var c=
{};c[b.PARAMETERS.IA.ASSOCIATED_ITEM_ID]=a;c[b.PARAMETERS.IA.PROGRAM_TYPE]="AmazonProtect";c[b.PARAMETERS.IA.RENDER_TYPE]="renderAll";c[b.PARAMETERS.IA.MUTUALLY_INCLUSIVE]=!1;c[b.PARAMETERS.IA.QUANTITY_INVARIANCE_FACTOR]=1;c[b.PARAMETERS.IA.QUANTITY_EDITABLE]=!1;return c},addAtcParams:function(d,c,e,f){var h={};h[b.PARAMETERS.ATC.ASIN]=d;h[b.PARAMETERS.ATC.OFFER_LISTING_ID]=c;h[b.PARAMETERS.ATC.QUANTITY]=e;a.$.extend(f,h)},clearParams:function(b,c){a.$.each(Object.keys(c),function(a,f){b.hasOwnProperty(c[f])&&
delete b[c[f]]})}}});g.when("A","ready").execute(function(a){a.on("a:accordion:installment-payment-buybox-accordion:select",function(b){a.$("#abbWrapper [id^\x3dmbb-offeringID-]").prop("checked",!1)})});g.when("A").register("BaseLinkKeyValuePairHelper",function(a){var b=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"===a?b:b&3|8).toString(16)})},d=function(a,b){this.key=a;this.value=b};return{getBaseLinkPairs:function(){var a=
b();return{ITEM_ASSOC:new d("itemAssoc",a),UNIQ_PARENT:new d("UNIQ-itemAssoc",a),UNIQ_WARRANTY:new d("UNIQ-lnkdWrrnty",a),ITEM_ASSOC_TYPE:new d("itemAssocType","AmazonProtect"),RENDER_TYPE:new d("itemAssocRenderType","renderAll")}}}});g.when("A","BaseLinkKeyValuePairHelper","wty:natc-constants","wty:natcFormHelper").register("BaseLinkFormHelper",function(a,b,d,c){var e=a.$,f=function(a){return a.find('input[name\x3d"items[0.base][asin]"]').attr("value")||a.find('input[id\x3d"ASIN"], input[id\x3d"a"]').attr("value")},
h=function(a,c){var b=0;c.find("input[name^\x3d'custom-name\\."+a+"\\.']").each(function(a,c){a=c.name.split(".")[2];isNaN(a)||(b=a>b?a:b)});return b+1},g=function(a,c,b){var f=[],d=h(a,c);e.each(b,function(c,b){var e="custom-value."+a+"."+d;c=m("custom-name."+a+"."+d,b.key);b=m(e,b.value);f=f.concat([c,b]);d++});return f},m=function(a,c){var b=document.createElement("input");b.setAttribute("type","hidden");b.setAttribute("class","atcFormWarrantyData");b.setAttribute("id",a);b.setAttribute("name",
a);b.setAttribute("value",c);return b},y=function(a){a.find(".atcFormWarrantyData").each(function(a,c){c.parentNode.removeChild(c)});c.clearParams(a,d.PARAMETERS.IA)};return{addBaseLinkFields:function(a,d){y(d);if(!d.find("input[value\x3d'itemAssoc']").length){var h=b.getBaseLinkPairs(),m=g(1,d,[h.ITEM_ASSOC,h.UNIQ_PARENT,h.ITEM_ASSOC_TYPE]);a=g(a,d,[h.ITEM_ASSOC,h.UNIQ_WARRANTY,h.ITEM_ASSOC_TYPE,h.RENDER_TYPE]);m=m.concat(a);e.each(m,function(a,c){d.append(c)})}m=f(d);m=c.createItemAssocParams(m);
e.each(m,function(a,c){d.append(c)})},removeBaseLinkFields:y,getMobileWarrantyIndex:function(a){var c=1;a.find("input[name\x3d'a']").each(function(a,b){b.value&&(a=b.value.split("|"))&&(c=a.length)});return c+1}}});g.when("A","BaseLinkKeyValuePairHelper","wty:natc-constants","wty:natcDeclarativeHelper").register("BaseLinkDeclarativeHelper",function(a,b,d,c){var e=a.$,f=[],h=function(a){var c=!1;e.each(a,function(a,b){if("itemAssoc"===b)return c=!0,!1});return c},g=function(a,c,b){var d={},h=m(a,c);
e.each(b,function(c,b){c=b.value;var e="custom-name."+a+"."+h,m="custom-value."+a+"."+h;d[e]=b.key;d[m]=c;f.push(e);f.push(m);h++});return d},m=function(a,c){var b=new RegExp("^custom-name[.]["+a+"]+[.]([0-9]+)$"),d=0;e.each(c,function(a){if(a=a.match(b))a=+a[1],a>d&&(d=a)});return d+1},y=function(a){e.each(f,function(c,b){a.hasOwnProperty(b)&&delete a[b]});f=[];c.clearParams(a,d.PARAMETERS.IA)};return{addBaseLinkFields:function(a){y(a);if(!h(a)){var d=b.getBaseLinkPairs(),f=g(1,a,[d.ITEM_ASSOC,d.UNIQ_PARENT,
d.ITEM_ASSOC_TYPE]),d=[d.ITEM_ASSOC,d.UNIQ_WARRANTY,d.ITEM_ASSOC_TYPE,d.RENDER_TYPE],m=1;a.a&&(m=a.a.split("|").length);d=g(m+1,a,d);e.extend(a,f);e.extend(a,d)}f=c.createItemAssocParams(a["items[0.base][asin]"]||a.a);e.extend(a,f)},removeBaseLinkFields:y,getDeclarativeDataInputs:function(a){if(a=e(a)){var c=a.data("action");if((a=a.data(c))&&a.inputs)return a.inputs}}}});g.when("A","aw-mash").register("BaseLinkAddWarrantyHelper",function(a,b){var d=function(a){k.ueLogError&&k.ueLogError({message:"msi - "+
a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{addLinkedWarranty:function(c,e,f){a.ajax("/gp/product/amazon-protect/base-link/services/warranty-service.html",{method:"post",params:c,timeout:1E3,success:function(a){a&&a.status&&"OK"===a.status?(e(),a.numActiveItemsInCart&&(a=parseInt(a.numActiveItemsInCart,10),b.cart.didUpdate({newCartQuantity:a}))):d("Error while doing a call to warranty-service.html. Success but response not valid.")},error:function(a,c,b){d("Error while doing a call to warranty-service.html. Status: "+
c+" . Error: "+b);f()}})},obtainBaseItemCartid:function(c){a.ajax("/gp/product/amazon-protect/base-link/services/last-added-cart-item-id.html",{method:"post",timeout:1E3,cache:!1,success:function(a){a&&a.status&&a.lastAddedItemCartId?c(a.lastAddedItemCartId):d("Error while doing a call to last-added-cart-item-id.html. Status: "+a.status)},error:function(a,c,b){d("Error while doing a call to last-added-cart-item-id.html. Status: "+c+" . Error: "+b)}})},mSilogError:d}});"use strict";g.when("A","ready").execute(function(a){function b(a){var b=
k.ue;b&&b.count&&b.count(a,(b.count(a)||0)+1)}var d=a.$;a.on("a:expander:comparison_detail_expander:toggle:expand",function(a){b("ComparisonExpanderExpanded");d(".comparison_other_attribute_row").removeClass("aok-hidden")});a.on("a:expander:comparison_detail_expander:toggle:collapse",function(a){b("ComparisonExpanderCollapsed");d(".comparison_other_attribute_row").addClass("aok-hidden")})});g.when("A","atf","ready").execute(function(a){function b(){var b,c=a.$("#HLCXComparisonJumplink_feature_div"),
e=a.$("#HLCXComparisonWidget_feature_div");b=a.$("#HLCXComparisonJumplinkContent").length?e.find("#HLCXComparisonJumplinkContent"):e.find(".HLCXComparisonJumplinkContent");e=e.has("#HLCXComparisonTable").length;c.empty();e&&b.clone().removeClass("aok-hidden").appendTo(c)}a.declarative("hlcx-send-reftag","click",function(b){a.$.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+b.data.refTag)});b();a.on("a:pageUpdate",b)});g.when("A","ready").execute("logCsmMetricsForComparisonTabs",function(a){var b;
a.on("a:tabs:comparison_items_tabs:compare_to_similar_items_tab:select a:tabs:comparison_items_tabs:compare_to_recently_viewed_items_tab:select",a.throttle(function(a){b&&b===a.selectedTab.tabName||(b=a.selectedTab.tabName,k.ue&&k.ue.count&&k.ue.count(a.selectedTab.tabName,1))},100,{trailing:!1}))});g.when("A","3p-promise","ready").register("hlcx-table-csm",function(a,b,d){function c(b){return a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell").filter(":visible").map(function(){return a.$(this).attr("data-asin")}).toArray()}
function e(){try{var a=document.cookie.match("(^|[^;]+)\\s*(session-id|sessionId)\\s*\x3d\\s*([^;]+)");return a?a.pop():""}catch(b){return""}}function f(c,d){return new b(function(b,f){function e(){d.unbind("click auxclick",e);var c=a.now()-h;a.off("DOMContentLoaded load resize scroll",g);b({timeInView:c,clickedOff:!0})}var h=a.now(),g=a.throttle(function(){if(!a.onScreen(c)){var d=a.now()-h;a.off("DOMContentLoaded load resize scroll",g);b({timeInView:d,clickedOff:!1})}},200);d.bind("click auxclick",
e);a.on("DOMContentLoaded load resize scroll",g)})}function h(a,b,d){var e=c(d);a={pageAsin:a,comparableAsins:e.slice(1),sessionId:b,deviceType:d?"mobile":"desktop"};k.ue&&k.ue.event&&k.ue.event(a,"comparison","comparison.dpTableImpression.1")}function g(b,d,p){function n(){!r&&a.onScreen(q)&&(r=!0,f(q,p()).then(function(a){r=!1;if(!(2500>a.timeInView)){var e=c(d).slice(1),f=a.timeInView,h=++u,g;g=k.location.href.endsWith("#HLCXComparisonWidget_feature_div");a={pageAsin:b,comparableAsins:e,sessionId:x,
timeInView:f,viewOnPageCounter:h,deviceType:d?"mobile":"desktop",landedOnComparisonsTable:g,clickedOff:a.clickedOff};k.ue&&k.ue.event&&k.ue.event(a,"comparison","comparison.dpTableView.2")}}))}var q=a.$(d?"#hlcx_cmp_table":"#HLCXComparisonTable");if(q.length){var x=e();h(b,x,d);var r=!1,u=0;a.on("DOMContentLoaded load resize scroll",n);a.on("a:pageUpdate",function(){b!==a.$(d?".hlcx-cmp-title-col":".comparison_image_title_cell").first().attr("data-asin")&&a.off("DOMContentLoaded load resize scroll",
n)})}}return{setupClientSideLogging:function(b,c){var d;return function(){var e=a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell").first().attr("data-asin");d!==e&&"undefined"!==typeof e&&(d=e,g(d,b,c))}}}});g.when("A","hlcx-table-csm").execute(function(a,b){b=b.setupClientSideLogging(!1,function(){return a.$("td.comparison_add_to_cart_button span.a-button, th.comparison_image_title_cell a, #comparison_sold_by_row a, #comparison_custormer_rating_row a")});a.on("a:pageUpdate",b);b()});g.when("A",
"ready").register("comparison-table-weblab-trigger",function(a,b){function d(b,d,f){var g=a.throttle(function(){if(a.onScreen(c)||f&&a.onScreen(e)){var p=a.state(b).treatment,n=k.ue;p&&n&&n.trigger&&n.trigger(d,p);a.off("DOMContentLoaded load resize scroll",g)}},200);a.on("DOMContentLoaded load resize scroll",g)}var c,e,f;return{triggerWeblabWhenViewing:function(b,g,m){var k;return function(){c=a.$(b?"#hlcx_cmp_table":"#HLCXComparisonTable");f=a.$(b?".hlcx-cmp-title-col":".comparison_image_title_cell");
e=a.$(b?"#hlcx_cmp_table_holder":"#HLCXComparisonTableHolder");var p;p=f.length?f.first().attr("data-asin"):e.length?e.attr("data-asin"):u;k!==p&&p&&(k=p,d(g,m,!0))}}}});g.when("A","comparison-table-weblab-trigger").execute(function(a,b){b=b.triggerWeblabWhenViewing(!1,"ppu-weblab-treatment","DP_COMPARISON_DISPLAY_PPU_312196");a.on("a:pageUpdate",b);b()});"use strict";g.when("A","vse-cp-utils","vse_ns_preLoaderHook","vse-cp-constants").register("vse-cp-product-videos-ingress-module",function(a,b,
d,c){function e(){try{var e=a.$("#"+c.POPOVER_CONTAINER_CSS_ID),f,k,n,q,A=!1,r=!1,x=!0;if(e.length){var v=e.attr(c.DATA_PAGE_STATE_ATTRIBUTE);if(v){var l=JSON.parse(atob(v));if(l.videoDataList&&l.videoDataList.length){var B=l.isMobile,z=a.$(B?c.HLCX_TABLE_MOBILE_SELECTOR:c.HLCX_TABLE_DESKTOP_SELECTOR),C=B?c.MOBILE_DATA_ASIN_SELECTOR:c.DESKTOP_DATA_ASIN_SELECTOR,t=b.getTableBaseAsin(z,C);t||(t=l.baseAsin);if(h!==t&&t){h=t;var w=b.createIngressVideoList(l.videoDataList),D=a.$(z).find(c.IMG_WITH_VIDEO_CSS_SELECTOR);
b.showPlayIcon();z.undelegate(c.IMG_WITH_VIDEO_CSS_SELECTOR,"click");z.delegate(c.IMG_WITH_VIDEO_CSS_SELECTOR,"click",function(d){var e=a.$(d.currentTarget).closest(c.DATA_ASIN_CSS_SELECTOR);if(e.length){var g=b.getModalFactory();a.objectIsEmpty(g)?b.handleFallback(c.CANNOT_CREATE_FACTORY_METRIC):(n=g.get(a.$("#"+l.popoverTriggerId)),a.objectIsEmpty(n)?b.handleFallback(c.CANNOT_FIND_LIGHTBOX_METRIC):(f&&(k=f),(f=b.findVideoByProductAsin(w,e.attr(c.DATA_ASIN_ATTRIBUTE)))?(a.trigger(l.clientPrefix+
":vseWidgetThumbnailClick",f.productAsin),d.preventDefault(),d.stopPropagation(),n.show()):b.handleFallback(c.CANNOT_FIND_VIDEO_METRIC)))}else b.handleFallback(c.CANNOT_FIND_CLICKED_ASIN_METRIC)});a.on("a:popover:afterShow:"+l.popoverName,function(d){A=!0;if(x){var e=a.$(d.popover.$popover).find(c.DATA_CSS_CLASS_SELECTOR);e.length&&a.$(d.popover.$popover).addClass(e.attr(c.DATA_CSS_CLASS_ATTRIBUTE));x=!1;q=f.productAsin}else q=f.contentId!==k.contentId?f.productAsin:u;r&&b.openLightbox(l.clientPrefix,
f,q)});a.on("a:popover:beforeHide:"+l.popoverName,function(){A=!1;r&&a.trigger("vse:"+l.clientPrefix+":page:lightBoxClosed")});d.get(a,"#"+l.popoverName+"-block",{clientPrefix:l.clientPrefix,device:l.isMobile?c.MOBILE_DEVICE_TYPE:c.DESKTOP_DEVICE_TYPE,page:l.page,placement:l.placement,product:{contentID:w[0].productAsin,contentIDType:"ASIN"},requester:l.requester,video:{contentID:w[0].contentId,contentIDType:"VIDEO_ID",imageURL:w[0].imageUrl,videoURL:w[0].videoUrl}},function(){a.on(l.clientPrefix+
":vse:player:registered",function(){e.find("."+l.popoverName+"-spinner").addClass("aok-hidden")});g.when("VSEComponentAssets").execute("vse-cp-widget-preload-success",function(){r=!0;0<D.length&&a.trigger(l.clientPrefix+":vseWidgetThumbnailRender");A&&b.openLightbox(l.clientPrefix,f,q)})},function(){r=!1;A&&n.hide();b.handleFallback(c.PRELOAD_AJAX_FAILED_METRIC)});var E=[],v=function(){a.onScreen(z)&&a.each(D,function(b){a.onScreen(a.$(b))&&(b=a.$(b).closest(C).data(c.ASIN_ATTRIBUTE),E.includes(b)||
(a.trigger(l.clientPrefix+":vseWidgetThumbnailImpression",b),E.push(b)))})};a.off(a.constants.BROWSER_EVENTS.SCROLL,v);a.off(a.constants.BROWSER_EVENTS.RESIZE,v);a.on(a.constants.BROWSER_EVENTS.SCROLL,v);a.on(a.constants.BROWSER_EVENTS.RESIZE,v);a.off(l.clientPrefix+":vse:sushiMetrics");a.on(l.clientPrefix+":vse:sushiMetrics",function(d){a.off(l.clientPrefix+":vseWidgetThumbnailRender");a.off(l.clientPrefix+":vseWidgetThumbnailClick");a.off(l.clientPrefix+":vseWidgetThumbnailImpression");a.on(l.clientPrefix+
":vseWidgetThumbnailRender",function(){var a=d.buildSushiPayload({eventName:c.SUSHI_EVENT_NAME_PREFIX+c.THUMBNAIL_RENDER_METRIC,stringPayload:c.EMPTY_STRING,intPayload:1,pageAsin:t,videoAsinList:b.getVideoAsinList(w)});d.postMetric.emitSushiMetric(a,d.endpoint)});a.on(l.clientPrefix+":vseWidgetThumbnailClick",function(a){a=d.buildSushiPayload({eventName:c.SUSHI_EVENT_NAME_PREFIX+c.THUMBNAIL_CLICK_METRIC,stringPayload:c.EMPTY_STRING,intPayload:1,productAsin:a,pageAsin:t});d.postMetric.emitSushiMetric(a,
d.endpoint)});a.on(l.clientPrefix+":vseWidgetThumbnailImpression",function(a){a=d.buildSushiPayload({eventName:c.SUSHI_EVENT_NAME_PREFIX+c.THUMBNAIL_IMPRESSION_METRIC,stringPayload:c.EMPTY_STRING,intPayload:1,productAsin:a,pageAsin:t});d.postMetric.emitSushiMetric(a,d.endpoint)})})}}else b.handleFallback(c.NO_VIDEO_DATA_METRIC)}else b.handleFallback(c.NO_PAGE_STATE_METRIC)}else b.handleFallback(c.NO_POPOVER_METRIC)}catch(F){b.handleFallback(c.COMPONENT_EXCEPTION_METRIC),b.logError("ERROR","vse-comparison-video-ingress",
c.COMPONENT_EXCEPTION_METRIC,F)}}function f(){var b=a.$(c.HLCX_TABLE_DESKTOP_SELECTOR);b.length?a.onScreen(b,250)&&!k&&(k=!0,e(),a.off(a.constants.BROWSER_EVENTS.SCROLL,f)):(h="",a.off(a.constants.BROWSER_EVENTS.SCROLL,f))}var h,k=!1;a.on(a.constants.BROWSER_EVENTS.SCROLL,f);f();a.on("a:pageUpdate",function(){a.on(a.constants.BROWSER_EVENTS.SCROLL,f);k=!1;f()})});"use strict";g.when("A").register("vse-cp-constants",function(){return{COMPONENT_EXCEPTION_METRIC:"componentException",ASIN_ATTRIBUTE:"asin",
DATA_ASIN_ATTRIBUTE:"data-asin",DATA_ASIN_CSS_SELECTOR:"[data-asin]",DATA_PAGE_STATE_ATTRIBUTE:"data-page-state",DATA_CSS_CLASS_ATTRIBUTE:"data-css-class",DATA_CSS_CLASS_SELECTOR:"[data-css-class]",DESKTOP_DEVICE_TYPE:"Desktop",HLCX_TABLE_DESKTOP_SELECTOR:"#HLCXComparisonTable",HLCX_TABLE_MOBILE_SELECTOR:"#hlcx_cmp_table",DESKTOP_DATA_ASIN_SELECTOR:".comparison_image_title_cell",MOBILE_DATA_ASIN_SELECTOR:".hlcx-cmp-title-col",IMG_WITH_VIDEO_CSS_CLASS:"comparison_image_with_video",IMG_WITH_VIDEO_CSS_SELECTOR:".comparison_image_with_video",
CANNOT_FIND_CLICKED_ASIN_METRIC:"cannotFindClickedAsin",CANNOT_FIND_VIDEO_METRIC:"cannotFindVideo",CANNOT_FIND_LIGHTBOX_METRIC:"cannotFindLightbox",CANNOT_CREATE_FACTORY_METRIC:"cannotCreateModalFactory",MOBILE_DEVICE_TYPE:"Mobile",NO_PAGE_STATE_METRIC:"noPageStatePresented",NO_POPOVER_METRIC:"noPopoverPresented",NO_VIDEO_DATA_METRIC:"noVideoDataPresented",POPOVER_CONTAINER_CSS_ID:"vse-cmp-widget-popover-container",PRELOAD_AJAX_FAILED_METRIC:"preloadAjaxFailed",THUMBNAIL_RENDER_METRIC:"thumbnail:render",
THUMBNAIL_CLICK_METRIC:"thumbnail:click",THUMBNAIL_IMPRESSION_METRIC:"thumbnail:impression",SHOW_PLAY_ICON_CSS_CLASS:"show_play_icon",VSE_CSM_METRIC_PREFIX:"vse:csm:cmp:",SUSHI_EVENT_NAME_PREFIX:"vse-cmp-",EMPTY_STRING:""}});g.when("A","vse-cp-constants").register("vse-cp-utils",function(a,b){function d(a){var b=[];a&&Array.isArray(a)&&a.forEach(function(a){b.push({locale:a.languageCode,url:a.url})});return b}return{createIngressVideoList:function(a){var b=[];a.forEach(function(a){b.push({closedCaptions:d(a.closedCaptions),
contentId:a.contentId,imageUrl:a.imageUrl,index:0,productAsin:a.productAsin,relatedProducts:a.productAsin,title:a.videoTitle,vendorCode:a.vendorCode,vendorName:a.creatorName?a.creatorName:a.vendorName,videoUrl:a.videoUrl})});return b},getModalFactory:function(){var b=null;a.capabilities.mobile?g.now("a-secondary-view").execute("vse-cp-secondary-view-factory",function(a){b=a}):g.now("a-modal").execute("vse-cp-modal-factory",function(a){b=a});return b},findVideoByProductAsin:function(a,b){return a.filter(function(a){return a.productAsin===
b})[0]},getTableBaseAsin:function(a,d){return a.find(d).first().data(b.ASIN_ATTRIBUTE)},handleFallback:function(c){a.$(b.IMG_WITH_VIDEO_CSS_SELECTOR).removeClass(b.IMG_WITH_VIDEO_CSS_CLASS);k.ue&&k.ue.count(b.VSE_CSM_METRIC_PREFIX+c)},logError:function(a,b,d,g){k.ueLogError&&k.ueLogError(g,{logLevel:a,attribution:b,message:d})},openLightbox:function(c,d,f){a.trigger("vse:"+c+":page:lightBoxOpened",{assetSpec:d,lightBoxId:b.POPOVER_CONTAINER_CSS_ID,lazyLoadProductAsin:f})},showPlayIcon:function(){a.$(b.IMG_WITH_VIDEO_CSS_SELECTOR).addClass(b.SHOW_PLAY_ICON_CSS_CLASS)},
getVideoAsinList:function(a){return a.map(function(a){return a.contentId}).join(",")}}})});
/* ******** */
(function(l){var p=window.AmazonUIPageJS||window.P,q=p._namespace||p.attributeErrors,r=q?q("DetailPageWarrantyAssets",""):p;r.guardFatal?r.guardFatal(l)(r,window):r.execute(function(){l(r,window)})})(function(l,p,q){"use strict";var r;r=function(){};"use strict";l.when("A").register("wty:Reftag",function(d){function h(b){this.prefix=b}h.prototype.log=function(b,g,f){b=f?[this.prefix,b,g,f]:[this.prefix,b,g];r("Reftag.log: "+b);b=b.join("_");d.get("/gp/product/ajax-handlers/reftag.html/ref\x3d"+b)};
return h});"use strict";l.when("A","BaseLinkFormHelper","wty:natc-constants","wty:natcFormHelper").register("wty:detailPage",function(d,h,b,g){function f(){}f.prototype.bindQuantityChange=function(a){var b=function(){a(d.$(this).val())};a(d.$("#quantity").val());d.$("#quantity").bind("change",b);return b};f.prototype.unbindQuantityChange=function(a){d.$("#quantity").unbind("change",a)};f.prototype.bindBuyBoxAccordion=function(a){d.on("a:accordion:buybox-accordion:select",a);d.on("a:accordion:installment-payment-buybox-accordion:select",
a);return a};f.prototype.unbindBuyBoxAccordion=function(a){d.off("a:accordion:buybox-accordion:select",a);d.off("a:accordion:installment-payment-buybox-accordion:select",a)};f.prototype.findQuantityInput=function(a){return a.find("input[name^\x3dquantity]")};f.prototype.findOfferListingIdInput=function(a){return a.find("input[name^\x3dofferingID]")};f.prototype.handleBaselink=function(a){if(d.$("#mbb__bl").length){var b=d.$(a._checkbox[0].form);b&&(a.isChecked()?(a=a.getKvpIndex(),h.addBaseLinkFields(a,
b)):h.removeBaseLinkFields(b))}};f.prototype.handleATC=function(a){var k=d.$(a._checkbox[0].form);k&&(g.clearParams(k,b.PARAMETERS.ATC),a.isChecked()&&g.addAtcParams(a._warrantyAsin,a._offerListingIdSelection.val(),a._quantity.val(),k))};return new f});"use strict";l.when("wty:Reftag","wty-nexus-constants").register("wty:MbbTypes",function(d,h){var b={mbb__tsn:{cssClass:"mbb__tsn",reftag:new d("psd_bb"),hasQuantity:!0,deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP},mbb__ti:{cssClass:"mbb__ti",reftag:new d("psd_ib"),
hasQuantity:!0,deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP},mbb__tld:{cssClass:"mbb__tld",reftag:new d("psd_ld"),deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP}};return{getType:function(g){return b[g]}}});"use strict";l.when("A","a-modal").register("wty:mbbModalHelper",function(d,h){function b(){}b.prototype.create=function(b,f,a,k){if(k){var e=d.$("#a-popover-"+f),c=e.clone(!0).prop("id","a-popover-"+f+"-Opened");e.parent().append(c)}h.create(b,{name:k?f+"-Opened":f,header:a,width:750})};b.prototype.remove=
function(b,d){h.remove(d?b+"-Opened":b)};b.prototype.hide=function(b,d){(b=h.get(d?b+"-Opened":b))&&b.hide()};return new b});"use strict";l.when("A","wty:Reftag","wty:MbbItem","wty-nexus-logger").register("wty:Mbb",function(d,h,b,g){function f(a,k,e){this._type=e;this._deviceType=e.deviceType;this._reftag=e.reftag;this._baseFormIndex=a;this._pageData=k;this._baseItemAsin=k.bi.a;this._mbbFeature=d.$(".mbb__bb."+e.cssClass);this._modalHeader=this._mbbFeature.find(".mbb__mh").html();this._items=[];g.initialize(g.nexusConstants.FEATURE_NAME_CONSTANTS.MBB,
this._pageData);this._nexusLogger=g;var c=this;this._mbbFeature.find(".mbb__r").each(function(a){var e=d.$(this),e=new b(c,e,a);c._items[a]=e})}f.prototype._destroy=function(){for(var a=0,b=this._items.length;a<b;a++)this._items[a]._destroy()};f.prototype._setQuantity=function(a){for(var b=0,e=this._items.length;b<e;b++)this._items[b]._setQuantity(a)};f.prototype._setChecked=function(a,b){for(var e=0,c=this._items.length;e<c;e++)this._items[e]._setChecked(b&&e===a)};f.prototype.getCheckedItem=function(){for(var a=
0,b=this._items.length;a<b;a++){var e=this._items[a];if(e.isChecked())return e}};f.prototype.getItems=function(){return this._items};return f});l.when("A","cc-manager","warranty-options-constants","warranty-card-utils","warranty-options-csm").register("cc-warranty-options",function(d,h,b,g,f){function a(a){h.ccSelectionsClear(k,a)}var k=b.featureRegistration.featureName;return{updateWarrantyOptionSelection:function(b){if(!b)return console.log("Item data missing for selection update!"),!1;var c="LumpSum";
b.isMonthlySubscription&&(c="Monthly");f.increment("Swatch:Warranty:"+c+":Click");a();b=g.createCcDataFromWarrantySelectionData(b);return h.ccSelectionUpdate(k,b)},clearOptionSelection:a}});"use strict";l.when("A","cc-manager","warranty-options-constants","warranty-card-utils","warranty-options-csm").register("warranty-options-registration",function(d,h,b,g,f){var a=b.featureRegistration.featureName,k=b.supportedBuyingOptions,e=b.selector,c=b.styles,m=!1,n=d.$,l={init:g.init,cardCollapse:g.cardCollapse,
validateInputParams:g.validateInputParams};d.on("a:accordion:buybox-accordion:select",function(b){if(0<n(e.expanderContainer).length){b=b.selectedRow.$row.index();var f;f=-1;var l=n("div[id$\x3d'installmentPaymentAccordionRow']");l.length&&(f=l.data("buyingOptionIndex"));(l=n(e.expanderData).data("toggle-warranty-twister-expander").baseBuyingOptionsList)&&0<l.length&&(0<=f&&!l.includes("INSTALLMENTS")&&l.splice(f,0,"INSTALLMENTS"),k.includes(l[b])?(n(e.expanderIcon).removeClass(c.hidden),h.ccRemovedSelectionsClear(a),
m&&d.trigger("warranty-twister-card:reset-subtitle"),m=!1):(m=!0,g.isWarrantyOptionSelected()&&g.ccRemovedSelectionUpdate(h),d.trigger("a:declarative:warranty-twister-default-action:click"),d.trigger("warranty-twister-card:card-collapse"),n(e.expanderIcon).addClass(c.hidden),n(e.warrantyIcon).addClass(c.hidden)))}});d.on("warranty-twister-card:expanded",function(){h.cardExpanded(a)});f.initializeInteractionMetrics();(function(){n(e.warrantyOption).each(function(c){var a=g.getWarrantyDataFromOption(n(this));
f.logImpressionToNexus(a,c)})})();h.registerFeature(b.featureRegistration,l)});"use strict";l.when("A").register("warranty-options-constants",function(d){return{featureRegistration:{featureName:"warrantyTwisterPlus",featureAttribution:"Retail/AppleCare/(de)activation",updateQtyAsBaseItem:1},selector:{expanderContainer:".warranty-twister-container",skeletonLoader:".warranty-twister-skeleton-loader",checkmark:".warranty-twister-selected-checkmark",subtitle:".warranty-twister-subtitle",subtitleText:"#warranty-twister-subtitle",
priceSubtitle:".warranty-twister-price-subtitle",priceSubtitleText:"#warranty-twister-price-subtitle",cardImage:".warranty-twister-selected-card-image",expanderIcon:".warranty-twister-expander-icon",learnMoreLink:"#learn-more-link",toggleButton:"#warranty-twister-toggle-button",expanderContent:".warranty-twister-expander-content",expanderData:"[data-toggle-warranty-twister-expander]",swatch:".warranty-twister-swatch",warrantyOption:".warranty-twister-box-group-warranty-option",selectedWarrantyOption:".warranty-twister-selected-box-group.warranty-twister-box-group-warranty-option",
warrantyOptionTitle:".warranty-twister-warranty-option-title",defaultOption:"#default-option-swatch",warrantyDefaultBoxGroup:".warranty-twister-box-group-default-option",swatchBoxGroup:".warranty-twister-box-group",swatchHeading:".warranty-twister-box-group-heading",swatchBoxGroupDetail:".warranty-twister-box-group-detail",swatchBoxGroupDetailNoHeader:".warranty-twister-box-group-detail-no-header",popoverButtonRow:"#attach-warranty-popover-buttons-row",warrantyTwisterSecondaryView:"#a-popover-warrantyTwisterPlusSecondaryView",
buyingOptionSuppressionMessage:"#buyingOptionSuppressionMessage",warrantyIcon:"#warranty-icon",monthlyCheckbox:".warranties-monthly-checkbox",monthlyWarning:"#MonthlyWarrantyWarning",warrantyListItem:".warranty-twister-list-item",multiCardExperimentData:"wireless-multi-card",multiCardExperimentElement:"[data-wireless-multi-card]",activeTPlusCards:"#twister-plus-active-cards"},styles:{twisterPlusFadeIn:"twister-plus-cc-card-fadeIn",warrantyTwisterExpand:"warranty-twister-expander-content-expand",skeletonLoaderExpand:"warranty-twister-skeleton-loader-expand",
selectedHeading:"warranty-twister-selected-heading",selectedBoxGroup:"warranty-twister-selected-box-group",unselectedHeading:"warranty-twister-unselected-heading",disabledCard:"disabled-card",disabledOption:"disabled-option",hidden:"aok-hidden"},animationTimeoutUnit:200,metricPrefix:"warranty-options",supportedBuyingOptions:"NEW B2B_NEW BUNDLE RENEWED_TIER_1 RENEWED_TIER_2 RENEWED_TIER_3 RENEWED_TIER_4".split(" ")}});"use strict";l.when("A").register("warranty-options-weblab-vars",function(d){return{isAutoExpandEnabled:!1}});
"use strict";l.when("A","warranty-options-constants","warranty-devicetype-variants","wty-nexus-logger","warranty-card-utils").register("warranty-options-csm",function(d,h,b,g,f){function a(c,a){"undefined"!==typeof l&&"undefined"!==typeof l.count&&c&&l.count(c,(l.count(c)||0)+a);"undefined"!==typeof p.csa&&p.csa("Events",{producerId:"dp-rpcx"})("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:c,valueToLog:a},{ent:"all"})}function k(c){a(c,1)}function e(c){if(c)this.timerName=c,this.startTime=
0;else throw Error("timerName must be non empty string");}function c(c,a,e){c||(c=Object.assign({},f.getSelectedCardData()),c.warrantyAsin=q.NON_WARRANTY_ACTION_ASIN_PLACEHOLDER);c={baseItemAsin:c.baseAsin,warrantyAsin:c.warrantyAsin,customerId:c["warranty-customerID"]||f.getSelectedCardData()["warranty-customerID"],deviceType:b.attributesForDeviceType.deviceType,warrantyDisplayPosition:a+1,feature:q.TWISTER_PLUS_FEATURE_NAME,action:e};g.logWarrantyWidgetInteraction(c)}function m(){n(t.warrantyOption).each(function(a){d.on("a:popover:beforeShow:warrantyTwisterPlusSecondaryView-"+
a,function(){var b=n(t.warrantyOption).get(a);c(b,a,q.LEARN_MORE_CLICK_METRIC_NAME)})})}var n=d.$,l=p.ue,t=h.selector;h=h.featureRegistration.featureName;var u={ccExpanded:"twisterPlus.ccExpanded."+h,ccExpandedTime:"twisterPlus.ccExpandedTime."+h,ccScroll:"twisterPlus.ccScroll."+h,ccLearnMore:"twisterPlus.ccLearnMore."+h,ccItemCounts:"twisterPlus.ccItemsCount."+h,ccItemsSelectCount:"twisterPlus.ccItemsSelectCount."+h,defaultOptionSelectCount:"twisterPlus.defaultSelectCount."+h,ccSVLoadingtime:"twisterPlus.ccSVLoadingtime."+
h},q={TWISTER_PLUS_FEATURE_NAME:"TWISTER_PLUS",NON_WARRANTY_OPTION_INDEX:-1,NON_WARRANTY_ACTION_ASIN_PLACEHOLDER:"NONE",COLLAPSE_CARD_METRIC_NAME:"CARD_COLLAPSE",EXPAND_CARD_METRIC_NAME:"CARD_EXPAND",LEARN_MORE_CLICK_METRIC_NAME:"LEARN_MORE_CLICK"};e.prototype={isStarted:!1,start:function(){this.isStarted=!0;this.startTime=Date.now()},stop:function(){this.startTime&&a(this.timerName,Date.now()-this.startTime)}};var r=new e(u.ccSVLoadingtime);d.declarative("a-secondary-view","click",function(){k(u.ccLearnMore);
r.start()});d.on("a:popover:afterShow",function(){r.stop()});return{increment:k,incrementWithValue:a,initializeInteractionMetrics:function(){m();var c=n(t.warrantyOption).length;c&&a(u.ccItemCounts,c)},logImpressionToNexus:function(c,a){g.logWarrantyImpression({baseItemAsin:c.baseAsin,warrantyAsin:c.warrantyAsin,customerId:c["warranty-customerID"],deviceType:b.attributesForDeviceType.deviceType,warrantyDisplayPosition:a+1,feature:q.TWISTER_PLUS_FEATURE_NAME})},logInteractionToNexus:c,Timer:e,MetricNames:u,
InternalMetricConstants:q}});l.when("A","warranty-options-constants").register("warranty-card-utils",function(d,h){function b(c){var b=c.warrantyQuantity;if(b===q||1>b)b=1;var e="Protection Plans";a(k.subtitleText).length&&(e=a(k.subtitleText).text());var d=parseFloat(c.warrantyPriceAmount);return{itemType:"Warranty",asin:c.warrantyAsin,price:d,quantity:b,offerListingId:c.warrantyOffer,selectionType:c.selectionType,orderSummaryDisplayString:e,shortDisplayTitle:c.warrantyShortTitle,enableIA:!0,IAData:{parentAsin:c.baseAsin,
type:"AmazonProtect",renderType:"renderAll",constraintList:[{type:"DELETE",mutuallyInclusive:!1}]}}}function g(){var c=a("[data-warranty-option-swatch-select]").data("warranty-option-swatch-select");0<a(k.selectedWarrantyOption).length&&(c=f(a(k.selectedWarrantyOption)));return c}function f(c){var b=a(c).parent().data("warranty-option-swatch-select");b||(c=a(c).children(".a-declarative")[0],b=a(c).data("warranty-option-swatch-select"));return b}var a=d.$,k=h.selector,e=h.featureRegistration.featureName;
return{cardCollapse:function(){d.trigger("warranty-twister-card:card-collapse")},cardExpand:function(){d.trigger("warranty-twister-card:card-expand")},ccRemovedSelectionUpdate:function(c){var a=g(),a=b(a);c.ccRemovedSelectionUpdate(e,a)},createCcDataFromWarrantySelectionData:b,getSelectedCardData:g,getWarrantyDataFromOption:f,init:function(c){},isBuyingOptionUnsupported:function(c,a){return!h.supportedBuyingOptions.includes(a)},isWarrantyOptionSelected:function(){return 0<a(k.selectedWarrantyOption).length},
validateInputParams:function(c){return"number"===typeof c.price}}});"use strict";l.when("A","wty-nexus-constants").register("warranty-devicetype-variants",function(d,h){return{attributesForDeviceType:{deviceType:h.DEVICE_TYPE_CONSTANTS.DESKTOP}}});"use strict";l.when("A","warranty-twister-expander-state","warranty-options-constants","warranty-twister-swatch-actions","warranty-options-csm").register("warranty-twister-expander-actions",function(d,h,b,g,f){function a(){var a=c(m.expanderContainer),b=
a.offset().top+a.outerHeight();if(c(p).scrollTop()+c(p).height()<b){var b=a.offset().top,e=c(p).height(),a=a.height(),a=b-(e-a)/2;c("html, body").animate({scrollTop:a},h.animationTimeoutUnit)}}function k(a){a=a?l.expandedPriceSubtitle:l.loadingSubtitle;c(m.priceSubtitleText).text(a)}function e(){c(m.expanderIcon).hasClass(n.hidden)?c(m.priceSubtitleText).text(c(m.buyingOptionSuppressionMessage).text()):c(m.priceSubtitleText).text(l.collapsedPriceSubtitle)}var c=d.$,m=b.selector,n=b.styles,l=h.expanderSubtitle,
t=new f.Timer(f.MetricNames.ccExpandedTime);return{initSubtitle:function(a){l.collapsedSubtitle=a.data.defaultSubtitle;l.expandedSubtitle=a.data.expandedSubtitle;l.collapsedPriceSubtitle=a.data.defaultPriceSubtitle;l.expandedPriceSubtitle=a.data.expandedPriceSubtitle},expandWarrantyOptions:function(e){f.increment(f.MetricNames.ccExpanded);f.logInteractionToNexus(null,f.InternalMetricConstants.NON_WARRANTY_OPTION_INDEX,f.InternalMetricConstants.EXPAND_CARD_METRIC_NAME);t.start();c(m.expanderContent).addClass(n.warrantyTwisterExpand);
c(m.subtitleText).text(l.expandedSubtitle);c(m.expanderIcon).addClass("rotate");d.delay(function(){c(m.swatch).addClass(n.twisterPlusFadeIn);c(m.warrantyIcon).removeClass(n.hidden);k(e);a()},b.animationTimeoutUnit)},expandSkeletonLoader:function(){c(m.expanderContent).addClass(n.skeletonLoaderExpand);c(m.expanderIcon).addClass("rotate");d.delay(function(){c(m.skeletonLoader).addClass(n.twisterPlusFadeIn);k(!1);a()},b.animationTimeoutUnit)},hideLoaderAnimation:function(e){e&&c(m.skeletonLoader).removeClass(n.twisterPlusFadeIn);
d.delay(function(){c(m.skeletonLoader).hide();c(m.swatch).removeClass("invisible");e&&(c(m.expanderContent).addClass(n.warrantyTwisterExpand),d.delay(function(){c(m.swatch).addClass(n.twisterPlusFadeIn);k(!0);a()},b.animationTimeoutUnit))},b.animationTimeoutUnit)},collapseWarrantyOptions:function(a){t.stop();f.logInteractionToNexus(null,f.InternalMetricConstants.NON_WARRANTY_OPTION_INDEX,f.InternalMetricConstants.COLLAPSE_CARD_METRIC_NAME);c(m.swatch).removeClass(n.twisterPlusFadeIn);a||c(m.skeletonLoader).removeClass(n.twisterPlusFadeIn);
c(m.expanderIcon).removeClass("rotate");c(m.subtitleText).text(l.collapsedSubtitle);d.delay(function(){c(m.expanderContent).removeClass(n.warrantyTwisterExpand);c(m.expanderContent).removeClass(n.skeletonLoaderExpand);e();c(m.selectedWarrantyOption).length||c(m.warrantyIcon).addClass(n.hidden)},b.animationTimeoutUnit)},showPriceSubtitleInCollapsedView:e}});"use strict";l.when("A","warranty-twister-expander-actions","warranty-twister-expander-state","warranty-options-weblab-vars","warranty-options-constants").execute(function(d,
h,b,g,f){function a(){var a=e(n.expanderData).data("toggle-warranty-twister-expander");!1!==c&&a.isExpand?(c=!1,a.isExpand=!1,h.collapseWarrantyOptions(m)):h.showPriceSubtitleInCollapsedView()}function k(b){if(c===q||null===c||null===b.data.isExpand||b.data.isExpand===q){if(null===b.data.isExpand||b.data.isExpand===q)e(n.expanderData).data("toggle-warranty-twister-expander").isExpand=!1,b.data.isExpand=!1;h.initSubtitle(b);m&&h.hideLoaderAnimation(b.data.isExpand)}c=b.data.isExpand;!0===c?a():!1===
c&&(c=!0,m?h.expandWarrantyOptions(m):h.expandSkeletonLoader(),d.trigger("warranty-twister-card:expanded"));e(n.expanderData).data("toggle-warranty-twister-expander").isExpand=c}var e=d.$,c,m=b.isLoaded,n=f.selector,p=f.styles;l.when("cc-warranty-options").execute(function(){m=!0;h.hideLoaderAnimation(c);c&&d.trigger("warranty-twister-card:expanded")});d.on("PageRefresh:ATF",function(){var a=e(n.expanderData).data("toggle-warranty-twister-expander");a&&(h.initSubtitle({data:a}),m&&h.hideLoaderAnimation(!1))});
d.declarative("toggle-warranty-twister-expander","click",function(a){e(n.expanderIcon).hasClass(p.hidden)||k(a)});d.on("warranty-twister-card:card-collapse",function(){console.log("Collapse trigger received for warranty card!");a()});d.on("warranty-twister-card:reset-subtitle",function(){h.showPriceSubtitleInCollapsedView()});g.isAutoExpandEnabled&&(b=e(n.expanderData).data("toggle-warranty-twister-expander"))&&k({data:b})});"use strict";l.when("A").register("warranty-twister-expander-state",function(d){return{expanderSubtitle:{collapsedSubtitle:"",
expandedSubtitle:"",collapsedPriceSubtitle:"",expandedPriceSubtitle:"",loadingSubtitle:"Loading options..."},get isLoaded(){return this.property},set isLoaded(d){this.property=d}}});"use strict";l.when("A","warranty-twister-expander-state","warranty-options-constants").register("warranty-twister-swatch-actions",function(d,h,b){var g=d.$,f=b.selector,a=b.styles,k=h.expanderSubtitle;return{updateSwatchStyle:function(b){g(f.swatchBoxGroup).removeClass(a.selectedBoxGroup);g(f.swatchHeading).removeClass(a.selectedHeading);
g(f.swatchHeading).addClass(a.unselectedHeading);var c=b.find(f.swatchHeading),d=b.find(f.swatchBoxGroup);1>d.length&&(d=b.parent(f.swatchBoxGroup));b=d;c.removeClass(a.unselectedHeading);c.addClass(a.selectedHeading);b.addClass(a.selectedBoxGroup)},updateDefaultOptionPriceSubtitle:function(a,c){k.collapsedPriceSubtitle=a;k.expandedPriceSubtitle=c;g(f.priceSubtitleText).text(c);g(f.priceSubtitle).removeClass("a-color-success");g(f.priceSubtitle).addClass("a-color-tertiary");g(f.checkmark).addClass("a-hidden")},
updateWarrantyOptionPriceSubtitle:function(a,c){k.collapsedPriceSubtitle=a;k.expandedPriceSubtitle=a;g(f.priceSubtitleText).text(a);g(f.priceSubtitle).removeClass("a-color-tertiary");g(f.priceSubtitle).addClass("a-color-success");g(f.checkmark).removeClass("a-hidden");g(f.cardImage).attr("src",c)}}});"use strict";l.when("A","warranty-twister-swatch-actions","warranty-card-utils","warranty-options-constants").execute(function(d,h,b,g){function f(c){1>e(a.expanderContainer).length||1>e(a.monthlyCheckbox).length||
(1<Number(e(c.target).val())?(e(a.monthlyCheckbox).addClass(k.disabledOption),e(a.monthlyWarning).removeClass(k.hidden),(c=b.getSelectedCardData())&&c.isMonthlySubscription&&d.trigger("a:declarative:warranty-twister-default-action:click")):(e(a.monthlyCheckbox).removeClass(k.disabledOption),e(a.monthlyWarning).addClass(k.hidden)))}var a=g.selector,k=g.styles,e=d.$;d.declarative("warranty-twister-default-action","click",function(){d.trigger("a:declarative:select-default-option:click");var a=d.$("[data-warranty-twister-default-action]");
if(a!==q&&null!==a){var b=a.data("warranty-twister-default-action");h.updateSwatchStyle(a);h.updateDefaultOptionPriceSubtitle(b.defaultPriceSubtitle,b.expandedPriceSubtitle)}});d.declarative("warranty-option-swatch-select","click",function(c){var b=e(c.$currentTarget);if(b!==q&&null!==b){var g=b.children(a.warrantyOption)[0];g===q&&(g=b.parent(a.warrantyOption)[0]);e(g).hasClass(k.disabledOption)||(d.trigger("a:declarative:select-warranty-option:click",c),h.updateSwatchStyle(b),h.updateWarrantyOptionPriceSubtitle("+"+
c.data.warrantyPrice+" "+c.data.warrantyOptionPriceSubtitle,c.data.cardImageUrl))}});e(document).delegate("#mobileQuantityDropDown","change",function(a){f(a)});e(document).delegate("#quantity","change",function(a){f(a)})});"use strict";l.when("A","cc-warranty-options","warranty-options-csm").register("warranty-twister-actions",function(d,h,b){d.declarative("select-warranty-option","click",function(g){g=g.data;g.selectionType="add";g.warrantyQuantity=d.$("#quantity").val();b.increment(b.MetricNames.ccItemsSelectCount);
b.logInteractionToNexus({baseAsin:d.$("#twister-plus-asin").val(),warrantyAsin:g.warrantyAsin,customerId:g["warranty-customerID"]},g.formIndex,"wtyOptionSelect");h.updateWarrantyOptionSelection(g)});d.declarative("select-learn-more","click",function(g){b.increment(b.MetricNames.ccLearnMore);g.$event.preventDefault();g.$event.stopImmediatePropagation();d.trigger("a:declarative:side-sheet:click",g)});d.declarative("select-default-option","click",function(g){b.increment(b.MetricNames.defaultOptionSelectCount);
g=g&&g.isUserClick;b.logInteractionToNexus({baseAsin:d.$("#twister-plus-asin").val(),warrantyAsin:b.InternalMetricConstants.NON_WARRANTY_ACTION_ASIN_PLACEHOLDER},b.InternalMetricConstants.NON_WARRANTY_OPTION_INDEX,"noThanksSelect");h.clearOptionSelection(g)})});"use strict";l.when("A","wty:mbbModalHelper","wty:detailPage","a-checkbox","a-popover").register("wty:MbbItem",function(d,h,b,g,f){function a(a){a.stopPropagation();a.preventDefault()}function k(a,e,d){this._mbb=a;this._warrantyAsin=a._pageData.w[d].a;
this._isSubscription=!!a._pageData.w[d].sub;this._index=d;this._row=e;this._quantity=b.findQuantityInput(e);this._offerListingIdSelection=b.findOfferListingIdInput(e);this._checkbox=e.find("input[type\x3dcheckbox]");this._shortTitle=this._row.find(".mbb__st");this._modal=a._mbbFeature.find(".mbb__m:eq("+d+")");this._modalYes=this._modal.find(".mbb__yes");this._modalNo=this._modal.find(".mbb__no");this._modalName="MbbModal-"+this._mbb._type.cssClass+this._index;var g=this;this._onShortTitle=function(){g._logReftag("st")};
this._setChecked(!1);this._logReftag("i");this._bind()}var e=d.$;k.prototype._bind=function(){this._bindQuantity();this._bindBuyBoxAccordion();this._bindModalYes();this._bindModalNo();this._bindShortTitle();this._bindCheckbox()};k.prototype._destroy=function(){this._unbindQuantity();this._unbindBuyBoxAccordion();this._unbindModalYes();this._unbindModalNo();this._unbindShortTitle();this._unbindCheckbox()};k.prototype.getAsin=function(){return this._warrantyAsin};k.prototype.getFormIndex=function(){return this._index+
this._mbb._baseFormIndex};k.prototype.getKvpIndex=function(){return this.getFormIndex()+1};k.prototype.getOfferListingId=function(){return this._offerListingIdSelection};k.prototype.isChecked=function(){return this._checkbox.prop("checked")};k.prototype.getQuantity=function(){return this._quantity.val()};k.prototype._setChecked=function(a){this._checkbox.prop("checked",a)};k.prototype._setSubscriptionQuantityRestricted=function(a){f.remove(this._shortTitle);a?(this._bindShortTitle(),g(this._checkbox).enable(),
this._row.removeClass("monthly-warranty-text-disabled"),e("#MonthlyWarrantyWarning").addClass("aok-hidden")):(g(this._checkbox).isChecked()&&e("#MonthlyWarrantyWarning").removeClass("aok-hidden"),this._unbindShortTitle(),g(this._checkbox).uncheck(),g(this._checkbox).disable(),this._row.addClass("monthly-warranty-text-disabled"),a={inlineContent:d.$("#popover-message").data("message"),position:"triggerLeft",closeButton:"false"},f.create(this._shortTitle,a))};k.prototype._setQuantity=function(a){this._quantity.val(a)};
k.prototype._logReftag=function(a){var b=this._mbb._nexusLogger.convertMBBObjectsToWarrantyDataNexusPayload(this._mbb,this);"i"===a?this._mbb._nexusLogger.logWarrantyImpression(b):(b.action=a,this._mbb._nexusLogger.logWarrantyWidgetInteraction(b))};k.prototype._bindModalYes=function(){var a=this;this._onModalYes=function(){a._logReftag("my");a._mbb._setChecked(a._index,!0);h.hide(a._modalName,a._isSubscription);b.handleBaselink(a);b.handleATC(a)};this._modalYes.bind("click",this._onModalYes)};k.prototype._unbindModalYes=
function(){this._modalYes.unbind("click",this._onModalYes)};k.prototype._bindModalNo=function(){var a=this;this._onModalNo=function(){a._logReftag("mn");a._mbb._setChecked(a._index,!1);h.hide(a._modalName,a._isSubscription);b.handleBaselink(a);b.handleATC(a)};this._modalNo.bind("click",this._onModalNo)};k.prototype._unbindModalNo=function(){this._modalNo.unbind("click",this._onModalNo)};k.prototype._bindShortTitle=function(){this._shortTitle.unbind("click",a);this._shortTitle.bind("click",this._onShortTitle);
h.create(this._shortTitle,this._modalName,this._mbb._modalHeader,this._isSubscription)};k.prototype._unbindShortTitle=function(){this._shortTitle.unbind("click",this._onShortTitle);this._shortTitle.bind("click",a);h.remove(this._modalName,this._isSubscription)};k.prototype._bindQuantity=function(){this._onQuantityChange=null;if(this._mbb._type.hasQuantity){var a=this;this._onQuantityChange=b.bindQuantityChange(function(b){a._setQuantity(b);if(a.isChecked()){var e=a._checkbox[0].form;e&&d.$(e).find("input[name\x3d'items[0.warranty][quantity]']").each(function(a,
c){c.value=b})}})}};k.prototype._unbindQuantity=function(){b.unbindQuantityChange(this._onQuantityChange)};k.prototype._bindCheckbox=function(){var a=this;this._onCheckboxChange=function(){var e=a.isChecked();a._mbb._setChecked(a._index,e);a._logReftag(e?"cy":"cn");b.handleBaselink(a);b.handleATC(a)};this._checkbox.bind("change",this._onCheckboxChange)};k.prototype._unbindCheckbox=function(){this._checkbox.bind("change",this._onCheckboxChange)};k.prototype._bindBuyBoxAccordion=function(){var a=this;
this._onBuyBoxAccordion=b.bindBuyBoxAccordion(function(){a._setChecked(!1);b.handleBaselink(a);b.handleATC(a)})};k.prototype._unbindBuyBoxAccordion=function(){b.unbindBuyBoxAccordion(this._onBuyBoxAccordion)};return k});"use strict";l.when("A","wty:MbbTypes","wty:Mbb").register("mbb",function(d,h,b){function g(){this._mbbs={}}var f=new g;d.on("mbb:loaded",function(a,g,e){var c=h.getType(e);if(c){var l=f._mbbs[e];l&&l._destroy();l=new b(a,g,c);f._mbbs[e]=l;d.trigger("mbb:ready",e)}});g.prototype.getMbb=
function(a){return this._mbbs[a]};return f});l.when("A","a-checkbox","a-popover","mbb").execute(function(d,h,b,g){function f(){var b=Number(a("#quantity").val());["mbb__tsn","mbb__ti"].forEach(function(a){var c=g.getMbb(a);if(c){a=1<b;for(var c=c.getItems(),d=0,f=c.length;d<f;d++){var h=c[d];h._isSubscription&&h._setSubscriptionQuantityRestricted(!a)}}})}var a=d.$;a(document).delegate("#quantity","change",function(){f()});a(document).delegate("a[id^\x3dmbbPopoverLink]","click",function(){if(a(this).parents(".warranties-monthly-checkbox").length&&
1<Number(a("#quantity").val()))return!1});f()});"use strict";l.when("A","wty-nexus-constants").register("wty-nexus-logger",function(d,h){var b={},g,f;b.nexusConstants=h;b.initialize=function(a,d){g=a;f=b.getDefaultPayload};b.convertMBBObjectsToWarrantyDataNexusPayload=function(a,b){return{deviceType:a._deviceType||null,baseItemAsin:a._baseItemAsin,baseItemCurrencySymbol:a._baseItemCurrencySymbol||null,baseItemBuyingPriceDecimal:a._baseItemBuyingPriceDecimal||null,warrantyAsin:b._warrantyAsin,warrantyCurrencySymbol:b._warrantyCurrencySymbol||
null,warrantyBuyingPriceDecimal:b._warrantyBuyingPriceDecimal||null,warrantyDisplayPosition:b._index+1}};b.populateCustomerIdIfNotPresent=function(a){if(a.customerId)return a;a.customerId=d.$("#warranty-customerID").val()||d.$("#attach-customerId").val()||null;return a};b.setPayloadBuilder=function(a){f=function(){var d=a();d.feature=g;d.obfuscatedMarketplaceId=p.ue_mid;d.producerId=b.nexusConstants.PRODUCER_ID;d.messageId=b.getRandomHexString();return d}};b.getDefaultPayload=function(){var a={};
a.feature=g;a.obfuscatedMarketplaceId=p.ue_mid;a.producerId=b.nexusConstants.PRODUCER_ID;a.messageId=b.getRandomHexString();return a};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.logWarrantyAddToCart=function(a,d){d=b.nexusConstants.WARRANTY_ATC_SCHEMA_PREFIX+b.nexusConstants.WARRANTY_ATC_SCHEMA_VERSION;var e=f();a.feature&&(e.feature=a.feature);e.deviceType=a.deviceType;e.baseItemAsin=a.baseItemAsin;e.baseItemCurrencySymbol=a.baseItemCurrencySymbol||
null;e.baseItemBuyingPriceDecimal=a.baseItemBuyingPriceDecimal||null;e.baseItemQuantity=a.baseItemQuantity||null;e.warrantyAsin=a.warrantyAsin;e.warrantyCurrencySymbol=a.warrantyCurrencySymbol||null;e.warrantyBuyingPriceDecimal=a.warrantyBuyingPriceDecimal||null;e.warrantyQuantity=a.warrantyQuantity||null;e.warrantyDisplayPosition=a.warrantyDisplayPosition;b.log(e,d)};b.logWarrantyImpression=function(a){var d=b.nexusConstants.WARRANTY_IMPRESSION_SCHEMA_PREFIX+b.nexusConstants.WARRANTY_IMPRESSION_SCHEMA_VERSION,
e=f();a.feature&&(e.feature=a.feature);e.customerId=a.customerId||null;e.deviceType=a.deviceType;e.baseItemAsin=a.baseItemAsin;e.baseItemCurrencySymbol=a.baseItemCurrencySymbol||null;e.baseItemBuyingPriceDecimal=a.baseItemBuyingPriceDecimal||null;e.warrantyAsin=a.warrantyAsin;e.warrantyCurrencySymbol=a.warrantyCurrencySymbol||null;e.warrantyBuyingPriceDecimal=a.warrantyBuyingPriceDecimal||null;e.warrantyDisplayPosition=a.warrantyDisplayPosition;b.log(e,d)};b.logWarrantyWidgetInteraction=function(a){var d=
b.nexusConstants.WARRANTY_WIDGET_INTERACTION_SCHEMA_PREFIX+b.nexusConstants.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION,e=f();a.feature&&(e.feature=a.feature);e.customerId=a.customerId||null;e.deviceType=a.deviceType;e.baseItemAsin=a.baseItemAsin;e.warrantyAsin=a.warrantyAsin;e.warrantyDisplayPosition=a.warrantyDisplayPosition;e.action=a.action;b.log(e,d)};b.log=function(a,d){p.ue&&p.ue.event&&(a=b.populateCustomerIdIfNotPresent(a),p.ue.event(a,b.nexusConstants.PRODUCER_ID,d,{ssd:!1}),r("NEXUS PAYLOAD: "+
JSON.stringify(a)+" SCHEMA: "+d))};return b});"use strict";l.when("A","wty-nexus-logger","wty-nexus-constants").register("mbb-nexus-event-handler",function(d,h,b){h.initialize(b.FEATURE_NAME_CONSTANTS.MBB,null);d.on("mbb:widget-interaction:nexus",function(b){b&&h.logWarrantyWidgetInteraction({baseItemAsin:b.baseAsin||null,warrantyAsin:b.serviceAsin||null,warrantyDisplayPosition:b.warrantyDisplayPosition,action:b.action,deviceType:b.deviceType||null})});d.on("mbb:impression:nexus",function(b){b&&h.logWarrantyImpression({baseItemAsin:b.baseAsin||
null,warrantyAsin:b.serviceAsin||null,warrantyDisplayPosition:b.warrantyDisplayPosition,deviceType:b.deviceType||null})})});"use strict";l.when("A").register("wty-nexus-constants",function(d){return{PRODUCER_ID:"warranties",WARRANTY_IMPRESSION_SCHEMA_PREFIX:"warranty.WarrantyImpressions.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"4",WARRANTY_ATC_SCHEMA_PREFIX:"warranty.AddWarrantyToCart.",WARRANTY_ATC_SCHEMA_VERSION:"2",WARRANTY_WIDGET_INTERACTION_SCHEMA_PREFIX:"warranty.WidgetInteraction.",WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION:"3",
FEATURE_NAME_CONSTANTS:{MBB:"MBB",SI:"SI",TWISTER_PLUS:"TWISTER_PLUS"},DEVICE_TYPE_CONSTANTS:{DESKTOP:"DESKTOP",MOBILE:"MOBILE",MOBILE_APP:"MOBILE_APP"}}})});
/* ******** */
(function(e){var f=window.AmazonUIPageJS||window.P,A=f._namespace||f.attributeErrors,a=A?A("DetailPageAlohaAssets",""):f;a.guardFatal?a.guardFatal(e)(a,window):a.execute(function(){e(a,window)})})(function(e,f,A){e.when("A").register("aloha-cartapi",function(a){return{createAddToCartRequest:function(f,x,e,t,d,v){v=v||5E3;d=d||t;var n={items:[]};return{count:function(){return n.items.length},call:function(){0<n.items.length&&a.$.ajax({url:f+"?ref_\x3ddp_atch_abb_atc",xhrFields:{withCredentials:!0},
type:"POST",headers:{"Content-Type":'application/vnd.com.amazon.api+json; type\x3d"cart.add-items.request/v1"',Accept:'application/vnd.com.amazon.api+json; type\x3d"cart.add-items/v1"',"Accept-Language":"en-US","x-api-csrf-token":x},data:JSON.stringify(n),timeout:v,success:e,error:t,abort:d})},addItem:function(a,c,d){n.items.push({asin:a,offerListingId:c,quantity:Number(d||1)})}}}}});"use strict";e.when("A","a-modal","aloha-simplebundle-common","ready").execute(function(a,f,e){var u=!1,t=a.debounce(function(){var d=
e.getSimpleBundlePageState()||{},f=d.csrfToken,n=d.cartEndpoint,b=d.items||[],d={baseAsin:d.baseAsin,marketplaceId:d.marketPlaceId,baseItemPrice:a.$("#base-product-price").data("base-product-price"),clientType:"aloha-simplebundle-desktop",currencyOfPreferenceSupported:d.currencyOfPreferenceSupported||!1},c=e.createMetricsLogger(d);u||(u=!0,a.defer(function(){c.logNexusImpression(b)}));e.setupAccessoryAddToCart(b,c,n,f)},200);(function(){a.declarative("show-review-tab","click",function(d){a.$(d.$target).closest("#a-page").find(".popoverReviewsTab").click()});
a.declarative("add-to-cart","click",function(d){a.$(".showBundleAsins.simpleBundleFeatureContainer .simple-bundle-buybox-item-checkbox input[type\x3d'checkbox']").filter(function(){return a.$(this).data("asin")===d.data.asin}).prop("checked",!0).change();a.$("[id^\x3dpopover-simpleBundle-]").each(function(){var d=f.get(a.$(this));d.isActive()&&d.hide()})});a.declarative("focus-image","mouseenter",function(a){var f=a.$target,e=f.parents("#a-page");a=a.data;e.find("#productImageMain-"+a.asin).attr("src",
a.imageUrl);e.find(".thumbnail-group").removeClass("a-button-selected");e.find("#"+f.prop("name")).addClass("a-button-selected")})})();t();a.on("a:pageUpdate",t);a.on("attach:dss:initialized",function(){a.off("a:pageUpdate",t);t()})});"use strict";e.when("A","a-checkbox","aloha-cartapi","aloha-buy-now-integration","aloha-buybox-form-util").register("aloha-simplebundle-common",function(a,p,x,u,t){function d(l,c){var b=a.$(l);b.change(function(){b.prop("checked",this.checked)});var m=a.$(c);m.length||
(m=b);return{$element:b,$container:m,api:p(l),show:function(){m.hasClass(q.AUI_HIDDEN)&&m.removeClass(q.AUI_HIDDEN);m.show()},hide:function(){m.hasClass(q.AUI_HIDDEN)||m.addClass(q.AUI_HIDDEN)},isVisible:function(){return!m.hasClass(q.AUI_HIDDEN)}}}function v(a,b,c){b.forEach(function(b){a.addItem(b.asin,b.offerListingId,b.quantity);c.logCheckboxSelected(b.index,b.quantity)})}function n(a,b,c){var m=[],d=[];b.forEach(function(b,f){var k=a[f];b.api.isChecked()?m.push({asin:k.asin,offerListingId:k.offerListingId,
ourPrice:k.ourPrice,ourPriceAmount:k.ourPriceAmount,ourPriceSymbol:k.ourPriceSymbol,ourPriceCode:k.ourPriceCode,index:f,quantity:c}):d.push({asin:k.asin,ourPrice:k.ourPrice,ourPriceAmount:k.ourPriceAmount,ourPriceSymbol:k.ourPriceSymbol,ourPriceCode:k.ourPriceCode,index:f,isVisible:b.isVisible()})});return{selectedLineItems:m,unselectedItems:d}}var b=/[^\d,\.]/g,c=/,/g,C=/\./g,E=/(^\D+|\D+$)/,q={AUI_HIDDEN:"aok-hidden"},D=!1;return{createMetricsLogger:function(l){function d(a,g){f.ue&&f.ue.count&&
f.ue.count("aloha-simplebundle-"+a,g)}function e(){var a;a=l.currencyOfPreferenceSupported?{priceFormatted:l.baseItemPrice,priceDecimal:null,currencySymbol:null}:q(l.baseItemPrice);return{baseAsin:l.baseAsin,baseItemPrice:a.priceFormatted,baseItemCurrencySymbol:a.currencySymbol,baseItemPriceDecimal:a.priceDecimal,clientType:l.clientType,feature:"abb"}}function m(a,g){f.ue&&f.ue.event&&(a.requestId=n,a.producerId="atch",a.obfuscatedMarketplaceId=l.marketplaceId,f.ue.event(a,"atch",g,{ssd:!0}))}function B(a){return l.currencyOfPreferenceSupported?
{priceFormatted:a.ourPrice,priceDecimal:parseFloat(a.ourPriceAmount)||null,currencySymbol:a.ourPriceSymbol}:q(a.ourPrice)}function q(a){a=a||"";var g=a.lastIndexOf(","),r=a.lastIndexOf("."),h;g>r?(r=C,h=c):(r=c,h=C);(g=a.match(E))&&(g=g[0].trim());r=a.replace(b,"").replace(r,"").replace(h,".");r=parseFloat(r);return{priceFormatted:a,currencySymbol:g,priceDecimal:r}}var n=Date.now().toString(10)+Math.random().toString(16).substring(2,13);a.defer(function(){d("view",1)});return{logAddToCart:function(a){d("addtocart",
a)},logExpandedLink:function(){d("buybox-expanded-link",1)},logCheckboxSelected:function(a,g){d("checkbox-"+(a+1),g)},logItemLink:function(a){d("link-"+(a+1),1)},logNexusImpression:function(a){var g=e();g.accessories=a.map(function(a,g){var b=B(a);return{asin:a.asin,displayPosition:g+1,price:b.priceFormatted,currencySymbol:b.currencySymbol,priceDecimal:b.priceDecimal}});m(g,"attach.ABBImpression.5")},logNexusAddBaseToCart:function(a,g,b){var h=e();h.baseQuantity=Number(b);h.accessoriesAdded=a.map(function(a){var g=
B(a);return{asin:a.asin,displayPosition:a.index+1,quantity:Number(a.quantity),price:g.priceFormatted,currencySymbol:g.currencySymbol,priceDecimal:g.priceDecimal}});h.accessoriesNotAdded=g.map(function(a){var g=B(a);return{asin:a.asin,displayPosition:a.index+1,price:g.priceFormatted,currencySymbol:g.currencySymbol,priceDecimal:g.priceDecimal}});m(h,"attach.ABBAddBaseToCart.9")},logNexusOpenMiniDP:function(a,g){var b=B(g),h=e();h.accessoryAsin=g.asin;h.accessoryDisplayPosition=Number(a)+1;h.accessoryPrice=
b.priceFormatted;h.accessoryItemCurrencySymbol=b.currencySymbol;h.accessoryItemPriceDecimal=b.priceDecimal;m(h,"attach.ABBShowMiniDP.4")}}},getSimpleBundlePageState:function(){var b=a.$(".simpleBundleJavascriptParameters").find("script").html();return a.parseJSON(b)},getCheckboxCollectionObject:d,setupAccessoryAddToCart:function(b,c,d,m){function q(g,b,c){var l=x.createAddToCartRequest(d,m,function(d){a.$("#abb_accessory_add_button_"+g).addClass("aok-hidden");a.$("#abb_add_accessory_alert_"+g).removeClass("aok-hidden");
a.$("#minidp_accessory_add_button_"+g).addClass("aok-hidden");a.$("#minidp_add_accessory_alert_"+g).removeClass("aok-hidden");w.push({asin:b.asin,offerListingId:b.offerListingId,ourPrice:b.ourPrice,ourPriceAmount:b.ourPriceAmount,ourPriceSymbol:b.ourPriceSymbol,ourPriceCode:b.ourPriceCode,index:c,quantity:1});e.when("EWC").execute("abb-everywhere-cart",function(a){a.refresh()});var l=d.entity.count.entity.items;e.when("nav.setCartCount").execute("abb-nav-cart",function(a){a(l)})},function(){a.$("#abb_accessory_add_button_"+
g).addClass("aok-hidden");a.$("#abb_add_accessory_error_"+g).removeClass("aok-hidden");a.$("#minidp_accessory_add_button_"+g).addClass("aok-hidden");a.$("#minidp_add_accessory_error_"+g).removeClass("aok-hidden");f.ueLogError&&f.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});l.addItem(g,b.offerListingId);l.call()}var n=[],w=[],k=[];D||(D=!0,a.$(".simpleBundleSection").each(function(b,
c){a.$(c).closest("#simpleBundleV2_feature_div").length||a.$(c).closest("#simpleBundle_feature_div").length||c.remove()}),b.forEach(function(b,c){n.push({asin:b.asin,offerListingId:b.offerListingId,ourPrice:b.ourPrice,ourPriceAmount:b.ourPriceAmount,ourPriceSymbol:b.ourPriceSymbol,ourPriceCode:b.ourPriceCode,index:c,quantity:1});b="#abb_accessory_add_button_"+b.asin;c=a.$(b);15<a.$(b+" .a-button-text").text().length&&c.removeClass("a-button-span8").addClass("a-button-span11")}),a.declarative("abb-accessory-add",
"click",function(a){a=a.data.asin;for(var c,h=0;h<b.length;h++)if(b[h].asin===a){c=h;break}q(a,b[c],c)}),f.addEventListener("beforeunload",function(){n.forEach(function(a){w.some(function(b){return b.asin===a.asin})||k.push(a)});c.logNexusAddBaseToCart(w,k,1)}))},setupAddToCart:function(b,c,d,m,e,q,w){function k(b,l){if(g){var k=a.$(b.currentTarget);if(u.isBuyNow(k)){var y=w?1:r.find("*[name\x3d'quantity']").val()||1,z=n(d,c,y);u.checkoutWith(z.selectedLineItems,k)}else return}var p=x.createAddToCartRequest(e,
q,function(){l()},function(){f.ueLogError&&f.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"});l()}),y=w?1:r.find("*[name\x3d'quantity']").val()||1,z=n(d,c,y);v(p,z.selectedLineItems,m);k=z.unselectedItems.filter(function(a){return a.isVisible});m.logNexusAddBaseToCart(z.selectedLineItems,k,y);y=p.count();0!==y&&(k=a.$(b.currentTarget),u.isBuyNow(k)?u.checkoutWith(z.selectedLineItems,k):(g=
!0,b.preventDefault(),m.logAddToCart(y),p.call()))}var g=!1,r=b;b.unbind("submit.SimpleBundleSubmitHandler");b.bind("submit.SimpleBundleSubmitHandler",function(b){var c=a.$(this);k(b,function(){c.submit()})});b.find(":submit").unbind("click.SBB");b.find(":submit").bind("click.SBB",function(b){var c=a.$(this),g=c.closest(".a-accordion-row-container");g.length&&(r=g,k(b,function(){c.click()}))})},setupAddToCartForDeclarative:function(a,b,c,d,q,p,w,k){a.unbind("click.SimpleBundleClickHandler");a.bind("click.SimpleBundleClickHandler",
function(a){a=x.createAddToCartRequest(q,p,function(){e.now("attach-external-atc-interceptor").execute(function(a){a&&h.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})})},function(){f.ueLogError&&f.ueLogError({message:"[There was an error while adding items to the cart using the universal add to cart api.]"},{logLevel:"ERROR",attribution:"SimpleBundle"})});var l=w?1:k.find("*[name\x3d'quantity']").val()||1,h=n(c,b,l);v(a,h.selectedLineItems,d);var F=h.unselectedItems.filter(function(a){return a.isVisible});
d.logNexusAddBaseToCart(h.selectedLineItems,F,l);if(l=a.count())d.logAddToCart(l),a.call()})},setupCheckboxes:function(a,b,c,f,e,q,n,k,g,r){var h=d(q,k);a.push(h);h.api.enable();h.$element.data("asin",f);if(c){var p=d(n,g);p.api.enable();p.api.check(h.api.isChecked());p.$element.change(function(){var a=p.api.isChecked();h.api.check(a)});h.$element.change(function(){var b=h.api.isChecked();p.api.check(b);var c=0;a.forEach(function(a){c<e&&a.api.isChecked()?(c++,a.show()):a.hide()});c<e&&a.forEach(function(a){c<
e&&a.api.isUnchecked()&&(c++,a.show())})})}else"SINGLE"===r&&h.$element.change(function(){h.api.isChecked()&&a.forEach(function(a,c){b!==c&&a.api.uncheck()})});0<a.length&&a[0].$element.change()},setupAddToCartForButton:function(b,c,d,f,q,p){function x(){var a=q?1:k.find("*[name\x3d'quantity']").val()||1,b=n(d,c,a);t.addItems(p,b.selectedLineItems,f);var h=b.unselectedItems.filter(function(a){return a.isVisible});e.now("attach-external-atc-interceptor").execute(function(a){a&&b.selectedLineItems.forEach(function(b){a.updateAttachModule(b.asin)})});
f.logNexusAddBaseToCart(b.selectedLineItems,h,a);f.logAddToCart(b.selectedLineItems.length)}var k=p;b.unbind("click.button.SBB");b.bind("click.button.SBB",function(){var b=a.$(this).closest(".a-accordion-row-container");b.length&&(k=b);x()})}}});"use strict";e.when("ready").register("aloha-buy-now-integration",function(){var a={};e.when("turbo-checkout-buy-now-integration").execute(function(f){a=f});return{isBuyNow:function(f){return"function"===typeof a.isBuyNow&&a.isBuyNow(f)},checkoutWith:function(f,
e){return a.checkoutWith(f,e)}}});"use strict";e.when("A").register("aloha-buybox-form-util",function(a){function f(a,c,d){var e="items["+a+".abb]";c.forEach(function(a){e+="["+a+"]"});a=document.createElement("input");a.type="hidden";a.name=e;a.value=d;a.classList.add("aloha-accessory-form-input");return a}function e(a,c){var d=a.elements.namedItem(c.name);d&&a.removeChild(d);a.appendChild(c)}function u(a,c){e(a,f(c.index,["asin"],c.asin));e(a,f(c.index,["offerListingId"],c.offerListingId));e(a,
f(c.index,["quantity"],c.quantity))}function t(a){for(var c=2;0<a.find('input[name\x3d"asin.'+c+'"]').length||0<a.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;return c}function d(a,c){for(;0<a.find('input[name\x3d"asin.'+c+'"]').length||0<a.find('input[name\x3d"offeringID.'+c+'"]').length;)c++;return c}function v(b,c){return[a.$("\x3cinput /\x3e",{type:"hidden",name:"asin."+c,value:b.asin,class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+c,value:b.offerListingId,
class:"aloha-accessory-form-input"}),a.$("\x3cinput /\x3e",{type:"hidden",name:"quantity."+c,value:b.quantity||1,class:"aloha-accessory-form-input"})]}var n=[];a.on("aloha:detailPage:reappear",function(){n=[];a.$(".aloha-accessory-form-input").remove()});return{addItems:function(a,c,f){var e=t(a);c.forEach(function(c){if(c!==A&&c.asin&&c.offerListingId){e=d(a,e);var p=v(c,e);p.forEach(function(c){a.append(c)});u(a.get(0),c);n.push(p);e++;f&&f.logCheckboxSelected(c.index,c.quantity)}});c=a.find('input[name\x3d"itemCount"]');
0===c.length?a.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+e+'"\x3e'):c[0].value=Math.max(c[0].value,e)}}})});
/* ******** */
(function(p){var r=window.AmazonUIPageJS||window.P,y=r._namespace||r.attributeErrors,a=y?y("DetailPageAttachAssets",""):r;a.guardFatal?a.guardFatal(p)(a,window):a.execute(function(){p(a,window)})})(function(p,r,y){"use strict";p.register("attach-variant-registration",function(){function a(a){if(b.hasOwnProperty(a))throw"Variant flag already registered";b[a]=!0}var b={};a("CETECH_WTY_MULTI_QUANTITY_DEALS_WARRANTY_504197:T1");return{registerVariantFlag:a,getVariantFlag:function(a){return b.hasOwnProperty(a)}}});
"use strict";p.when("A","attach-weblabs","attach-logging","attach.amazonapi.cart.add-items").register("attach-baselink",function(a,b,f,d){var c=null;p.when("BaseLinkFormHelper").execute(function(a){c=a});var n=function(a){r.ueLogError&&r.ueLogError({message:"msi - "+a},{logLevel:"ERROR",attribution:"Mobile_App_SI_Base_Link"})};return{createBaseLinkFormFields:function(a,b){return c?c.addBaseLinkFields(a,b):null},addLinkedWarranty:function(a,b,c){if(!a||!a.baseItemAsin)return n("baseItemAsin is undefined. Abandoning ATC since Base item and Warranty association can not be done."),
c();a={asin:a.warrantyAsin,offerListingId:a.offeringId,quantity:parseInt(a.quantity),additionalParameters:{itemAssociation:{associatedItemId:a.baseItemAsin,deleteConstraint:{mutuallyInclusive:!1},quantityConstraint:{invarianceFactor:1,quantityEditable:!0},programType:"AmazonProtect",renderType:"renderAll"}}};d.addItems([a],f.REF_TAGS.WARRANTY_ADD_TO_CART).then(b).catch(c)},mSilogError:n}});"use strict";p.when("A").register("attach-external-atc-interceptor",function(a){var b=a.$,f=[],d=[],c=!1,n=!1,
t=function(){n=!0},e=function(a){var c=d.indexOf(a);-1<c&&(a=b("#attach_add_accessory_alert_"+c),c=b("#attach_add_accessory_button_"+c),a&&c&&(a.removeClass("aok-hidden"),c.addClass("aok-hidden")))};return{updateAttachModule:function(a){t&&(c?e(a):f.push(a))},loadAttachModule:function(a){if(n)for(c=!0,d=a;0<f.length;)a=f.shift(),e(a)},unloadAttachModule:function(){c=!1;d=[]},enableModule:t}});"use strict";p.when("A").register("attach-preinitiate-checkout",function(a){return{getCartInitiateId:function(){return(new Date).getTime()},
preinitiateCheckout:function(b){var f=a.$("#attach-desktop-sideSheet");var d=a.$("#attach_accessory_sheet");f=f.length?f:d;f.find("iframe#checkoutPrefetch").remove();b="/gp/cart/checkout-prefetch.html?\x26cartInitiateId\x3d"+b;d=document.createElement("iframe");d.setAttribute("src",b);d.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");d.setAttribute("name","checkoutPrefetch");d.setAttribute("id","checkoutPrefetch");f.append(d)}}});"use strict";p.when("A","attach-common",
"attach-variant-registration").register("attach-weblabs",function(a,b,f){var d={},c=d.Selectors={CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",WEBLABS_TO_TRIGGER_ON_ADD_TO_CART:"#attach-weblabsToTriggerOnAddToCart",SHOW_ACCESSORY_COUPONS_DSS:"#attach-accessory-coupons-dss",SHOW_ACCESSORY_COUPONS_MBS:"#attach-accessory-coupons-mbs",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",WTY_TWISTER_CONTAINER:"#warranty-twister-container",
WTY_LD_SUPPORT:"#warranty-ld-launch",AAPI_AJAX_ENDPOINT:"#attach-aapi-ajax-endpoint",MOBILE_WEB_MBS_EXPERIMENT_WEBLAB:"#attach-accessory-mobile-web-mbs",DSS_MBS_UI_ENHANCEMENT:"#attach-dss-mbs-enhancement",SHOW_WFM_ENABLE:"#attach-enabled-for-wfm"},n=d.Marketplaces={IN:"A21TJRUUN4KGV"};d.isWarrantyPaneSuppressed=function(){return a.$(c.ATTACH_MARKETPLACE_ID).val()===n.IN&&(!d.servicesInterstitialDeprecated()||b.hasAccessories())};d.isShowAccessoryCouponsDssEnabled=function(){return b.elementExists(c.SHOW_ACCESSORY_COUPONS_DSS)};
d.isShowAccessoryCouponsMbsEnabled=function(){return b.elementExists(c.SHOW_ACCESSORY_COUPONS_MBS)};d.isCoreFreeShippingMessageEnabled=function(){return b.elementExists(c.CORE_FREE_SHIPPING_MESSAGE)};d.isAttachDebugParametersEnabled=function(){return 0<a.$(c.DEBUG_IS_DEBUG).length||0<a.$(c.DEBUG_QUERY_STRING).length};d.showWarrantyForMultiQuantityDeals=function(){return f.getVariantFlag("CETECH_WTY_MULTI_QUANTITY_DEALS_WARRANTY_504197:T1")};d.isWarrantyTwisterPlusDesktopEnabled=function(){return 0<
a.$(c.WTY_TWISTER_CONTAINER).length};d.isAmazonApiAjaxEnabled=function(){return b.elementExists(c.AAPI_AJAX_ENDPOINT)};d.isAttachEnabledForWFM=function(){return b.elementExists(c.SHOW_WFM_ENABLE)};d.servicesInterstitialDeprecated=function(){return b.elementExists("#attachSIDeprecated")};d.isMobileWebMBSEnabled=function(){return b.elementExists(c.MOBILE_WEB_MBS_EXPERIMENT_WEBLAB)};d.isDssMbsEnhancementEnabled=function(){return b.elementExists(c.DSS_MBS_UI_ENHANCEMENT)};return d});"use strict";p.when("A").register("attach-logging",
function(a){var b={},f,d,c;b.NEXUS={PRODUCER_ID:"atch",ACCESSORY_IMPRESSIONS_PREFIX:"attach.AccessoryImpressions.",ACCESSORY_IMPRESSIONS_SCHEMA_VERSION:"11",ADD_ACCESSORY_PREFIX:"attach.AddAccessoryToCart.",ADD_ACCESSORY_SCHEMA_VERSION:"15",ADD_WARRANTY_PREFIX:"attach.AddWarrantyToCart.",ADD_WARRANTY_SCHEMA_VERSION:"5",ADD_WARRANTY_FAILURE_PREFIX:"attach.AddWarrantyToCartFailure.",ADD_WARRANTY_FAILURE_SCHEMA_VERSION:"3",WARRANTY_IMPRESSION_PREFIX:"attach.WarrantyImpression.",WARRANTY_IMPRESSION_SCHEMA_VERSION:"6",
WARRANTY_WIDGET_INTERACTION_PREFIX:"warranty.widgetInteraction.",WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION:"3",DSS_WARNING_MESSAGE_PREFIX:"attach.DssWarningMessages.",DSS_WARNING_MESSAGE_VERSION:"2",PROMOTION_CLAIMED_PREFIX:"attach.ClaimPromotion.",PROMOTION_CLAIMED_SCHEMA_VERSION:"2",ACCESSORY_TYPE:{ACCESSORY:"accessory",WARRANTY:"warranty"}};b.FEATURES={DSS:"dss",MBS:"mbs",MBS_APP:"mbs_app",MBS_WEB:"mbs_web"};b.CSM_METRICS={ATTACH_BASE_ATC_CLICK:"attachDesktopBaseATCClick",ATTACH_BASE_ATC_FAILURE:"ATTACH_DSS_ADD_BASE_FAILURE",
ATTACH_BASE_ATC_SUCCESS:"ATTACH_DSS_ADD_BASE_SUCCESS",ATTACH_CART_CLICK:"ATTACH_DSS_CART_BUTTON_CLICK",ATTACH_CHECKOUT_CLICK:"ATTACH_DSS_CHECKOUT_CLICK",ATTACH_GET_CART_DESCRIPTION_FAILURE:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_FAILURE",ATTACH_GET_CART_DESCRIPTION_SUCCESS:"ATTACH_DSS_GET_CART_DESCRIPTION_AJAX_SUCCESS",ATTACH_SHOW_LESS:"attachDesktopShowLess",ATTACH_SHOW_MORE:"attachDesktopShowMore",ATTACH_SIDE_SHEET_CLOSE:"attachDesktopSideSheetClose",ATTACH_UPSELL_ATC_CLICK:"attachDesktopUpsellATCClick",
ATTACH_UPSELL_ATC_FAILURE:"ATTACH_DSS_ADD_ACCESSORY_FAILURE",ATTACH_UPSELL_ATC_LATENCY:"attach_desktop_upsell_atc_latency",ATTACH_UPSELL_ATC_SUCCESS:"ATTACH_DSS_ADD_ACCESSORY_SUCCESS",MINI_DP_ATC:"attachDesktopMiniDPATC",MINI_DP_BACK:"attachDesktopMiniDPBack",MINI_DP_CANCEL:"attachDesktopMiniDPCancel",MINI_DP_CAROUSEL_THUMBNAIL_CHANGE:"attachDesktopMiniDPCarouselThumbnailChange",MINI_DP_DWELL_TIME:"attach_desktop_mini_dp_dwell_time",MINI_DP_OPEN:"attachDesktopMiniDPOpen",ATTACH_MBS_BASE_ATC_CLICK:"AttachMbsBaseItemAtcClick",
DSS_BASE_LD_ATC_CLICK:"attachDesktopBaseLightningDealAtcClick",MBS_BASE_LD_ATC_CLICK:"attachMobileBaseLightningDealAtcClick",DSS_BASE_LD_MISSING_TIMER:"attachDesktopBaseLightningDealMissingTimer",MBS_BASE_LD_MISSING_TIMER:"attachMobileBaseLightningDealMissingTimer",DSS_LD_MISSING_ATTACH:"attachDesktopLightningDealMissingAttachContainer",MBS_APP_LD_MISSING_ATTACH:"attachMobileAppLightningDealMissingAttachContainer",MBS_WEB_LD_MISSING_ATTACH:"attachMobileWebLightningDealMissingAttachContainer",ATTACH_BASE_LD_PRESENT:"attachBaseLightningDeal",
ATTACH_BASE_LD_WARRANTY_SUCCESS:"attachBaseLightningDealAddWarrantySuccess",ATTACH_BASE_LD_WARRANTY_FAILURE:"attachBaseLightningDealAddWarrantyFailure",ATTACH_BASE_LD_DEAL_STATUS_ERROR:"attachBaseLightningDealStatusError",ATTACH_MBS_ATC_STAY_AJAX_SUCCESS:"attachMbsAtcStayAjaxSuccess",ATTACH_MBS_ATC_STAY_AJAX_FAILURE:"attachMbsAtcStayAjaxFailure",ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE:"attachMbsAtcStayAjaxIncomplete",ALM_DSS_BASE_ATC_SUCCESS:"almAddBaseSuccessDss",ALM_DSS_BASE_ATC_FAILURE:"almAddBaseFailureDss",
ALM_MBS_BASE_ATC_SUCCESS:"almAddBaseSuccessMbs",ALM_MBS_BASE_ATC_FAILURE:"almAddBaseFailureMbs",WARRANTY_MBS_APP_ATC_FAILURE:"warrantyMbsAppAtcFailure",WARRANTY_MBS_WEB_ATC_FAILURE:"warrantyMbsWebAtcFailure",WARRANTY_DSS_ATC_FAILURE:"warrantyDssAtcFailure"};b.ENDPOINTS={REF_TAG_IN:"/hctp/log/refMarker?ref_\x3d"};b.METRICS={DPX_MOBILE_APP_ATC:"DetailPage_MobileApp_AddToCart",DPX_MOBILE_WEB_ATC:"DetailPage_MobileWeb_AddToCart"};b.initialize=function(a,c){f=a;d=c;b.REF_TAGS={WARRANTY_IMPRESSION:"dp_atc_"+
a+"_w_i_",WARRANTY_ADD_TO_CART:"dp_atc_"+a+"_w_y_",WARRANTY_WIDGET_INTERACTION:"dp_atc_"+a+"_w_w_i_"}};b.setPayloadBuilder=function(a){c=function(){var c=a();c.feature=f;c.obfuscatedMarketplaceId=d||r.ue_mid;c.producerId=b.NEXUS.PRODUCER_ID;c.requestId=b.getRandomHexString();return c}};b.getRandomHexString=function(){return Date.now().toString(10)+Math.random().toString(16).substring(2,13)};b.log=function(c,d){r.ue&&r.ue.event&&(c.customerId=a.$("#attach-customerId").val()||null,r.ue.event(c,b.NEXUS.PRODUCER_ID,
d,{ssd:!1}))};b.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||
null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};b.getWarrantyPayload=function(a,b){return{asin:a,
priceFormatted:b,priceDecimal:null,currencySymbol:null}};b.logAccessoryAddToCart=function(a){var d=b.NEXUS.ADD_ACCESSORY_PREFIX+b.NEXUS.ADD_ACCESSORY_SCHEMA_VERSION,e=c();e.type=b.NEXUS.ACCESSORY_TYPE.ACCESSORY;e.displayPosition=parseInt(a.index)+1;e.accessoryAsin=a.asin;e.accessoryAsinPrice=a.priceFormatted;e.accessoryItemCurrencySymbol=a.currencySymbol;e.accessoryItemPriceDecimal=a.priceDecimal;e.couponType=a.couponType;e.couponDecimal=a.couponDecimal;e.dealType=a.dealType;e.dealPercentSavings=
a.dealPercentSavings;e.dealDollarAmount=a.dealDollarAmount;e.categoryDisplayPosition=parseInt(a.categoryIndex)+1;e.categoryTitle=a.categoryTitle;e.displayPositionWithinCategory=parseInt(a.asinIndexWithinCategory)+1;b.log(e,d)};b.logAccessoryImpressions=function(a){var d=b.NEXUS.ACCESSORY_IMPRESSIONS_PREFIX+b.NEXUS.ACCESSORY_IMPRESSIONS_SCHEMA_VERSION,e=c();e.accessories=[];for(var n=0;n<a.length;n++){var g=a[n];e.accessories.push({displayPosition:parseInt(g.index)+1,asin:g.asin,price:g.priceFormatted,
currencySymbol:g.currencySymbol,priceDecimal:g.priceDecimal,couponType:g.couponType,couponDecimal:g.couponDecimal,dealType:g.dealType,dealPercentSavings:g.dealPercentSavings,dealDollarAmount:g.dealDollarAmount,categoryDisplayPosition:parseInt(g.categoryIndex)+1,categoryTitle:g.categoryTitle,displayPositionWithinCategory:parseInt(g.asinIndexWithinCategory)+1})}b.log(e,d)};b.logWarrantyAddToCart=function(d,f){var e=b.NEXUS.ADD_WARRANTY_PREFIX+b.NEXUS.ADD_WARRANTY_SCHEMA_VERSION;f&&(e=b.NEXUS.ADD_WARRANTY_FAILURE_PREFIX+
b.NEXUS.ADD_WARRANTY_FAILURE_SCHEMA_VERSION,a.capabilities.isAmazonApp?b.logCount(b.CSM_METRICS.WARRANTY_MBS_APP_ATC_FAILURE):a.capabilities.mobile?b.logCount(b.CSM_METRICS.WARRANTY_MBS_WEB_ATC_FAILURE):b.logCount(b.CSM_METRICS.WARRANTY_DSS_ATC_FAILURE));var n=c();n.asin=d.asin;n.price=d.priceFormatted;n.warrantyCurrencySymbol=d.currencySymbol;n.warrantyPriceDecimal=d.priceDecimal;b.log(n,e);f||b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_ADD_TO_CART,d.asin)};b.logWarrantyImpression=function(a){var d=
b.NEXUS.WARRANTY_IMPRESSION_PREFIX+b.NEXUS.WARRANTY_IMPRESSION_SCHEMA_VERSION,e=c();e.asin=a.asin;e.price=a.priceFormatted;e.warrantyCurrencySymbol=a.currencySymbol;e.warrantyPriceDecimal=a.priceDecimal;b.log(e,d);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_IMPRESSION,a.asin)};b.logWarrantyWidgetInteraction=function(a){var d=b.NEXUS.WARRANTY_WIDGET_INTERACTION_PREFIX+b.NEXUS.WARRANTY_WIDGET_INTERACTION_SCHEMA_VERSION,e=c();e.asin=a.asin;e.action=a.action;b.log(e,d);b.logWarrantyRefTag(b.REF_TAGS.WARRANTY_WIDGET_INTERACTION,
a.asin)};b.logWarrantyRefTag=function(a,d){var e=c().baseAsin;b.logRefTag(a+e+"_"+d)};b.logSecondarySheetRefTag=function(a){var d=c().baseAsin;b.logRefTag(a+"_"+d)};b.logRefTag=function(c){"A21TJRUUN4KGV"===d&&a.get(b.ENDPOINTS.REF_TAG_IN+c)};b.logMobileBaseAtc=function(c){b.logCount(b.CSM_METRICS.ATTACH_MBS_BASE_ATC_CLICK);c&&c.data&&"add-to-cart"===c.data.buttonID&&b.logCount(a.capabilities.isAmazonApp?b.METRICS.DPX_MOBILE_APP_ATC:b.METRICS.DPX_MOBILE_WEB_ATC)};b.logMapleError=function(){r.ue&&
r.ue.count&&r.ue.count("MAPLE::DSS::Error",(r.ue.count("MAPLE::DSS::Error")||0)+1)};b.logCount=function(a,b){r.ue&&r.ue.count&&(b=b||1,r.ue.count(a,(r.ue.count(a)||0)+b))};b.logError=function(a,b,c){r.ueLogError&&r.ueLogError(a,{logLevel:b||"ERROR",attribution:c||"DetailPageAttachAssets"})};b.logDSSWarningMessage=function(a){var d=b.NEXUS.DSS_WARNING_MESSAGE_PREFIX+b.NEXUS.DSS_WARNING_MESSAGE_VERSION,e=c();b.log({quantity:e.quantity.toString(),baseAsin:e.baseAsin,warningMessage:a},d)};b.logPromotionClaimed=
function(a){var d=b.NEXUS.PROMOTION_CLAIMED_PREFIX+b.NEXUS.PROMOTION_CLAIMED_SCHEMA_VERSION,e=c();e.asin=a.asin;e.accessoryCurrencySymbol=a.currencySymbol;e.accessoryPriceDecimal=a.priceDecimal;e.displayPosition=a.index+1;null!==a.couponType&&(e.promoDecimal=a.couponDecimal,e.promoDecimalType=a.couponType,e.promoType="coupon");b.log(e,d)};b.isFunction=function(a){return"function"===typeof a};b.beginLatencyCapture=function(a){b.isFunction(r.uet)&&r.uet("bb",a,{wb:1})};b.endLatencyCapture=function(a){b.isFunction(r.uex)&&
r.uex("ld",a,{wb:1})};return b});"use strict";p.when("A","attach-logging").register("attach-maple",function(a,b){var f={},d;f.initialize=function(){d=!1};f.loadBannerHTML=function(){var c=a.$.Deferred(),f={};d&&(f.cart=null);a.post("/gp/cobrandcard/dss-maple-banner.html",{params:f,success:function(a){c.resolve(a)},error:function(){b.logMapleError();c.resolve(null)}});return c.promise()};f.suppressMathBox=function(){d=!0};f.updateMathBox=function(a){"undefined"!==typeof mapleMathBox&&null!==mapleMathBox&&
mapleMathBox.updateMapleMath({totalCost:a})};return f});"use strict";p.when("A","3p-promise","attach-variant-registration","attach-logging","attach.utilities.add-to-cart.base-product").register("attach-common",function(a,b,f,d,c){function n(b){var c=t(b,q.UNIQ_ITEM_ASSOC_NAME),d=t(b,q.ITEM_ASSOC_TYPE_NAME),f=1,m=!1;null!==d&&(g.itemAssocTypeValue=b.find(q.INPUT_NAME+d+q.CLOSED_BRACKET).val(),g.itemAssocTypeValue===q.ATTACH_ITEM_ASSOC_TYPE_VALUE&&(m=!0));null!==c?m?(d=t(b,q.ITEM_ASSOC_NAME),m=a.$("#attach-sessionId").val()+
"-"+(new Date).getTime(),b.find(q.INPUT_NAME+c+q.CLOSED_BRACKET).val(m),b.find(q.INPUT_NAME+d+q.CLOSED_BRACKET).val(m),g.uniqueId=m):g.uniqueId=b.find(q.INPUT_NAME+c+q.CLOSED_BRACKET).val():(g.uniqueId=a.$("#attach-sessionId").val()+"-"+(new Date).getTime(),f=l(b,f),e(b,q.ITEM_ASSOC_NAME,g.uniqueId,f),f++,f=l(b,f),e(b,q.UNIQ_ITEM_ASSOC_NAME,g.uniqueId,f),f++,f=l(b,f),e(b,q.ITEM_ASSOC_TYPE_NAME,g.itemAssocTypeValue,f),f++);f=l(b,f);e(b,q.ITEM_ASSOC_PROPERTIES_NAME,q.ITEM_ASSOC_PROPERTIES_VALUE,f)}
function t(a,b){a=a.find(q.INPUT_VALUE+b+q.CLOSED_BRACKET);if(!a.length)return null;a=a[0].name.split(".");return 2<a.length?q.CUSTOM_VALUE_KEY+a[1]+"."+a[2]:null}function e(a,b,c,d){a.append('\x3cinput type\x3d"hidden" name\x3d"custom-name.1.'+d+'" value\x3d"'+b+'"/\x3e');a.append('\x3cinput type\x3d"hidden" name\x3d"custom-value.1.'+d+'" value\x3d"'+c+'"/\x3e')}function l(a,b){for(;0<a.find('input[name\x3d"custom-name.1.'+b+'"]').length||0<a.find('input[name\x3d"custom-value.1.'+b+'"]').length;)b++;
return b}var g={},q=g.ItemAssociationConstants={ITEM_ASSOC_NAME:"itemAssoc",UNIQ_ITEM_ASSOC_NAME:"UNIQ-itemAssoc",ITEM_ASSOC_TYPE_NAME:"itemAssocType",ATTACH_ITEM_ASSOC_TYPE_VALUE:"Attach",ITEM_ASSOC_RENDER_TYPE_NAME:"itemAssocRenderType",ITEM_ASSOC_RENDER_TYPE_VALUE:"renderAll",ITEM_ASSOC_PROPERTIES_NAME:"itemAssocProperties",ITEM_ASSOC_PROPERTIES_VALUE:"{\x26#34;QuantityEditable\x26#34;:\x26#34;1\x26#34;,\x26#34;QuantityInvarianceFactor\x26#34;:\x26#34;1\x26#34;}",CUSTOM_VALUE_KEY:"custom-value.",
INPUT_VALUE:"input[value\x3d'",INPUT_NAME:"input[name\x3d'",CLOSED_BRACKET:"']"},E=g.Marketplaces={IN:"A21TJRUUN4KGV"};g.uniqueId=null;g.itemAssocTypeValue="Attach";g.selectedBaseLightningDeal=!1;g.cartInitiateId=!1;g.isAttachEnabledForWFM=!1;g.FailureModes={ERROR_500:1,RESUBMIT_BUY_BOX:2,TRANSITION_TO_HUC:3,UNBIND_ATC:4,REBIND_ATC:5};var m=g.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",DISCRIMINATED_OFFERS_ENABLED:"#attach-discriminated-offers-enabled",
ATC_FORM:"#addToCart",INSTALLMENTS_FORM:"#mobile-installments",DSS_CART:".attach-cart-button",DSS_PROCEED:".attach-checkout-button",HAS_DDWL:"#attach-has-ddwl",RAPS_REFACTOR:"#attach-wl-refactored-raps",ALM_BRAND_ID_SELECTOR:"#attach-alm-brand-id",ALM_WFM_BRAND_ID:"VUZHIFdob2xlIEZvb2Rz"},p=g.Endpoints={PROCEED_TO_CHECKOUT:"/gp/cart/desktop/go-to-checkout.html?proceedToCheckout\x3dProceed",ALM_PROCEED_TO_CHECKOUT:"/alm/byg"};g.buyButton=a.$(m.ADD_TO_CART_BUTTON);g.reject=function(b,c){return g.rejectPromise(a.$.Deferred(),
b,c)};g.getInputValueByNameAndIndex=function(b,c){b=a.$('input[name\x3d"'+b+"."+c+'"]')[0];return a.$(b).val()};g.rejectPromise=function(b,c,e){if(e&&e.count&&r.ue&&r.ue.count)if("string"===typeof e.count)r.ue.count(e.count,1);else if(a.$.isArray(e.count))for(var g=0;g<e.count.length;g++)r.ue.count(e.count[g],1);e&&e.information&&d.logError("string"===typeof e.information?{message:e.information}:e.information,e.level,e.attribution);return b.reject(c,e)};g.pipeJSON=function(a){try{return JSON.parse(a)}catch(v){return g.reject(null,
{count:"ATTACH_DSS_JSON_PARSE_FAILURE"})}};g.unescapeJson=function(a){if(!a)return null;a=a.replace(/\|\|/g,'"');return a=a.replace(/&pipe;/g,"||")};g.elementExists=function(b){return b?b instanceof a.$?0!==b.length:0!==a.$(b).length:!1};g.moduleExists=function(b){return(b=a.$("#"+b+"_feature_div").html())?0<b.trim().length:!1};g.isCurrencyOfPreferenceApplied=function(){return"true"===a.$("#attach-used-currency-of-preference").val()};g.hasWarranty=function(){return g.elementExists("#attachSIDeprecated")&&
g.elementExists("#attach-warranty-pane")||0<a.$("#warrantyEscapedJson").length};g.hasMonthlyWarranty=function(){return g.elementExists("#attach-monthly-warranty")};g.isMultiQuantityDeal=function(){return 0<a.$("#dealOrderQuantityDropdown").length};g.hasAccessories=function(){return g.elementExists("#attach-asin-list")};g.hasDataDrivenWeblab=function(){return"true"===a.$(m.HAS_DDWL).val()&&g.elementExists(m.RAPS_REFACTOR)};g.isDiscriminatedOffersEnabled=function(){return g.elementExists(m.DISCRIMINATED_OFFERS_ENABLED)?
"true"===a.$(m.DISCRIMINATED_OFFERS_ENABLED).val():a.$(m.ATTACH_MARKETPLACE_ID).val()===E.IN};g.addBaseProduct=function(){var b=c.createRequest(g.getAtcForm());b.isValid()?(b=b.execute(),d.logCount(d.CSM_METRICS.ATTACH_BASE_ATC_CLICK),a.trigger("attach:add-base-to-cart",b)):g.submitATCForm()};g.submitATCForm=function(){var b=g.getAtcForm();g.isDiscriminatedOffersEnabled()&&n(b);d.logCount(d.CSM_METRICS.ATTACH_BASE_ATC_CLICK);b=b.serializeArray();var c=g.buyButton.attr("name"),e=g.buyButton.val();
b.push({name:c,value:e});b=a.$.param(b);b=a.$.ajax({type:"POST",url:"/gp/product/handle-buy-box/ref\x3ddp_start-bbf_1_glance",data:b,headers:{Accept:"text/html,*/*"}});b.fail(function(a){d.logCount(d.CSM_METRICS.ATTACH_BASE_ATC_FAILURE);d.logError({message:"Base product ATC call failed: "+a.status})});a.trigger("attach:add-base-to-cart",b)};g.isWFMPage=function(){return a.$(m.ALM_BRAND_ID_SELECTOR).val()===m.ALM_WFM_BRAND_ID};g.getAlmBrandId=function(){return a.$(m.ALM_BRAND_ID_SELECTOR).val()};g.getAtcForm=
function(){return g.buyButton.closest("form")};g.isMTAEnabledForAttach=function(){return!1};g.getDeferredFromPromise=function(b){var c=a.$.Deferred();b.then(function(a){c.resolve(a)}).catch(function(a){c.reject(a)});return c.promise()};g.getPromiseFromDeferred=function(a){return new b(function(b,c){a.then(b).fail(c)})};g.bindEventToCallback=function(b,c,d){a.$(b).unbind(c,d);a.$(b).bind(c,d)};g.setupDesktopEgressButtons=function(){g.bindEventToCallback(m.DSS_CART,"click",function(){d.logCount(d.CSM_METRICS.ATTACH_CART_CLICK)});
g.bindEventToCallback(m.DSS_PROCEED,"click",function(){d.logCount(d.CSM_METRICS.ATTACH_CHECKOUT_CLICK);var a=p.PROCEED_TO_CHECKOUT;g.isWFMPage()&&g.isAttachEnabledForWFM&&g.getAlmBrandId()&&(a=p.ALM_PROCEED_TO_CHECKOUT+"?almBrandId\x3d"+g.getAlmBrandId());document.location=g.cartInitiateId?a+"\x26cartInitiateId\x3d"+g.cartInitiateId+"\x26ref_\x3ddp_atch_dss_proceed":a+"\x26ref_\x3ddp_atch_dss_proceed"})};g.isPromise=function(b){return b&&a.$.isFunction(b.then)&&a.$.isFunction(b.catch)};return g});
"use strict";p.when("A","attach-common","attach-logging","attach-baselink","attach-weblabs","attach-variant-registration","attach.utilities.focus-management").register("attach-desktop-warranty-pane",function(a,b,f,d,c,n,t){var e={name:"warranty"},l=e.Selectors={ASIN:"#attach-warranty-asin",PRICE_FORMATTED:"#attach-accessory-price-warranty",PRICE_AMOUNT:"#attach-accessory-price-warranty-amount",BASE_ASIN:'input[name\x3d"items[0.base][asin]"], #ASIN',MARKETPLACE_ID:"#attach-marketplaceId",BASE_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",
ATC_QUANTITY:"#quantity",ATC_DEAL_QUANTITY:"#dealOrderQuantityDropdown",ATC_WARRANTY:".attach-warranty-input",JSON_DATA:"#warrantyEscapedJson",PANE:"#attach-warranty-pane",PANE_IMAGE:"#attach-sheet-warranty-image",PANE_WARRANTY_IMAGE:".attach-warranty-image",PANE_UPSELL_IMAGE:"#attach-sheet-warranty-upsell-image",PANE_ADD_BUTTON:"#attachSiAddCoverage",PANE_NO_BUTTON:"#attachSiNoCoverage",PANE_WARRANTY_TITLE:"#attach-warranty-displayTitle",PANE_EXPERIMENT_DISPLAY:"#attach-warranty-experiment-display",
PANE_REGULAR_DISPLAY:"#attach-warranty-display",WARRANTY_CHECKBOX:".dssMbs__r input[type\x3dcheckbox]",WARRANTY_NOT_ADDED:"#attach-no-warranty-alert",WARRANTY_LEARN_MORE_HEADER:".attach-warranty-learn-more",WARRANTY_BOX:".attach-warranty-box",PANE_LD:"#attach-warranty-pane-ld",PANE_ADD_BUTTON_LD:"#attachSiAddCoverage-ld",PANE_NO_BUTTON_LD:"#attachSiNoCoverage-ld"};e.getWarrantyLoggingPayload=function(){var d=a.$(l.ASIN).val(),e=a.$(l.PRICE_FORMATTED),f=a.$(l.PRICE_AMOUNT);return!c.servicesInterstitialDeprecated()&&
b.elementExists(f)?{asin:d,priceFormatted:e.text().trim(),priceDecimal:parseFloat(f.val())||null,currencySymbol:a.$(l.BASE_CURRENCY_SYMBOL).val()||null}:{asin:d,priceFormatted:e.text().trim(),priceDecimal:null,currencySymbol:null}};e.appendWarrantyToATCForm=function(e,q){if(a.$(l.BASE_ASIN).val()&&e&&q){var g=b.getAtcForm();g.append('\x3cinput type\x3d"hidden" id\x3d"useABBHandler" class\x3d"attach-warranty-input" name\x3d"useABBHandler" value\x3d"1" /\x3e');var f=1;c.isWarrantyTwisterPlusDesktopEnabled()&&
(f+=1);f=g.find("input[name^\x3d'offeringID']").length+f;var n=a.$(l.ATC_QUANTITY).val()||1,t="quantity."+f,p="asin."+f;g.find('input[name\x3d"'+t+'"]').remove();g.find('input[name\x3d"'+p+'"]').remove();g.append('\x3cinput type\x3d"hidden" id\x3d"'+t+'" name\x3d"'+t+'" value\x3d"'+n+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" id\x3d"'+p+'" name\x3d"'+p+'" value\x3d"'+e+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" id\x3d"offeringID.'+
f+'" name\x3d"offeringID.'+f+'" value\x3d"'+q+'" class\x3d"attach-warranty-input"/\x3e');g.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][quantity]" value\x3d"'+n+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][asin]" value\x3d"'+e+'" class\x3d"attach-warranty-input" /\x3e');g.append('\x3cinput type\x3d"hidden" name\x3d"items[0.warranty][offerListingId]" value\x3d"'+q+'" class\x3d"attach-warranty-input" /\x3e');e=g.find('input[name\x3d"itemCount"]');
0===e.length?g.append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+f+'"\x3e'):e[0].value=f;a.$("#atch__bl").length&&d.createBaseLinkFormFields(f+1,g)}};e.clearWarrantyFromATCForm=function(){b.getAtcForm().find(l.ATC_WARRANTY).remove()};e.load=function(d){if(c.servicesInterstitialDeprecated()){if(b.elementExists(l.PANE))a.$(l.PANE).removeClass("aok-hidden");else return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"});if(b.selectedBaseLightningDeal)if(b.elementExists(l.PANE_LD))a.$(l.PANE+
", "+l.PANE_LD).toggleClass("aok-hidden");else return b.reject(b.FailureModes.UNBIND_ATC);b.elementExists(l.PANE_EXPERIMENT_DISPLAY)&&a.$(l.PANE_EXPERIMENT_DISPLAY).remove()}else{if(b.elementExists(l.JSON_DATA)){var g=b.unescapeJson(a.$(l.JSON_DATA).val());g=JSON.parse(g)}return g?e.renderClientSide(d,g):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_WARRANTY_LOAD_FAILURE"})}};e.renderClientSide=function(b,c){var d="",e=c.baseASIN,g="dp_atch_dss_w_lm_"+e+"_"+c.asin,f="dp_atch_dss_w_r_"+
e+"_"+c.asin;e="dp_atch_dss_w_lm_"+e+"_"+c.asin;var q=a.$("#stringTranslation-si-warranty-title").val(),h=a.$("#stringTranslation-si-accident-protection").val(),l=a.$("#stringTranslation-si-from").val(),n=a.$("#stringTranslation-si-rating-out-of-5-stars").val(),t=a.$("#stringTranslation-item-added-to-cart").val(),p=a.$("#stringTranslation-desktop-attach-accessory-failed-add-to-cart").val(),r=a.$("#stringTranslation-desktop-attach-accessory-retry").val(),k=a.$("#stringTranslation-si-add-coverage").val(),
x=a.$("#stringTranslation-si-no-thanks").val(),w=a.$("#stringTranslation-services-bundle-detail-link").val();d+='   \x3cdiv id\x3d"attach-warranty-pane" class\x3d"a-section"\x3e\n       \x3cdiv id\x3d"attach-warranty" class\x3d"a-section attach-sidesheet-card"\x3e\n           \x3cinput type\x3d"hidden" name\x3d"" value\x3d"'+c.asin+'" id\x3d"attach-warranty-asin"\x3e\n           \x3ch1 class\x3d"a-size-medium a-spacing-none a-color-base a-text-center"\x3e'+q+'\x3c/h1\x3e\n           \x3chr class\x3d"a-spacing-base a-spacing-top-small a-divider-normal attach-warranty-divider"\x3e\n           \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n';
null!==c.thumbImage&&(d+='                \x3cdiv class\x3d"a-column a-span2"\x3e\n                    \x3cimg id\x3d"attach-sheet-warranty-image" src\x3d"" data-image-url\x3d"'+c.thumbImage+'" class\x3d"attach-accessory-image"\x3e\n                \x3c/div\x3e\n');d+='                \x3cdiv class\x3d"a-column a-span10 a-span-last"\x3e\n                    \x3ca class\x3d"a-size-large a-spacing-micro a-link-normal a-color-base" id\x3d"attach-warranty-displayTitle" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+g+'"\x3e\n                        \x3cstrong\x3e'+(null!==c.displayTitle?c.displayTitle:h.replace("${brandName}",c.brandName))+'\x3c/strong\x3e\n                    \x3c/a\x3e\n                    \x3cbr\x3e\n                    \x3cspan class\x3d"a-size-base a-color-secondary"\x3e'+l+" "+c.merchantName+"\x3c/span\x3e\n";Number(c.averageRating)&&Number(c.numReviews)&&Number(c.numFullStars)&&"boolean"===typeof c.hasHalfStar&&(g=n.replace("${averageRating}",c.averageRating),d+='                    \x3cdiv class\x3d"a-icon-row a-spacing-micro"\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+
c.asin+"/ref\x3d"+f+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            \x3ci class\x3d"a-icon a-icon-star a-star-'+c.numFullStars+(c.hasHalfStar?"-5":"")+'"\x3e\x3cspan class\x3d"a-icon-alt"\x3e'+g+'\x3c/span\x3e\x3c/i\x3e\n                        \x3c/a\x3e\n                        \x3ca class\x3d"a-link-normal" href\x3d"/product-reviews/'+c.asin+"/ref\x3d"+f+'?ie\x3dUTF8\x26amp;showViewpoints\x3d1"\x3e\n                            '+c.numReviews+"\n                        \x3c/a\x3e\n                    \x3c/div\x3e\n");
null!==c.buyingPriceAmount&&(d+='                    \x3cinput id\x3d"attach-accessory-price-warranty-amount" type\x3d"hidden" value\x3d"'+c.buyingPriceAmount+'"\x3e\n');d+='                    \x3cspan id\x3d"attach-accessory-price-warranty" class\x3d"a-size-large a-color-base attach-warranty-price"\x3e'+c.formattedBuyingPrice+'\x3c/span\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3cdiv class\x3d"a-row"\x3e\n                \x3cdiv class\x3d"a-column a-span12"\x3e\n                    \x3cdiv id\x3d"warrantyBulletRowWrapper" class\x3d"a-section"\x3e\n                        \x3cdiv class\x3d"a-row a-spacing-micro"\x3e\n                            \x3cul class\x3d"a-unordered-list a-vertical a-spacing-none"\x3e\n';
for(f=0;f<c.bulletPoints.length;f++)d+='                                \x3cli\x3e\x3cspan class\x3d"a-list-item"\x3e'+c.bulletPoints[f].text+"\x3c/span\x3e\x3c/li\x3e\n";d+='                            \x3c/ul\x3e\n                        \x3c/div\x3e\n                        \x3cdiv id\x3d"attachWarrantyButtonWrapper" class\x3d"a-section a-box-inner a-color-alternate-background"\x3e\n                            \x3cdiv id\x3d"attachWarrantyButtonInnerWrapper" class\x3d"a-section a-box-inner"\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_alert_warranty" class\x3d"a-box a-alert-inline a-alert-inline-success aok-hidden attach_add_accessory_alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base a-color-success"\x3e'+
t+'\x3c/span\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cdiv id\x3d"attach_add_accessory_error_warranty" class\x3d"a-box a-alert-inline a-alert-inline-error aok-hidden attach_add_accessory_alert" aria-live\x3d"assertive" role\x3d"alert"\x3e\n                                    \x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\n                                        \x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e\n                                        \x3cdiv class\x3d"a-alert-content"\x3e\n                                            \x3cspan class\x3d"a-size-base"\x3e\n                                                '+
p+'\x3cbr\x3e\n                                            \x3c/span\x3e\n                                            \x3ca class\x3d"a-link-normal attach-add-to-cart-retry" href\x3d"#"\x3e\n                                                '+r+'\n                                            \x3c/a\x3e\n                                        \x3c/div\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                                \x3cspan class\x3d"attach_add_accessory_spinner_warranty a-spinner a-spinner-small attach-spinner aok-hidden"\x3e\x3c/span\x3e\n                                \x3cdiv class\x3d"a-section attach-warranty-button-row"\x3e\n                                    \x3cdiv class\x3d"a-button-stack"\x3e\n                                        \x3cspan id\x3d"attachSiAddCoverage" class\x3d"a-button a-button-primary attach-si-add-client"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiAddCoverage-announce" data-asin\x3d"'+
c.asin+'" data-offering-id\x3d"'+c.oid+'" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+k+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                        \x3cspan id\x3d"attachSiNoCoverage" class\x3d"a-button"\x3e\n                                            \x3cspan class\x3d"a-button-inner"\x3e\n                                                \x3cbutton id\x3d"attachSiNoCoverage-announce" class\x3d"a-button-text" type\x3d"button"\x3e\n                                                    '+
x+'\n                                                \x3c/button\x3e\n                                            \x3c/span\x3e\n                                        \x3c/span\x3e\n                                    \x3c/div\x3e\n                                \x3c/div\x3e\n                            \x3c/div\x3e\n                        \x3c/div\x3e\n                    \x3c/div\x3e\n                \x3c/div\x3e\n            \x3c/div\x3e\n            \x3ca class\x3d"a-link-normal" target\x3d"_blank" rel\x3d"noopener" href\x3d"/dp/'+
c.asin+"/ref\x3d"+e+'"\x3e\n                '+w+"\n            \x3c/a\x3e\n        \x3c/div\x3e\n    \x3c/div\x3e\n";b.$container.append(d)};e.onAttachAddBaseToCart=function(a){b.isPromise(a)?a.finally(e.clearWarrantyFromATCForm):a.always(e.clearWarrantyFromATCForm)};e.closeSheetAndSubmitForm=function(){if(c.isDssMbsEnhancementEnabled()){var d=a.$(l.WARRANTY_CHECKBOX+":checked").get(0),q=b.getInputValueByNameAndIndex("asin",d.name);d=b.getInputValueByNameAndIndex("warrantyPrice",d.name);f.logWarrantyAddToCart(f.getWarrantyPayload(q,
d))}else f.logWarrantyAddToCart(e.getWarrantyLoggingPayload());c.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.addBaseProduct();e.sheet.next()};e.setSelectedWarrantyOptionDataOnATCForm=function(){var c=a.$(l.WARRANTY_CHECKBOX+":checked").get(0);if(c){var d=c.name;c=b.getInputValueByNameAndIndex("asin",d);d=b.getInputValueByNameAndIndex("offerId",d);e.appendWarrantyToATCForm(c,d);e.closeSheetAndSubmitForm()}else a.$(l.WARRANTY_NOT_ADDED).show()};e.setup=function(g){e.sheet=g;a.$(l.PANE).hide();
if(c.isDssMbsEnhancementEnabled())a.loadImageManually(a.$(l.PANE_WARRANTY_IMAGE).filter("[data-a-image-source]")),a.$(l.WARRANTY_NOT_ADDED).hide(),a.$(l.PANE).find(l.WARRANTY_CHECKBOX).each(function(){a.$(this).prop("checked",!1)});else{var q=a.$(l.PANE_IMAGE).attr("data-image-url");a.$(l.PANE_IMAGE).attr("src",q)}a.$(l.PANE_ADD_BUTTON).click(function(){if(c.isDssMbsEnhancementEnabled())e.setSelectedWarrantyOptionDataOnATCForm();else{var b=a.$(this).find("button");c.servicesInterstitialDeprecated()&&
(b=a.$(this).find("[data-asin]"));var d=b.attr("data-asin");b=b.attr("data-offering-id");e.appendWarrantyToATCForm(d,b);e.closeSheetAndSubmitForm()}});c.isDssMbsEnhancementEnabled()&&(a.$(l.WARRANTY_CHECKBOX).change(function(c){var d=this;c="cn";var e=d.name,g=b.getInputValueByNameAndIndex("asin",e);d.checked&&(c="cy",a.$(l.WARRANTY_NOT_ADDED).hide(),a.$(l.PANE).find(l.WARRANTY_CHECKBOX).each(function(){d!==this&&a.$(this).prop("checked",!1)}));f.logWarrantyWidgetInteraction({index:e,asin:g,action:c})}),
a.$(l.WARRANTY_LEARN_MORE_HEADER).click(function(){var c=this.closest(l.WARRANTY_BOX);c=a.$(c).find(l.WARRANTY_CHECKBOX)[0].name;var d=b.getInputValueByNameAndIndex("asin",c);f.logWarrantyWidgetInteraction({index:c,asin:d,action:"LEARN_MORE_CLICK"})}));a.$(l.PANE_NO_BUTTON).click(function(){c.servicesInterstitialDeprecated()&&!b.hasAccessories()||b.addBaseProduct();g.next()});a.$(l.PANE_ADD_BUTTON_LD).click(function(){var b=a.$(l.PANE_ADD_BUTTON_LD).find("input");b={warrantyAsin:b.attr("data-asin"),
offeringId:b.attr("data-offering-id"),addWarranty:1,quantity:a.$(l.ATC_DEAL_QUANTITY).val()||1};b.baseItemAsin=a.$(l.BASE_ASIN).val();d.addLinkedWarranty(b,function(b){f.logCount(f.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_SUCCESS);p.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});a.$("#attach-sheet-warranty-image").clone().removeAttr("class").removeAttr("id").attr("alt","warranty image").appendTo("#attach-ld-image-container");g.next()},function(a){f.logCount(f.CSM_METRICS.ATTACH_BASE_LD_WARRANTY_FAILURE);
g.next()})});a.$(l.PANE_NO_BUTTON_LD).click(function(){g.next()});a.off("attach:add-base-to-cart",e.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",e.onAttachAddBaseToCart)};e.show=function(){b.selectedBaseLightningDeal?b.selectedBaseLightningDeal&&a.$(l.PANE_LD).show():a.$(l.PANE).removeClass("aok-hidden");a.$(l.PANE).fadeIn(400,e.setFocus);c.isDssMbsEnhancementEnabled()?a.$(l.PANE).find(l.WARRANTY_CHECKBOX).each(function(){var a=b.getInputValueByNameAndIndex("asin",this.name),c=b.getInputValueByNameAndIndex("warrantyPrice",
this.name);f.logWarrantyImpression(f.getWarrantyPayload(a,c))}):f.logWarrantyImpression(e.getWarrantyLoggingPayload());a.$(l.PANE).find("h1").first().attr("id","attach-warranty-header");e.sheet&&e.sheet.$container&&e.sheet.$container.attr("aria-labelledby","attach-warranty-header")};e.hide=function(){a.$(l.PANE+", "+l.PANE_LD).fadeOut()};e.setFocus=function(){t.focusDescendant(a.$(l.PANE).get(0),"first");t.focusDescendant(a.$(l.PANE_LD).get(0),"first")};return e});"use strict";p.when("A","attach-common",
"attach-weblabs","attach-maple","attach-logging","attach-variant-registration","attach.utilities.focus-management","attach.amazonapi.client","attach.amazonapi.cart.add-items","attach.amazonapi.cart.summary","attach.amazonapi.deals.claim-and-add-to-cart","attach.amazonapi.products.productV2","attach.amazonapi.products.media-builder","attach.utilities.strings","attach.utilities.data-driven-weblabs").register("attach-desktop-accessories-pane",function(a,b,f,d,c,n,t,e,l,g,q,E,m,C,F){function v(b){b=a.$('\x3cdiv class\x3d"a-alert-content"\x3e\x3c/div\x3e').append(b);
var c=a.$('\x3ci class\x3d"a-icon a-icon-alert"\x3e\x3c/i\x3e');b=a.$('\x3cdiv class\x3d"a-box-inner a-alert-container"\x3e\x3c/div\x3e').append(c).append(b);b=a.$('\x3cdiv class\x3d"a-box a-alert a-alert-error" role\x3d"alert"\x3e\x3c/div\x3e').append(b);return a.$('\x3cdiv class\x3d"attach-sidesheet-card attach-add-to-cart-message-card aok-hidden"\x3e\x3c/div\x3e').append(b)}var h={name:"accessories"},u=!0,B=!1,A,D=!1;h.isEmptyAccessoryList=!1;var z=h.Endpoints={RENDER:"/gp/product/ajax?experienceId\x3dattach"},
k=h.Selectors={BASE_ASIN:"#attach-baseAsin",QUANTITY:"#quantity",ACCESSORY_ASIN_LIST:"#attach-asin-list",MARKETPLACE_ID:"#attach-marketplaceId",LANGUAGE_OF_PREFRENCE:"#attach-languageOfPreference",ALM_ATC_BUTTON:".primary-VUZHIFdob2xlIEZvb2Rz-btn",PANE:"#attach-accessory-pane",PANE_CLOSE_BUTTON:"#attach-close_sideSheet-link",PANE_CART_BASE_ALERT_IMAGE_AREA:"#attach-added-to-cart-alert-and-image-area",PANE_CART_BASE_ALERT:"#attachDisplayAddBaseAlert",PANE_CART_BASE_SUCCESS_ALERT:"#attachAddBaseItemSuccessAlert",
PANE_CART_BASE_ERROR_ALERT:"#attachAddBaseItemErrorAlert",PANE_CART_BASE_INITIAL_IMAGE:"#attach-sheet-view-base-product-image",PANE_CART_BASE_HUC_IMAGE:".huc-image-wrapper",PANE_CART_BLOCK:".attach-primary-atc-confirm-box",PANE_CART_BLOCK_INNER:"#attach-added-to-cart-message",PANE_CART_BLOCK_SUBTOTAL_LABEL:"#attach-accessory-cart-total-string",PANE_CART_BLOCK_SUBTOTAL_PRICE:"#attach-accessory-cart-subtotal",PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE:"#attach-core-free-shipping-message",PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE:"#attach-cart-description-failure",
PANE_CART_BLOCK_PROCEED_TO_CHECKOUT:"#attach-accessory-proceed-to-checkout-text",PANE_CART_SPINNER:"#attach-add-to-cart-message-spinner",PANE_VIEW_CART_BUTTON:"#attach-sidesheet-view-cart-button",PANE_CHECKOUT_BUTTON:"#attach-sidesheet-checkout-button",PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:"#attach-string-cart-subtotal-single",PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE:"#attach-string-cart-subtotal-multiple",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:"#attach-string-cart-ptc-button-single",PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE:"#attach-string-cart-ptc-button-multiple",
PANE_CART_GENERIC_ERROR_MESSAGE:"#attach-string-cart-generic-error",PANE_CART_TRY_AGAIN_MESSAGE:"#attach-string-cart-try-again",PANE_HUC_MESSAGE:".attach-add-to-cart-message-card",PANE_ACCESORIES_CARD:"#attach-accessories",PANE_CATEGORIZED_ACCESSORIES_TILES_CARD:"#attach-categorized-accessories-tiles",PANE_ACCESSORY_RETRY_BUTTON:".attach-add-to-cart-retry",PANE_ACCESSORY_ADD_DECLARATIVES:'.a-declarative[data-action\x3d"attach-accessory-add"]',PANE_ACCESSORY_IMAGE:".attach-accessory-image",PANE_ACCESSORY_ASIN:".attach-accessory-asin",
PANE_ACCESSORY_ADD_BUTTON_PREFIX:"#attach_add_accessory_button_",PANE_ACCESSORY_ADD_SPINNER_PREFIX:"#attach_add_accessory_spinner_",PANE_ACCESSORY_ADD_SUCCESS_PREFIX:"#attach_add_accessory_alert_",PANE_ACCESSORY_ADD_ERROR_PREFIX:"#attach_add_accessory_error_",PANE_ACCESSORY_FIRST_ASIN:"#attach_accessory_dp_1",PANE_CATEGORIZED_ACCESSORIES_CARD:"#attach-categorized-accessories",PANE_ACCESSORY_TITLE:".attach-accessory-title",PANE_ACCESSORY_TILE_ITEM:".attach-accessory-tile",PANE_ACCESSORY_TILE_ITEM_PREFIX:"#attach-accessory-tile-",
PANE_ACCESSORY_CAROUSEL:"#attach-accessories .a-carousel-container",PANE_ACCESSORY_CARD:"#attach-accessories.card-expandable",PANE_ACCESSORY_CARD_SEE_MORE:".card-toggle-see-more",PANE_ACCESSORY_CARD_SEE_LESS:".card-toggle-see-less",PANE_ACCESSORY_CARD_PEEK_CONTENT:".card-peek-content",PANE_ACCESSORY_CARD_EXPAND_CONTENT:".card-expand-content",PANE_MAPLE_SLOT:"#maple-dss-slot",PANE__DATA_CATEGORY_VIEW:"categoryView",PANE__DATA_ASIN_INDEX:"asinindex",PANE_ACCESSORY_COUPON:".attach-accessory-coupon",
PANE_ACCESSORY_COUPON_PREFIX:"#attach-accessory-coupon-",PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS:".attach-coupon-unclipped",PANE_ACCESSORY_COUPON_CLIPPED_CLASS:".attach-coupon-clipped",PANE_ACCESSORY_COUPON_ERROR_CLASS:".attach-coupon-error",PANE_ACCESSORY_COUPON_BADGE_CLASS:".attach-coupon-short-badge",PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS:".attach-coupon-badge-unclipped",PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS:".attach-coupon-badge-clipped",PANE_ACCESSORY_LIGHTNING_DEAL:".attach-accessory-lightning-deal",
PANE_ACCESSORY_LIGHTNING_DEAL_PREFIX:"#attach-accessory-lightning-deal-",PANE_ACCESSORY_LIGHTNING_DEAL_JOIN_WAITLIST_PREFIX:"#attach-accessory-deal-on-waitlist-",PANE_ACCESSORY_CSRF_TOKEN:"#attach-accessory-deal-csrf-token",DEBUG_IS_DEBUG:"#attach-debug-isDebug",DEBUG_QUERY_STRING:"#attach-debug-queryString"},x=h.AccessoryAddStatus={INITIAL:0,ADDING:1,SUCCESS:2,ERROR:3};h.setShouldIncludeMaple=function(a){B=a};h.load=function(w){p.now("attach-external-atc-interceptor").execute(function(a){A=a});a.trigger("LOADED_ACCESSORIES_PANE_SUCCESSFULLY");
var e=a.$.Deferred();p.now("dp-util-cookie").execute(function(c){c&&c("session-id")!==a.$("#attach-sessionId").val()&&b.rejectPromise(e,b.FailureModes.TRANSITION_TO_HUC,{count:"ATTACH_DSS_INVALID_SESSION_ID",information:"Unexpected session ID received; expected "+a.$("#attach-sessionId").val()+" but cookie value was "+c("session-id")})});var g={asin:a.$(k.BASE_ASIN).val()};b.isWFMPage()&&f.isAttachEnabledForWFM()&&(g.fpw="alm",g.almBrandId=b.getAlmBrandId());g=a.$.get(z.RENDER,g);if(B){b.isCurrencyOfPreferenceApplied()&&
d.suppressMathBox();var q=d.loadBannerHTML()}a.$.when(g,q).done(function(d,g){var f=a.$(d[0].trim()),G=!f.is(k.PANE);h.isEmptyAccessoryList=0===f.find(k.PANE_ACCESSORY_ASIN).length;G||h.isEmptyAccessoryList?b.rejectPromise(e,b.FailureModes.TRANSITION_TO_HUC,{count:["ATTACH_DSS_RENDER_FAILURE","ATTACH_DSS_RENDER_FAILURE_INVALID_HTML"],information:"Failed to render DSS: isPaneMissing\x3d"+G+" isEmptyAccessoryList\x3d"+h.isEmptyAccessoryList}):(w.$container.append(a.$(d[0]).get(0)),g&&0<g.trim().length&&
(g=a.$(g),d=g.not("script"),g=g.filter("script"),b.elementExists(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)?d.insertAfter(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD):d.insertAfter(k.PANE_ACCESORIES_CARD),d.wrap('\x3cdiv id\x3d"maple-dss-slot"\x3e\x3cdiv id\x3d"maple-dss-card" class\x3d"a-section attach-sidesheet-card"\x3e\x3c/div\x3e\x3c/div\x3e'),g.each(function(){a.$.globalEval(this.innerHTML)}),c.logCount("ATTACH_DSS_MAPLE_RENDERED")),e.resolve())}).fail(function(){b.rejectPromise(e,b.FailureModes.TRANSITION_TO_HUC,
{count:"ATTACH_DSS_RENDER_FAILURE",information:"Failed to render DSS: network request failed"})});return e.promise()};h.onAttachAddBaseToCart=function(a){u=!1;b.isPromise(a)||(a=b.getPromiseFromDeferred(a));a.then(h.handleAddBaseAndGetCartDescription).catch(function(a){p.logError(a,"Base product add to cart failed: ","ERROR","attach-desktop-accessories-pane");h.sheet.fail(b.FailureModes.ERROR_500)})};h.runOnceSetup=function(){D||(D=!0,a.declarative("attach-accessory-add","click",function(b){var d=
b.$currentTarget,w=b.data,e=w.a,g=w.oid;w=w.isLightningDeal;c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_CLICK);c.beginLatencyCapture(c.CSM_METRICS.ATTACH_UPSELL_ATC_LATENCY);b=!0===a.$(k.PANE_CATEGORIZED_ACCESSORIES_CARD).data(k.PANE__DATA_CATEGORY_VIEW)?a.$(b.$target).data(k.PANE__DATA_ASIN_INDEX):a.$(k.PANE_ACCESSORY_ADD_DECLARATIVES).index(d);w?h.addAccessoryToCartWithLightningDeal(b,e):h.addAccessoryToCart(e,g,b)}))};h.setup=function(c){h.runOnceSetup();a.$(k.PANE).hide();h.sheet=c;a.off("attach:add-base-to-cart",
h.onAttachAddBaseToCart);a.on("attach:add-base-to-cart",h.onAttachAddBaseToCart);b.setupDesktopEgressButtons();a.$(k.PANE_ACCESSORY_RETRY_BUTTON).click(function(){var b=a.$(this).attr("data-asin"),c=a.$(this).attr("data-oid"),d=a.$(this).attr("data-idx");h.addAccessoryToCart(b,c,d)});a.$(k.PANE).find(k.PANE_CLOSE_BUTTON).appendTo(k.PANE_CART_BLOCK);a.$(k.PANE_CLOSE_BUTTON).click(c.next);a.$(k.PANE_ACCESSORY_IMAGE).each(function(){a.$(this).attr("src",a.$(this).attr("data-image-url"))});f.isShowAccessoryCouponsDssEnabled()&&
h.initializeCoupons();a.$(k.PANE_ACCESSORY_LIGHTNING_DEAL).each(function(){var b=a.$(this).data().idx;h.updateLightningDealTimer(b);h.initializeLightningDealStatusRefresher(b)});0===a.$(k.PANE_CART_GENERIC_ERROR_MESSAGE).length&&a.$(k.PANE_CART_BLOCK).append(a.$("\x3cspan\x3e\x3c/span\x3e").attr("id","attach-string-cart-generic-error").addClass("aok-hidden").text(a.$(".attach_add_accessory_alert.a-alert-inline-error .a-alert-content span").first().text()));0===a.$(k.PANE_CART_TRY_AGAIN_MESSAGE).length&&
a.$(k.PANE_CART_BLOCK).append(a.$("\x3cspan\x3e\x3c/span\x3e").attr("id","attach-string-cart-try-again").addClass("aok-hidden").text(a.$(".attach_add_accessory_alert.a-alert-inline-error .attach-add-to-cart-retry").first().text()))};h.show=function(){b.selectedBaseLightningDeal||b.isWFMPage()||!u||b.addBaseProduct();a.$(k.PANE).css({opacity:0}).show().animate({opacity:1},500,"linear");if(b.selectedBaseLightningDeal)a.$(k.PANE_CART_BLOCK).addClass("aok-hidden"),a.$("#attach-accessory-pane").css("height",
a.$(r).height()-161);else{var c=a.$(k.PANE_CART_BLOCK_INNER);c.find("div").addClass("aok-hidden");c.append(a.$(k.PANE_CART_SPINNER).removeClass("aok-hidden"))}h.initializeAccessoriesDisplay();p.now("attach-categorized-cards").execute(function(a){a!==y&&a.initializeCategorizedCards()})};h.hide=function(){a.$(k.PANE).hide();a.$(k.PANE_CART_SPINNER).addClass("aok-hidden");a.$(k.PANE).find(k.ALM_ATC_BUTTON).removeClass("a-button-focus");a.$(k.PANE_HUC_MESSAGE).remove();a.$(k.PANE_ACCESSORY_ASIN).each(function(b,
c){(c=a.$(c).data(k.PANE__DATA_ASIN_INDEX))&&(b=c);h.updateAccessoryStatus(b,x.INITIAL)});a.trigger("RESET_SECONDARY_SIDE_SHEET_MODULE");A&&A.unloadAttachModule();a.trigger("aloha:detailPage:reappear");u=!0};h.updateNavCartDisplayQuantity=function(b){var c=Number(b);b=isNaN(c)?"":100>c?b:"99+";a.$("#nav-cart-count").toggleClass("nav-cart-0",0===c).toggleClass("nav-cart-1",1<=c&&10>c).toggleClass("nav-cart-10",10<=c&&20>c).toggleClass("nav-cart-20",20<=c&&100>c).toggleClass("nav-cart-100",100<=c).text(b)};
h.createCartSubtotalLabelString=function(b){var c=a.$(1==b?k.PANE_CART_TEMPLATE_SUBTOTAL_SINGLE:k.PANE_CART_TEMPLATE_SUBTOTAL_MULTIPLE).val();return C.substituteParameters(c,{quantity:b})};h.createProceedToCheckoutString=function(b){var c=a.$(1==b?k.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_SINGLE:k.PANE_CART_TEMPLATE_PROCEED_TO_CHECKOUT_MULTIPLE).val();return C.substituteParameters(c,{quantity:b})};h.updateCartSummary=function(){return g.get([g.CART_TYPE_RETAIL]).then(h.handleCartDescription).catch(h.handleCartDescriptionError)};
h.updateALMCartSummary=function(){g.get([g.CART_TYPE_LOCAL_MARKET]).then(h.handleCartDescription).catch(h.handleCartDescriptionError)};h.handleAddBaseAndGetCartDescription=function(b){c.logCount(c.CSM_METRICS.ATTACH_BASE_ATC_SUCCESS);b.request?h.renderBaseProductStatus(b):(b=a.$(b),b.find("#sw-atc-confirmation").length?(h.renderFallbackSmartWagonFeedback(b),h.renderFallbackSmartWagonBaseAddStatusIcon(b)):(h.renderHUCFeedback(b),h.renderBaseAddStatusIcon(b)));if(A)try{var d=a.$(k.PANE_ACCESSORY_ASIN).map(function(){return this.value}).get();
A.loadAttachModule(d)}catch(H){p.logError(H,"Could not update ABB/DSS external interceptor: ","ERROR","attach-desktop-accessories-pane")}h.sheet.$container.attr("aria-labelledby","attachDisplayAddBaseAlert");t.focusDescendant(a.$(k.PANE).get(0),"first");return h.updateCartSummary()};h.handleCartDescription=function(w){var q=w.entity.summary[0]||g.EMPTY_CART_RETAIL,l=q.subtotal;q=q.itemCount;var n=Number(l.amount);l=e.formatMoney(l);var m=h.createCartSubtotalLabelString(q),t=h.createProceedToCheckoutString(q);
h.updateNavCartDisplayQuantity(q);a.$(k.PANE_CART_BLOCK_SUBTOTAL_LABEL).html(m);a.$(k.PANE_CART_BLOCK_SUBTOTAL_PRICE).html(l);a.$(k.PANE_CART_BLOCK_PROCEED_TO_CHECKOUT).html(t);a.$(k.PANE_CHECKOUT_BUTTON).removeClass("aok-hidden");a.$(k.PANE_VIEW_CART_BUTTON).removeClass("a-button-primary");a.$("#attach-customerId").val()&&p.when("attach-preinitiate-checkout").execute(function(a){b.cartInitiateId=a.getCartInitiateId();a.preinitiateCheckout(b.cartInitiateId)});b.isAttachEnabledForWFM=f.isAttachEnabledForWFM();
B&&d.updateMathBox(n);b.selectedBaseLightningDeal||(a.$(k.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(k.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(k.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).addClass("aok-hidden"));a.delay(h.revealIMBMessages,200);p.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});c.logCount(c.CSM_METRICS.ATTACH_GET_CART_DESCRIPTION_SUCCESS);return w};h.handleCartDescriptionError=function(d){p.logError(d,"Could not process the cart description: ",
"ERROR","attach-desktop-accessories-pane");c.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE");b.selectedBaseLightningDeal||(a.$(k.PANE_CART_BLOCK_INNER).find("div").removeClass("aok-hidden"),a.$(k.PANE_CART_SPINNER).addClass("aok-hidden"),a.$(k.PANE_CART_BLOCK_SUBTOTAL_LABEL).empty(),a.$(k.PANE_CART_BLOCK_SUBTOTAL_PRICE).empty(),a.$(k.PANE_CHECKOUT_BUTTON).addClass("aok-hidden"),a.$(k.PANE_VIEW_CART_BUTTON).addClass("a-button-primary"),a.$(k.PANE_CART_BLOCK_DESCRIPTION_FAILURE_MESSAGE).removeClass("aok-hidden"))};
h.updateAccessoryStatus=function(b,c){a.$(k.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).toggleClass("aok-hidden",c!==x.INITIAL);a.$(k.PANE_ACCESSORY_ADD_SPINNER_PREFIX+b).toggleClass("aok-hidden",c!==x.ADDING);a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).toggleClass("aok-hidden",c!==x.SUCCESS);a.$(k.PANE_ACCESSORY_ADD_ERROR_PREFIX+b).toggleClass("aok-hidden",c!==x.ERROR);a.$("#tile-add-accessory-badge-"+b).toggleClass("aok-hidden",c!==x.SUCCESS);a.$("#attach-accessory-tile-"+b).toggleClass("in-cart",c===x.SUCCESS);
b=a.$("#attach-accessory-asin-"+(b+1)).parent();t.focusDescendant(b.get(0),"first")};h.addAccessoryToCart=function(d,e,g){h.updateAccessoryStatus(g,x.ADDING);var w=a.$(k.BASE_ASIN).val(),f=parseInt(a.$(k.QUANTITY).val())||1,q=y;b.isDiscriminatedOffersEnabled()&&(q={itemAssociation:{programType:"Attach",renderType:"renderAll",associatedItemId:w,deleteConstraint:{mutuallyInclusive:!1}}});l.addItems([{asin:d,offerListingId:e,quantity:f,additionalParameters:q}],"dp_atch_dss_atc_ce").then(function(a){if(a.type===
l.RESPONSE_TYPE_SUCCESS)return h.updateCartSummary();p.logError(Error(a.entity.details.message),"Could not add accessory via AmazonAPI ("+d+"):","ERROR","attach-desktop-accessories-pane");throw a.entity.details.message;}).then(function(b){h.updateAccessoryStatus(g,x.SUCCESS);c.logAccessoryAddToCart(h.getAccessoryLoggingData(g));c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);a.trigger("UPSELL_ASIN_ADDED_TO_CART",g);p.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()})}).catch(function(){c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);
h.updateAccessoryStatus(g,x.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",g)})};h.addAccessoryToCartWithLightningDeal=function(d,e){h.updateAccessoryStatus(d,x.ADDING);var w=a.$("#attach-accessory-claim-deal-url-"+d).val();w=h.getDealId(w);q.claimAndAddDeal(w,e).then(function(e){var w=e.entity;e=w.customerState;if(!0!==w.claimed&&"INWAITLIST"!==e)return b.reject(null,{count:"ATTACH_DSS_ADD_ACCESSORY_NOT_IN_CART"});"INWAITLIST"===e?a.$(k.PANE_ACCESSORY_ADD_SPINNER_PREFIX+d).addClass("aok-hidden"):
h.updateAccessoryStatus(d,x.SUCCESS);c.logAccessoryAddToCart(h.getAccessoryLoggingData(d));c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_SUCCESS);w=w.msUntilExpiration;h.handleLightningDealAddToCart(d,w?w:900,e);a.trigger("UPSELL_ASIN_ADDED_TO_CART",d);p.when("EWC").execute("attach-everywhere-cart",function(a){a.refresh()});h.updateCartSummary()}).catch(function(){c.logCount(c.CSM_METRICS.ATTACH_UPSELL_ATC_FAILURE);h.updateAccessoryStatus(d,x.ERROR);a.trigger("UPSELL_ASIN_NOT_ADDED_TO_CART",d)})};h.getDealId=
function(a){return(a=a.match(/\/api\/marketplaces\/\w+\/deals\/(.*?)\/claim-and-add-to-cart/))?a[1]:y};h.revealIMBMessages=function(){var b=a.$(k.PANE_HUC_MESSAGE);if(b.hasClass("aok-hidden")){b.css({position:"absolute",top:0}).removeClass("aok-hidden");var c=b.children().height();0<c&&b.css({marginTop:-1*(c+4)+"px",position:"initial"}).animate({marginTop:"14px"},800)}};h.renderHUCFeedback=function(d){var e=d.find("#hlb-ship-message");d=a.$().add(d.find("#huc-v2-message-group")).add(d.find("#hlb-imb"));
f.isCoreFreeShippingMessageEnabled()&&b.elementExists(e)&&a.$(k.PANE_CART_BLOCK_CORE_FREE_SHIPPING_MESSAGE).html(e.html());0<d.length&&(e=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e"),e.append(d),e.insertAfter(k.PANE_CART_BLOCK),e.find(".a-declarative a").unwrap(),e.find(".a-declarative span").removeClass("a-color-link huc-cursor-pointer").unwrap(),e.find(".sc-action-quantity").hide(),(e=d.find(".a-alert-heading").text())&&c.logDSSWarningMessage(e))};
h.renderBaseAddStatusIcon=function(c){var d;b.elementExists(c.find("#huc-v2-order-row-confirm-text"))?d=c.find("#huc-v2-order-row-confirm-text").hasClass("a-color-error"):b.elementExists(c.find("#hl-confirm-text"))&&(d=c.find("#hl-confirm-text").hasClass("a-alert-warning"));d=(d?a.$(k.PANE_CART_BASE_ERROR_ALERT):a.$(k.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(k.PANE_CART_BASE_ALERT).remove();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(d);d=c.find(".huc-v2-order-row-image").clone();
b.elementExists(d)||(d=c.find(".hlb-product-image").clone());if(1<d.length){d=d.first();var e=a.$('input[name^\x3d"asin"].attach-warranty-input');0===e.length&&(e=a.$('.abbListItem.mbb__r input[name^\x3d"asin"]'));if(b.elementExists(e))for(var g=0;g<e.length;g++){var w=e[g].value,f=c.find("#huc-v2-order-row-item-"+w);if(f.length){c=b.elementExists(f)?f.find(".huc-v2-order-row-image"):c.find(".hlb-item-link.hlb-asin-"+w+" \x3e img");d=d.add(c.clone());break}}}a.$(k.PANE_CART_BASE_HUC_IMAGE).remove();
a.$(k.PANE_CART_BASE_INITIAL_IMAGE).hide().parent().append(d);d.wrap('\x3cdiv class\x3d"huc-image-wrapper"\x3e\x3c/div\x3e')};h.showAlmBaseAddToCartStatusIcon=function(b){b=(b?a.$(k.PANE_CART_BASE_ERROR_ALERT):a.$(k.PANE_CART_BASE_SUCCESS_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");b.removeClass("added-to-cart-message-box");b.addClass("alm-added-to-cart-message-box");a.$(k.PANE_CART_BASE_ALERT).remove();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(b)};h.renderFallbackSmartWagonFeedback=
function(b){b=b.find("#cart-important-message-box");if(0<b.length){var c=a.$("\x3cdiv class\x3d'attach-sidesheet-card attach-add-to-cart-message-card aok-hidden'\x3e\x3c/div\x3e");c.append(b);c.find("#sc-important-message-alert").removeClass("a-spacing-medium-plus").addClass("a-spacing-mini");c.find(".sc-action-quantity").hide();c.insertAfter(k.PANE_CART_BLOCK)}};h.renderFallbackSmartWagonBaseAddStatusIcon=function(b){var c=b.find(".sw-atc-message").first().parent().clone();c.prop("id","attachDisplayAddBaseAlert");
c.addClass("sw-fallback");c.addClass("aok-hidden");a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).empty();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(c);b.find("#add-to-cart-confirmation-image").find(".sc-product-image").clone().appendTo(k.PANE_CART_BASE_ALERT_IMAGE_AREA).wrap('\x3cdiv class\x3d"huc-image-wrapper aok-hidden sw-fallback"\x3e\x3c/div\x3e');b=b.find(".sw-atc-extra-item").clone().appendTo(k.PANE_CART_BASE_ALERT_IMAGE_AREA);b.addClass("aok-hidden sw-fallback");b.find(".sw-atc-item-no").prepend('\x3cspan class\x3d"a-size-small"\x3e+\x3c/span\x3e')};
h.renderBaseProductStatus=function(d){var e=d.response&&d.response.type===l.RESPONSE_TYPE_SUCCESS,g=d.response&&d.response.type===l.RESPONSE_TYPE_INCOMPLETE_ADD;g=!e&&!g;e=(e?a.$(k.PANE_CART_BASE_SUCCESS_ALERT):a.$(k.PANE_CART_BASE_ERROR_ALERT)).clone().prop("id","attachDisplayAddBaseAlert");a.$(k.PANE_CART_BASE_ALERT).remove();a.$(k.PANE_CART_BASE_ALERT_IMAGE_AREA).prepend(e);if((e=d.response&&d.response.entity&&d.response.entity.details&&d.response.entity.details.message)||g){var f=a.$("\x3cdiv\x3e\x3c/div\x3e");
e?f.append(d.response.entity.details.message):f.append(a.$(k.PANE_CART_GENERIC_ERROR_MESSAGE).clone().removeClass("aok-hidden"));g&&f.append(a.$('\x3ca href\x3d"#"\x3e\x3c/a\x3e').click(function(a){a.preventDefault();c.logCount("ATTACH_DSS_BASE_PRODUCT_TRY_AGAIN_CLICKED");h.sheet.fail(b.FailureModes.RESUBMIT_BUY_BOX)}).append(a.$(k.PANE_CART_TRY_AGAIN_MESSAGE).clone().removeClass("aok-hidden")));v(f).insertAfter(k.PANE_CART_BLOCK);a.delay(h.revealIMBMessages,200)}e=d.response&&d.response.entity&&
d.response.entity.internalInfo&&d.response.entity.internalInfo.message;g&&c.logCount("ATTACH_DSS_BASE_PRODUCT_UNRECOVERABLE_FAILURE");e&&p.logError(Error(d.response.entity.internalInfo.message),"Error when trying to add the base product to cart: ","FATAL","attach-desktop-accessories-pane:renderBaseProductStatus");a.$(k.PANE_CART_BASE_HUC_IMAGE).remove();a.$(k.PANE_CART_BASE_INITIAL_IMAGE).hide();var w=a.$(k.PANE_CART_BASE_INITIAL_IMAGE).parent();d=d.request.getAsins();E.getProductsBatch(d,[E.RESOURCE_INCLUSIONS.PRODUCT_IMAGES]).then(function(b){b.entities&&
b.entities.forEach(function(b){if(b.type===E.RESPONSE_TYPE_SUCCESS){var c=b.entity;if(c&&c.productImages&&c.productImages.entity&&c.productImages.entity.images&&c.productImages.entity.images.length){var d=c.productImages.entity;b=d.altText;d=m.init(d.images[0].lowRes).scaleToSquare(60).build().url;c="/dp/"+c.asin+"?ref_\x3ddp_atch_dss_base_image";b=a.$("\x3cimg\x3e\x3c/img\x3e").attr("src",d).attr("alt",b);b=a.$("\x3ca\x3e\x3c/a\x3e").attr("href",c).append(b);b=a.$("\x3cdiv\x3e\x3c/div\x3e").addClass("huc-image-wrapper").append(b)}else b=
a.$();w.append(b)}})}).catch(function(a){p.logError(a,"Could not process the cart description: ","ERROR","attach-desktop-accessories-pane");c.logCount("ATTACH_DSS_HANDLE_CART_DESCRIPTION_FAILURE")})};h.getAccessoryLoggingData=function(b){return{asin:a.$("#attach-accessory-asin-"+(parseInt(b)+1)).val(),index:b,priceFormatted:a.$("#attach-accessory-price-"+b+" \x3e .a-offscreen").text(),priceDecimal:parseFloat(a.$("#attach-accessory-base-price-"+b).val())||null,currencySymbol:a.$("#attach-accessory-base-currency-symbol-"+
b).val()||null,couponDecimal:parseFloat(a.$("#attach-accessory-coupon-benefit-amount-"+b).val())||null,couponType:a.$("#attach-accessory-coupon-benefit-type-"+b).val()||null,dealType:a.$("#attach-accessory-deal-type-"+b).val()||null,dealPercentSavings:parseInt(a.$("#attach-accessory-deal-percent-savings-"+b).val())||null,dealDollarAmount:a.$("#attach-accessory-deal-dollar-savings-"+b).val()||null,categoryIndex:a.$("#attach-accessory-category-index-"+b).val()||null,categoryTitle:a.$("#attach-accessory-category-title-"+
b).val()||null,asinIndexWithinCategory:a.$("#attach-accessory-asin-category-index-"+b).val()||null}};h.createAccessoryImpressions=function(){var b=[];a.$(k.PANE_ACCESSORY_ASIN).parent().each(function(c,d){d=a.$(d);if(d.is(":hidden")||"hidden"===d.css("visibility")||d.prop("data-accessory-seen"))return null;d.prop("data-accessory-seen",!0);b.push(h.getAccessoryLoggingData(c))});return b};h.resetAccessoryImpressions=function(){a.$(k.PANE_ACCESSORY_ASIN).parent().removeProp("data-accessory-seen")};h.initializeAccessoriesDisplay=
function(){h.initializeAccessoriesCards();h.initializeAccessoriesTiles();h.initializeCategorizedAccessoriesCards();a.animationFrameDelay(function(){h.resetAccessoryImpressions();c.logAccessoryImpressions(h.createAccessoryImpressions());F.triggerClientSideWeblabs()})};h.initializeAccessoriesCards=function(){a.$(k.PANE_ACCESSORY_CARD).each(function(){var b=a.$(this),d=b.find(k.PANE_ACCESSORY_CARD_SEE_MORE),e=b.find(k.PANE_ACCESSORY_CARD_SEE_LESS),g=b.find(k.PANE_ACCESSORY_CARD_EXPAND_CONTENT);d.show();
e.hide();g.hide();b.removeProp("data-card-expanded");b.removeProp("data-card-previously-expanded");d.click(function(){d.hide();e.show();g.slideDown(400);b.prop("data-card-expanded",!0);b.parent().animate({scrollTop:b.get(0).offsetTop-30},400);b.prop("data-card-previously-expanded")||(b.prop("data-card-previously-expanded",!0),c.logAccessoryImpressions(h.createAccessoryImpressions()));c.logCount(c.CSM_METRICS.ATTACH_SHOW_MORE)});e.click(function(){e.hide();d.show();g.slideUp(400);b.prop("data-card-expanded",
!1);c.logCount(c.CSM_METRICS.ATTACH_SHOW_LESS)})})};h.initializeAccessoriesTiles=function(){p.when("a-truncate").execute(function(b){a.$(k.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});a.$(k.PANE_ACCESSORY_TILE_ITEM).hover(function(){var c=a.$(this).find(k.PANE_ACCESSORY_TITLE);c.length&&b.get(c.get()).update()})});a.$(k.PANE_ACCESSORY_TILE_ITEM).attr("tabindex",0)};h.initializeCategorizedAccessoriesCards=function(){b.elementExists(k.PANE_CATEGORIZED_ACCESSORIES_TILES_CARD)&&(a.on("a:expander:attach_see_more_expander:toggle:expand",
function(){c.logAccessoryImpressions(h.createAccessoryImpressions())}),a.on("a:expander:attach_category_expander:toggle:expand",function(){c.logAccessoryImpressions(h.createAccessoryImpressions())}))};h.initializeAccessoriesCarousel=function(){p.when("a-truncate","a-carousel-framework").execute(function(b,d){if(a.$(k.PANE_ACCESSORY_CAROUSEL).length){a.$(k.PANE_ACCESSORY_TITLE).each(function(){b.get(this).update()});d.createAll();var e=d.getCarousel(a.$(k.PANE_ACCESSORY_CAROUSEL));e&&(e.attachViewedPages=
[1],e.gotoPage(1,{animationDuration:1}),a.on("a:carousel:attach-carousel:change:animating",function(a){a.newValue||(a=e.getAttr("pageNumber"),-1===e.attachViewedPages.indexOf(a)&&(e.attachViewedPages.push(a),c.logAccessoryImpressions(h.createAccessoryImpressions())))}))}})};h.initializeCoupons=function(){var b;a.$(k.PANE_ACCESSORY_COUPON_BADGE_CLASS).each(function(){var b=a.$(this).text().replace(/\s+/g," ");a.$(this).attr("title",b)});a.on("a:popover:positionUpdated:attach-coupon-popover",h.handleCouponPopoverPositionUpdated);
a.on("a:popover:beforeShow:attach-coupon-popover",function(c){c.popover.$trigger.parents(k.PANE_ACCESSORY_TILE_ITEM).addClass("hover");b=h.createCouponPopoverPositionHandler(c);a.$(r).bind("scroll",b);a.$(k.PANE+" \x3e .a-scroller").bind("scroll",b)});a.on("a:popover:afterHide:attach-coupon-popover",function(c){c.popover.$trigger.parents(k.PANE_ACCESSORY_TILE_ITEM).removeClass("hover");a.$(r).unbind("scroll",b);a.$(k.PANE+" \x3e .a-scroller").unbind("scroll",b)});a.declarative("attach-coupon-checkbox",
"change",function(b){var c=b.data,d=b.$currentTarget.parents(k.PANE_ACCESSORY_COUPON);c&&c.ajaxClaimUrl?a.$.get(c.ajaxClaimUrl).done(function(){h.handleCouponClaimSuccess(d,c.accessoryItemIndex)}).fail(function(a,b,c){p.logError(Error(c),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane");h.handleCouponClaimError(d)}):(p.logError(Error("Coupon claim URL not available"),"Could not clip coupon: ","ERROR","attach-desktop-accessories-pane"),h.handleCouponClaimError(d))})};h.handleCouponPopoverPositionUpdated=
function(a){a.popover.$container.css("z-index",6E3)};h.createCouponPopoverPositionHandler=function(a){return function(){a.popover.updatePosition()}};h.handleCouponClaimSuccess=function(a,b){c.logPromotionClaimed(h.getAccessoryLoggingData(b-1));a.find(k.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).removeClass("aok-hidden");a=a.parents(k.PANE_ACCESSORY_TILE_ITEM);a.length&&(a.find(k.PANE_ACCESSORY_COUPON_BADGE_UNCLIPPED_CLASS).addClass("aok-hidden"),
a.find(k.PANE_ACCESSORY_COUPON_BADGE_CLIPPED_CLASS).removeClass("aok-hidden"))};h.handleCouponClaimError=function(a){a.find(k.PANE_ACCESSORY_COUPON_UNCLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_CLIPPED_CLASS).addClass("aok-hidden");a.find(k.PANE_ACCESSORY_COUPON_ERROR_CLASS).removeClass("aok-hidden")};h.updateLightningDealTimer=function(b){var c=a.$("#attach-accessory-deal-timer-"+b).val()-1;a.$("#attach-accessory-deal-timer-"+b).val(c);var d=h.convertTimeLeftToString(c);
a.$("#attach-accessory-deal-timer-string-"+b).text(d);0===c?h.handleDealHasEnded(b):setTimeout(h.updateLightningDealTimer,1E3,b)};h.convertTimeLeftToString=function(a){var b=Math.floor(a/3600),c=Math.floor(a/60)%60;a%=60;return 0>=b?h.appendZeroIfSingleDigit(c)+":"+h.appendZeroIfSingleDigit(a):b+":"+h.appendZeroIfSingleDigit(c)+":"+h.appendZeroIfSingleDigit(a)};h.appendZeroIfSingleDigit=function(a){return(10>a?"0":"")+a};h.handleDealHasEnded=function(b){a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).hasClass("aok-hidden")&&
(a.$("#attach-accessory-asin-"+(b+1)).parent().addClass("lightning-deal-ended"),a.$("#attach-accessory-deal-on-waitlist-"+b).addClass("aok-hidden"),a.$("#attach-accessory-deal-has-ended-"+b).removeClass("aok-hidden"))};h.updateLightningDealTimeToCheckoutTimer=function(b){var c=a.$("#attach-accessory-time-to-checkout-"+b).val()-1;a.$("#attach-accessory-time-to-checkout-"+b).val(c);var d=h.convertTimeLeftToString(c);a.$("#attach-accessory-time-to-checkout-string-"+b).text(d);0===c?(a.$("#attach-accessory-ld-in-cart-details-"+
b).addClass("aok-hidden"),a.$(k.PANE_ACCESSORY_ADD_SUCCESS_PREFIX+b).addClass("aok-hidden"),a.$("#tile-add-accessory-badge-"+b).addClass("aok-hidden"),a.$(k.PANE_ACCESSORY_ADD_BUTTON_PREFIX+b).removeClass("aok-hidden"),a.$("#attach-accessory-deal-availability-details-"+b).removeClass("aok-hidden")):setTimeout(h.updateLightningDealTimeToCheckoutTimer,1E3,b)};h.handleLightningDealAddToCart=function(b,c,d){a.$("#attach_add_accessory-button-row-"+b).addClass("aok-hidden");"INWAITLIST"===d?a.$("#attach-accessory-deal-on-waitlist-"+
b).removeClass("aok-hidden"):(a.$("#attach-accessory-deal-availability-details-"+b).addClass("aok-hidden"),a.$("#attach-accessory-time-to-checkout-"+b).val(c/1E3),h.updateLightningDealTimeToCheckoutTimer(b),a.$("#attach-accessory-ld-in-cart-details-"+b).removeClass("aok-hidden"))};h.initializeLightningDealStatusRefresher=function(b){if(a.$("#attach-accessory-deal-has-ended-"+b).hasClass("aok-hidden")){var c=a.$("#attach-accessory-claim-deal-url-"+b).val(),d=h.getDealId(c);d!==y&&(c=[{dealID:d}],c=
JSON.stringify({requestMetadata:{marketplaceID:a.$(k.MARKETPLACE_ID).val(),clientID:"DetailPageAttachAssets",sessionID:a.$("#attach-sessionId").val(),customerID:a.$("#attach-customerId").val()},dealTargets:c,responseSize:"STATUS_ONLY",itemResponseSize:"NONE"}),a.$.ajax({type:"POST",url:"/xa/dealcontent/v2/GetDealStatus",dataType:"json",headers:{"cache-control":"no-cache"},data:c,success:function(a){a=a.dealStatus[d];var c=Number.MAX_VALUE;a&&h.updateLightningDealInfo(b,a.dealState,a.percentClaimed)&&
setTimeout(h.initializeLightningDealStatusRefresher,c<a.msCacheTtl?c:3E4,b)}}))}};h.updateLightningDealInfo=function(b,c,d){if("AVAILABLE"!==c&&"WAITLIST"!==c)return h.handleDealHasEnded(b),!1;var e=a.$("#attach_add_accessory_button_"+b+"-announce");"WAITLIST"===c?e.html(a.$("#attach-accessory-join-waitlist-string").html()):"AVAILABLE"===c&&e.html(a.$("#attach-accessory-add-to-cart-string").html());a.$("#attach-accessory-percent-claimed-"+b).text(d);a.$("#attach-accessory-deal-progress-bar-width-"+
b).width(d+"%");return!0};return h});"use strict";p.when("A","attach-common","attach-weblabs","attach.utilities.focus-management").register("attach-desktop-side-sheet",function(a,b,f,d){var c={},n=[],t=-1,e,l,g,q,p,m,C=null,F=null,v=null,h=!1,u=null,B="false",A="auto",D=null,z=c.Selectors={PAGE_BACKGROUND:"#a-page",PLACEHOLDER:"#attach-dss-placeholder",SHEET:"#attach-desktop-sideSheet",MODAL_LAYER:".attach-dss-modal-layer",LIGHTBOX:"#attach-popover-lgtbox",WARRANTY_BOX:".attach-warranty-box",WARRANTY_MONTHLY:"#attach-monthly-warranty",
WARRANTY_MULTI_DEVICE:"#attach-warranty-multi-device-container"};c.transitionDuration=500;c.onKeyDown=function(a){27===a.which&&c.next()};c.initialize=function(){n=[];b.elementExists(z.MODAL_LAYER)?q=a.$(z.MODAL_LAYER):(q=a.$("\x3cdiv class\x3d'attach-dss-modal-layer'\x3e\x3c/div\x3e"),q.hide(),q.appendTo(document.body));b.elementExists(z.SHEET)?c.$container=a.$(z.SHEET):(c.$container=a.$('\x3cdiv id\x3d"attach-desktop-sideSheet" class\x3d"a-section attach-desktop-sideSheet"\x3e\x3c/div\x3e'),c.$container.addClass("aok-hidden"),
c.$container.appendTo(z.PLACEHOLDER));C=c.$container.parent();b.elementExists(z.LIGHTBOX)||(p=a.$("\x3cdiv id\x3d'attach-popover-lgtbox' class\x3d'attach-dss-backdrop'\x3e\x3c/div\x3e"),p.hide(),p.appendTo(q),p.click(c.next));a.$(document).unbind("keydown",c.onKeyDown);a.$(document).keydown(c.onKeyDown);e=function(){};l=function(){};g=!0};c.setFailureHandler=function(a){e=a};c.setCloseHandler=function(a){l=a};c.fail=function(a,b){e(a,b)};c.addPane=function(a){n.push(a)};c.removePane=function(a){a=
n.indexOf(a);-1<a&&n.splice(a,1)};c.hideMultiQuantityMonthlyWarranties=function(b){var d=a.$(z.WARRANTY_BOX),e=d.has(z.WARRANTY_MONTHLY);a.$(z.WARRANTY_MULTI_DEVICE).addClass("aok-hidden");e.addClass("aok-hidden");e.length===d.length&&c.removePane(b)};c.showMonthlyWarranties=function(){var b=a.$(z.WARRANTY_BOX).has(z.WARRANTY_MONTHLY);a.$(z.WARRANTY_MULTI_DEVICE).removeClass("aok-hidden");b.removeClass("aok-hidden")};c.getPaneIndex=function(a){return n.indexOf(a)};c.insertPane=function(a,b){b===y&&
(b=n.length);n.splice(b,0,a);g=!0};c.hasPane=function(a){return-1<c.getPaneIndex(a)};c.next=function(){if(t+1===n.length){p.hide();c.$container.animate({right:m},{duration:c.transitionDuration,complete:function(){n[t].hide();t=-1;l();q.hide();D.focus();c.$container.appendTo(C)}});r.ue&&r.ue.count&&r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE",(r.ue.count("ATTACH_DSS_CLOSE_ACCESSORY_PANE")||0)+1);var b=a.$(z.PAGE_BACKGROUND).get(0);document.body.style.overflow=A;b.ariaHidden=B;F.remove();v.remove();
a.trigger("HIDE_SIDE_SHEET")}else-1!==t&&(n[t].hide(),n[t+1].show(),t+=1)};c.show=function(){if(g){g=!1;var b=a.$.map(n,function(a){return a.load(c)});a.$.when.apply(a.$,b).fail(c.fail).done(function(){a.$.each(n,function(a,b){b.setup(c)});c.show()})}else{q.show();c.$container.addClass("aok-hidden").attr("role","dialog").attr("aria-modal","true").appendTo(q);t=0;n[t].show();m=c.$container.css("right");c.$container.removeClass("aok-hidden");c.$container.animate({right:"0"},c.transitionDuration,"linear");
p.show();r.ue&&r.ue.count&&(b=a.$("#attach-customerId").val()?"ATTACH_DSS_SHOW_HAS_CUSTOMER_ID":"ATTACH_DSS_SHOW_NO_CUSTOMER_ID",r.ue.count(b,(r.ue.count(b)||0)+1),b="true"===a.$("#attach-is-prime-member").val()?"ATTACH_DSS_IS_PRIME_MEMBER":"ATTACH_DSS_IS_NOT_PRIME_MEMBER",r.ue.count(b,(r.ue.count(b)||0)+1));b=document.body;var d=a.$(z.PAGE_BACKGROUND).get(0);B=d.ariaHidden;d.ariaHidden="true";A=b.style.overflow;b.style.overflow="hidden";D=document.activeElement;F=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertBefore(c.$container);
v=a.$('\x3cdiv tabindex\x3d"0"\x3e\x3c/div\x3e').insertAfter(c.$container);a.trigger("attach:show_side_sheet")}};c.isEmpty=function(){return 0===n.length};document.addEventListener("focus",function(a){if(!h&&-1!==t){var b=c.$container.get(0);b.contains(a.target)?u=a.target:(h=!0,d.focusDescendant(b,"first"),u===document.activeElement&&d.focusDescendant(b,"last"),h=!1,u=document.activeElement)}},!0);c.isOpen=function(){return-1!==t};return c});"use strict";p.when("A","attach-common","attach-weblabs",
"attach-logging","attach-maple","attach-desktop-warranty-pane","attach-desktop-accessories-pane","attach-desktop-side-sheet","attach.utilities.data-driven-weblabs","attach-variant-registration","attach.utilities.add-to-cart.base-product").register("attach-desktop",function(a,b,f,d,c,n,t,e,l,g,q){function E(){if(!b.elementExists(e.Selectors.PLACEHOLDER))if(l.weblabsToTriggerClientSide.length)y=!1;else return!0;return b.elementExists(u.STS_FEATURE)?(D||(d.logCount("attachSuppressForShipToStoreFeature"),
D=!0),!0):!1}var m={},C,y=!0,v=m.Events={CLICK:"click",ATTACH_ATC_CLICK_NAMESPACE:"click.attachDSS",WARRANTY_SI_CLICK_NAMESPACE:"click.siatc",VAS_SI_CLICK_NAMESPACE:"click.lsatc",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",LD_CLAIM_ERROR:"deals_claimDealError"},h=m.Endpoints={ERROR_500_URL:"/gp/errors/500.html",WARRANTY_SI_CHECK:"/gp/si/util/is-si-with-triggers.html"},u=m.Selectors={ADD_TO_CART_BUTTON:"#add-to-cart-button",ASIN:"#ASIN",QUANTITY:"#quantity",BASE_ITEM_PRICE_DECIMAL:"#attach-base-product-price",
BASE_ITEM_CURRENCY_SYMBOL:"#attach-base-product-currency-symbol",ATTACH_ASIN_LIST:"#attach-asin-list",ATTACH_MARKETPLACE_ID:"#attach-marketplaceId",ATTACH_BASE_ASIN:"#attach-baseAsin",INSTALLMENTS_BUTTON:"#installments-button",MBB_WARRANTY_ITEM:"#abbWrapper .abbListItem input[type\x3dcheckbox]",WTY_TWISTER_SELECTED_GROUP:".warranty-twister-selected-box-group",WTY_TWISTER_WTY_OPTION:".warranty-twister-box-group-warranty-option",LD_BUY_BOX:"#dealsAccordionRow",LD_ATC_BUTTON:".gb-btn-atc, #dealsx_atc_btn",
ATTACH_LD_CONTAINER:"#attach-ld-container",ALM_BRAND_ID:"#attach-alm-brand-id",ALM_ATC_BUTTON:"#freshAddToCartButton",STS_FEATURE:"#addProfessionalServicesRow"},B=m.Classes={ATTACH_DSS_ATC:"attach-dss-atc"},A=-1,D=!1,z=function(){a.off(v.LD_CLAIM_SUCCESS,z);a.off(v.LD_CLAIM_ERROR,k);b.selectedBaseLightningDeal=!0;e.setCloseHandler(m.setupAddToCartButton);m.handleLdAddToCartClick();p.when("attach-lightning-deals-desktop").execute(function(a){a.handleDealClaim()})},k=function(){a.off(v.LD_CLAIM_ERROR,
k);a.off(v.LD_CLAIM_SUCCESS,z);a.$(u.LD_ATC_BUTTON).bind(v.CLICK,x)},x=function(){a.$(u.LD_ATC_BUTTON).unbind(v.CLICK,x);a.on(v.LD_CLAIM_SUCCESS,z);a.on(v.LD_CLAIM_ERROR,k)};m.initialize=function(){if(E())return!1;l.initializeWeblabsToTriggerClientSide();if(e.isOpen())return!1;m.setupDependencies();m.setupSideSheet();m.setupAddToCartButton()};m.setupDependencies=function(){var b=a.$(u.ATTACH_MARKETPLACE_ID).val();d.initialize(d.FEATURES.DSS,b);d.setPayloadBuilder(function(){return{baseAsin:a.$(u.ASIN).val(),
baseItemPriceDecimal:parseFloat(a.$(u.BASE_ITEM_PRICE_DECIMAL).val())||null,baseItemCurrencySymbol:a.$(u.BASE_ITEM_CURRENCY_SYMBOL).val()||null,quantity:Number(a.$(u.QUANTITY).val())||1,almBrandId:a.$(u.ALM_BRAND_ID).val()||null}});c.initialize();p.when("attach-external-atc-interceptor").execute(function(a){C=a;C.enableModule()})};m.setupSideSheet=function(){e.initialize();e.setFailureHandler(m.failure);!f.isWarrantyPaneSuppressed()&&b.hasWarranty()?e.addPane(n):t.setShouldIncludeMaple(!0);!f.servicesInterstitialDeprecated()||
b.hasAccessories()?(e.addPane(t),e.setCloseHandler(m.setupAddToCartButton)):e.setCloseHandler(m.failureTransitionToHUC)};m.setupAddToCartButton=function(){a.$(document.body).delegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE,m.handleAddToCartClick);a.$(u.ADD_TO_CART_BUTTON).prop("type","button").addClass(B.ATTACH_DSS_ATC);a.$(document.body).delegate(u.INSTALLMENTS_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE,m.handleAddToCartClick);a.$(u.INSTALLMENTS_BUTTON).prop("type","button").addClass(B.ATTACH_DSS_ATC);
b.elementExists(u.LD_BUY_BOX)&&b.elementExists(u.ATTACH_LD_CONTAINER)?(a.$(u.LD_ATC_BUTTON).bind(v.CLICK,x).addClass(B.ATTACH_DSS_ATC),!f.isWarrantyPaneSuppressed()&&b.hasWarranty()&&!e.hasPane(n)&&-1<A&&e.insertPane(n,A),d.logCount(d.CSM_METRICS.ATTACH_BASE_LD_PRESENT)):b.elementExists(u.LD_BUY_BOX)&&!b.elementExists(u.ATTACH_LD_CONTAINER)&&d.logCount(d.CSM_METRICS.DSS_LD_MISSING_ATTACH);b.isWFMPage()&&f.isAttachEnabledForWFM()&&(p.when("fresh-add-to-cart").execute("attach-dss-wfm",function(a){a.addToFreshCart({success:m.almAtcHandler,
error:function(a,b,c,e){d.logError({message:"Error reported by almAtcHandler: textStatus: "+c+"errorThrown: "+e});d.logCount(d.CSM_METRICS.ALM_DSS_BASE_ATC_FAILURE)}})}),a.$(u.ALM_ATC_BUTTON).addClass(B.ATTACH_DSS_ATC));d.logCount(d.CSM_METRICS.ATTACH_SIDE_SHEET_CLOSE)};m.almAtcHandler=function(c){b.buyButton=a.$(c.target);e.isOpen()||(a.on("attach:show_side_sheet",function(){t.updateALMCartSummary();t.showAlmBaseAddToCartStatusIcon(!1)}),a.$.when().pipe(m.checkClientSideWeblabTriggering).pipe(m.checkFeatureExists).pipe(m.checkAccessoryListNotEmpty).pipe(m.show).done(function(){d.logCount(d.CSM_METRICS.ALM_DSS_BASE_ATC_SUCCESS)}).fail(m.failure))};
m.checkAccessoryListNotEmpty=function(){if(t.isEmptyAccessoryList)return b.reject(b.FailureModes.REBIND_ATC)};m.failure=function(a,c){switch(a){case b.FailureModes.ERROR_500:m.failureError500();break;case b.FailureModes.RESUBMIT_BUY_BOX:m.failureResubmitBuyBox();break;case b.FailureModes.UNBIND_ATC:m.failureUnbindATC();break;case b.FailureModes.REBIND_ATC:m.failureRebindATC();break;default:case b.FailureModes.TRANSITION_TO_HUC:m.failureTransitionToHUC()}};m.failureError500=function(){r.location=h.ERROR_500_URL};
m.failureResubmitBuyBox=function(){b.selectedBaseLightningDeal?m.failureRebindATC():(m.failureUnbindATC(),b.buyButton.click())};m.failureUnbindATC=function(){a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);a.$(u.INSTALLMENTS_BUTTON).prop("type","submit");a.$(u.ADD_TO_CART_BUTTON).prop("type","submit")};m.failureTransitionToHUC=function(){if(b.selectedBaseLightningDeal)return m.failureUnbindATC();
f.servicesInterstitialDeprecated()?a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.WARRANTY_SI_CLICK_NAMESPACE);f.servicesInterstitialDeprecated()?a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.VAS_SI_CLICK_NAMESPACE):a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.WARRANTY_SI_CLICK_NAMESPACE);m.failureResubmitBuyBox()};m.failureRebindATC=function(){m.setupAddToCartButton()};m.handleAddToCartClick=function(c){b.buyButton=
a.$(c.target);a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);a.$(document.body).undelegate(u.INSTALLMENTS_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);b.getAtcForm().append(b.buyButton.filter("input").clone().attr("type","hidden"));b.elementExists(u.LD_BUY_BOX)&&a.$(u.LD_ATC_BUTTON).unbind(v.CLICK,x);b.selectedBaseLightningDeal||!f.servicesInterstitialDeprecated()||b.hasAccessories()||e.setCloseHandler(m.failureTransitionToHUC);a.$.when().pipe(m.checkCanAddBaseProduct).pipe(m.checkAndTriggerClientSideWeblabs).pipe(m.checkWarranty).pipe(m.checkFeatureExists).pipe(m.show).fail(m.failure);
if(y)return c.preventDefault(),c.stopImmediatePropagation(),!1};m.handleLdAddToCartClick=function(){a.$(document.body).undelegate(u.ADD_TO_CART_BUTTON,v.ATTACH_ATC_CLICK_NAMESPACE);a.$(u.LD_ATC_BUTTON).unbind(v.CLICK,x);a.$.when().pipe(m.checkAndTriggerClientSideWeblabs).pipe(m.checkWarranty).pipe(m.checkFeatureExists).pipe(m.show).fail(m.failure)};m.checkCanAddBaseProduct=function(){q.canAddWithCartApi(b.getAtcForm())?d.logCount("Attach.CanAddBaseProduct.CartAPI"):d.logCount("Attach.CanAddBaseProduct.Gurupa")};
m.checkFeatureExists=function(){if(m.shouldSuppressForFeatureNotPresent())return b.selectedBaseLightningDeal?(a.trigger("HIDE_SIDE_SHEET"),b.selectedBaseLightningDeal=!1,b.reject(b.FailureModes.REBIND_ATC)):b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_FEATURE_DOES_NOT_EXIST"})};m.checkWarranty=function(){f.isWarrantyPaneSuppressed()||(!b.selectedBaseLightningDeal||a.$("#atch__bl").length&&a.$("#attach-warranty-ld #attach-warranty-asin").val()&&(!b.isMultiQuantityDeal()||
f.showWarrantyForMultiQuantityDeals())?m.shouldSuppressForWarrantyInMbb()?(e.removePane(n),t.setShouldIncludeMaple(!0),d.logCount("ATTACH_DSS_SUPPRESSED_MBB_WARRANTY_CHECKED",1)):b.elementExists(".mbb__mdbi")?e.removePane(n):f.servicesInterstitialDeprecated()&&m.shouldSuppressforMultiQuantityMonthlyWarranty()?(f.isDssMbsEnhancementEnabled()?e.hideMultiQuantityMonthlyWarranties(n):e.removePane(n),t.setShouldIncludeMaple(!0),d.logCount("ATTACH_DSS_SUPPRESSED_MULTI_QUANTITY_MONTHLY_WARRANTY",1)):f.isDssMbsEnhancementEnabled()&&
e.showMonthlyWarranties():(A=e.getPaneIndex(n),e.removePane(n)))};m.checkAndTriggerClientSideWeblabs=function(){l.shouldTriggerClientSideWeblabsEarly&&l.triggerClientSideWeblabs();if(!f.servicesInterstitialDeprecated()&&!b.elementExists(u.ATTACH_ASIN_LIST))return b.reject(b.FailureModes.UNBIND_ATC,{count:"ATTACH_DSS_SUPPRESSED_EMPTY_ASIN_LIST"})};m.handleSICheck=function(a){if(!a)return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"});a.suppressSi&&(e.removePane(n),
t.setShouldIncludeMaple(!0),d.logCount("ATTACH_DSS_SUPPRESSED_SI",1))};m.handleSIFailure=function(){return b.reject(b.FailureModes.RESUBMIT_BUY_BOX,{count:"ATTACH_DSS_SUPPRESSED_SI_CHECK_FAILURE"})};m.shouldSuppressForFeatureNotPresent=function(){return f.servicesInterstitialDeprecated()?!b.elementExists(e.Selectors.PLACEHOLDER)||e.isEmpty():!b.elementExists(e.Selectors.PLACEHOLDER)||!b.elementExists(u.ATTACH_ASIN_LIST)||!b.elementExists(u.ATTACH_MARKETPLACE_ID)||!b.elementExists(u.ATTACH_BASE_ASIN)};
m.shouldSuppressForWarrantyInMbb=function(){return f.isWarrantyTwisterPlusDesktopEnabled()?0<a.$(u.MBB_WARRANTY_ITEM).filter(":checked").length||0<a.$(u.WTY_TWISTER_SELECTED_GROUP).filter(u.WTY_TWISTER_WTY_OPTION).length:0<a.$(u.MBB_WARRANTY_ITEM).filter(":checked").length};m.shouldSuppressforMultiQuantityMonthlyWarranty=function(){var c=Number(a.$(u.QUANTITY).val())||1;return b.hasMonthlyWarranty()&&1<c};m.show=function(){e.show()};return m});p.when("A","attach-desktop","attach-weblabs","ready").execute("attach-desktop-main",
function(a,b,f){b.initialize();a.on("a:pageUpdate",a.debounce(function(){b.initialize();a.trigger("attach:dss:initialized")},300))});"use strict";p.when("A","attach-logging","attach-common").register("attach-lightning-deals-common",function(a,b,f){var d={Constants:{LD_ID_PREFIX:"gb_atc_",ATTACH_LD_CONTAINER:'\x3cdiv id\x3d"attach-ld-container" class\x3d"aok-hidden"\x3e\x3c/div\x3e',ALERTS:["a-alert-success","a-alert-warning","a-alert-error"],ATTACH_LD_TIME:'\x3cp class\x3d"a-color-success a-text-bold" id\x3d"attach-ld-time"\x3e\x3c/p\x3e'},
Endpoints:{LD_STATUS:"/xa/dealcontent/v2/GetDealStatus"},Selectors:{ATTACH_LD_CONTAINER:"#attach-ld-container",ATTACH_LD_ALERT:"#attach-ld-alert",ATTACH_LD_ICON:"#attach-ld-icon",ATTACH_LD_STATUS:"#attach-ld-status",ATTACH_LD_SUCCESS:"#attach-ld-success",ATTACH_LD_RECLAIM:"#attach-ld-reclaim",ATTACH_LD_EXPIRED:"#attach-ld-expired",ATTACH_LD_ERROR:"#attach-ld-error",ATTACH_LD_INFO:".attach-ld-info",ATTACH_LD_TIME:"#attach-ld-time",ATTACH_BASE_ASIN:"#attach-baseAsin, #attach-base-asin",LD_TIMER_PREFIX:"#deal_checkout_timer_",
LD_ID_OBJECT:"div[id^\x3dgb_atc_]",LD_ATC_DECLARATIVE:'*[data-action\x3d"dealsx-addtocart-button-action"]',LD_TIMER:"#dealsx_checkout_timer"},Events:{CLICK:"click",LD_CLAIM_SUCCESS:"deals_claimDealSuccess",DSS_CLOSE:"HIDE_SIDE_SHEET",MBS_CLOSE:"a:sheet:afterHide:attach_accessory_sheet"},DealStates:{AVAILABLE:"AVAILABLE",INCART:"INCART",EXPIRED:"EXPIRED",WAITLIST:"WAITLIST",NONE:"NONE"}};d.dealItemState;d.dealCustomerState;d.dealMsToCustomerStateExpiry;d.dealId;d.baseAsin;d.initializeAttachLD=function(){d.baseAsin=
a.$(d.Selectors.ATTACH_BASE_ASIN).val();var b=a.$(d.Selectors.LD_ID_OBJECT);b.length?d.dealId=b.prop("id").replace(d.Constants.LD_ID_PREFIX,""):(b=a.$(d.Selectors.LD_ATC_DECLARATIVE).data(),b.dealsxAddtocartButtonAction&&b.dealsxAddtocartButtonAction.dealId&&(d.dealId=b.dealsxAddtocartButtonAction.dealId));l()};d.hasLightningDealTimer=function(){return d.dealId?f.elementExists(d.Selectors.LD_TIMER_PREFIX+d.dealId)||f.elementExists(d.Selectors.LD_TIMER):f.elementExists(d.Selectors.LD_TIMER)};d.attachDealTimerExists=
function(){return 0<a.$(d.Selectors.ATTACH_LD_INFO+" p").length};d.updateLDUX=function(){0>d.dealMsToCustomerStateExpiry&&(d.dealCustomerState=d.DealStates.EXPIRED);switch(d.dealItemState){case d.DealStates.AVAILABLE:case d.DealStates.WAITLIST:switch(d.dealCustomerState){case d.DealStates.NONE:case d.DealStates.INCART:c();break;case d.DealStates.EXPIRED:n(d.Selectors.ATTACH_LD_RECLAIM);break;default:t()}a.delay(d.updateLDUX,1E3);break;case d.DealStates.EXPIRED:n(d.Selectors.ATTACH_LD_EXPIRED);break;
default:t()}};var c=function(){if(d.dealCustomerState!==d.DealStates.NONE){e(d.Selectors.ATTACH_LD_SUCCESS);if(f.elementExists(d.Selectors.LD_TIMER_PREFIX+d.dealId))a.$(d.Selectors.ATTACH_LD_TIME).text(a.$(d.Selectors.LD_TIMER_PREFIX+d.dealId).text());else{var b=a.$(d.Selectors.LD_TIMER).text();a.$(d.Selectors.ATTACH_LD_TIME).text(b)}d.dealMsToCustomerStateExpiry-=1E3;a.$(d.Selectors.ATTACH_LD_ALERT).hasClass("a-alert-success")||(a.$(d.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-warning a-alert-error").addClass("a-alert-success"),
a.$(d.Selectors.ATTACH_LD_ICON).removeClass("a-icon-warning a-icon-error").addClass("a-icon-success"));a.$("#attachSiAddCoverage-ld").hasClass("aok-hidden")&&a.$("#attachSiAddCoverage-ld").removeClass("aok-hidden")}},n=function(b){if(d.dealCustomerState===d.DealStates.INCART)return c();e(b);a.$(d.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-warning");a.$(d.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-warning");a.$("#attachSiAddCoverage-ld").addClass("aok-hidden")},
t=function(){e(d.Selectors.ATTACH_LD_ERROR);a.$(d.Selectors.ATTACH_LD_ALERT).removeClass("a-alert-success").addClass("a-alert-error");a.$(d.Selectors.ATTACH_LD_ICON).removeClass("a-icon-success").addClass("a-icon-error")},e=function(b){b=a.$(b);b.hasClass("aok-hidden")&&(a.$(d.Selectors.ATTACH_LD_STATUS).find("\x3e div:not(.aok-hidden)").each(function(){a.$(this).addClass("aok-hidden")}),b.removeClass("aok-hidden"))},l=function(){a.$(document).ajaxSuccess(function(a,c,e){e.url.match(d.Endpoints.LD_STATUS)&&
(a=JSON.parse(c.responseText),a.dealStatus&&a.dealStatus[d.dealId]&&((a=a.dealStatus[d.dealId].dealItemStatus[d.baseAsin])?(d.dealItemState=a.itemState,d.dealCustomerState=a.customerState,d.dealMsToCustomerStateExpiry=a.msToCustomerStateExpiry):b.logCount(b.CSM_METRICS.ATTACH_BASE_LD_DEAL_STATUS_ERROR)))})};return d});"use strict";p.when("A","attach-common","attach-lightning-deals-common","attach-desktop-side-sheet","attach-logging").register("attach-lightning-deals-desktop",function(a,b,f,d,c){var n=
{},t=/(\{0})/,e=function(){f.initializeAttachLD();b.setupDesktopEgressButtons();2===a.$(f.Selectors.ATTACH_LD_ALERT).find(".a-icon").length&&a.$(f.Selectors.ATTACH_LD_ALERT+" .a-icon").first().remove();a.$("#attach-ld-close-button").hasClass("close-button")||a.$("#attach-ld-close-button").addClass("close-button").click(d.next);if(f.hasLightningDealTimer()&&!f.attachDealTimerExists()){var e=a.$("#attach-base-ld-timer").val();e&&e.length?e.split(t).forEach(function(b){b="{0}"===b?f.Constants.ATTACH_LD_TIME:
"\x3cp\x3e"+b+"\x3c/p\x3e";a.$("#attach-ld-success .attach-ld-info").append(b)}):(c.logCount(c.CSM_METRICS.DSS_BASE_LD_MISSING_TIMER),c.logError({message:"Attach desktop base LD missing timer translation. Base ASIN\x3d"+a.$("#attach-baseAsin").val()}))}a.$(f.Selectors.ATTACH_LD_CONTAINER).removeClass("aok-hidden");a.on(f.Events.DSS_CLOSE,l);f.updateLDUX()},l=function(){a.off(f.Events.DSS_CLOSE,l);b.selectedBaseLightningDeal=!1;a.$("#attach-accessory-pane").height("");a.$(f.Selectors.ATTACH_LD_CONTAINER).addClass("aok-hidden");
a.$(".attach-primary-atc-confirm-box").removeClass("aok-hidden");a.$("#attachSiAddCoverage").removeClass("aok-hidden")};n.handleDealClaim=function(){c.logCount(c.CSM_METRICS.DSS_BASE_LD_ATC_CLICK);f.dealCustomerState=f.DealStates.INCART;f.dealItemState=f.DealStates.AVAILABLE;f.dealMsToCustomerStateExpiry=y;e()};return n});"use strict";p.when("A","attach-desktop","dp-util-cookie","cf").execute(function(a,b,f){"000-0000000-8675309"===a.$("#attach-sessionId").val()&&a.$("#attach-sessionId").val(f("session-id"))});
"use strict";p.when("A","3p-promise","attach.utilities.price-formatter").register("attach.amazonapi.client",function(a,b,f){var d={buildRequestUrl:function(b){var c=a.$("#attach-aapi-ajax-endpoint").val()+"/"+b.apiPath,d=[];if(b.additionalParameters)for(var e in b.additionalParameters)b.additionalParameters.hasOwnProperty(e)&&d.push(e+"\x3d"+encodeURIComponent(b.additionalParameters[e]));d.length&&(c+="?"+d.join("\x26"));return c},buildAcceptHeader:function(a){var b=["application/vnd.com.amazon.api+json",
'type\x3d"'+a.responseType+'"'];a.resourceInclusions&&b.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');return b.join("; ")},buildRequestHeaders:function(b){var c=a.$("#attach-aapi-ajax-csrf-token").val();c={Accept:d.buildAcceptHeader(b),"Accept-Language":a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"),"x-cc-currency-of-preference":a.$("#attach-currency-of-preference").val(),"x-api-csrf-token":c};b.requestType&&(c["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+
b.requestType+'"');return c},makeRequest:function(c){return new b(function(b,f){var e=d.buildRequestUrl(c),l=d.buildRequestHeaders(c),g=c.data?JSON.stringify(c.data):y;return a.$.ajax({type:c.method,url:e,headers:l,data:g,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){b(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(m){b.data=a.responseText}f(b)}})})},isException:function(a){return a&&"undefined"!==typeof a.statusCode&&
"undefined"!==typeof a.xhr},formatMoney:function(b){return b.displayString?b.displayString:b.convertedFrom&&b.currencyCode===b.convertedFrom.currencyCode&&b.convertedFrom.displayString?b.convertedFrom.displayString:f.formatPrice(Number(b.amount),b.currencyCode||a.$("#attach-currency-of-preference").val(),a.$("#attach-languageOfPreference,#attach-language-of-preference").val().replace(/_/g,"-"))}};return d});"use strict";p.when("attach.amazonapi.client").register("attach.amazonapi.cart.add-items",
function(a){var b={RESPONSE_TYPE_SUCCESS:"cart.add-items/v1",RESPONSE_TYPE_INCOMPLETE_ADD:"add-items.incomplete-add.error/v1"},f=function(a){return a},d=function(a){if(a.data&&"add-items.incomplete-add.error/v1"===a.data.type)return a.data;throw a;};b.addItems=function(b,n){b={apiPath:"cart/carts/retail/items",requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",method:"POST",data:{items:b},additionalParameters:{}};n&&(b.additionalParameters.ref=n);return a.makeRequest(b).then(f).catch(d)};
return b});"use strict";p.when("attach.amazonapi.client").register("attach.amazonapi.cart.items",function(a){return{items:function(b,f){b={apiPath:"cart/items",requestType:"cart.items.request/v1",responseType:"cart.items/v1",method:"GET",additionalParameters:b};f&&(b.additionalParameters.ref=f);return a.makeRequest(b)}}});"use strict";p.when("attach.amazonapi.client").register("attach.amazonapi.cart.summary",function(a){var b={CART_TYPE_RETAIL:"RETAIL",CART_TYPE_LOCAL_MARKET:"LOCAL_MARKET",EMPTY_CART_RETAIL:{itemCount:0,
lastModified:null,cartType:"RETAIL",subtotal:{amount:0}}},f=function(a){return a};b.get=function(b){var c={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};b&&(c.additionalParameters.cartTypes=b);return a.makeRequest(c).then(f)};return b});"use strict";p.when("attach.amazonapi.client").register("attach.amazonapi.deals.claim-and-add-to-cart",function(a){var b={RESPONSE_TYPE_SUCCESS:"deals.claim.response/v1",RESPONSE_TYPE_QUANTITY_ERROR:"deal.claim.quantity_restriction_violation.error/v1",
RESPONSE_TYPE_ERROR:"error/v1"},f=function(a){return a},d=function(a){throw a;};b.claimAndAddDeal=function(b,n){return a.makeRequest({apiPath:"deals/"+b+"/claim-and-add-to-cart",requestType:"deals.claim.request/v1",responseType:"deals.claim.response/v1",method:"POST",data:{asin:n,quantity:1}}).then(f).catch(d)};return b});"use strict";p.when("A").register("attach.amazonapi.products.media-builder",function(a){var b={},f,d,c,n,t,e,l,g;b.init=function(a){f=a;t=n=c=d=y;e=f.width;l=f.height;g=[];f.styleCode&&
g.push(encodeURIComponent(f.styleCode));return b};b.cdn=function a(a){d=a;return b};b.withNameAndOU=function(a,d,e){c=a.startsWith("/")?a.substring(1):a;n=1===d.length?"0"+d:d;t=e;return b};b.crop=function(a,c,d,f){e=Math.round(Math.min(d,e-a));l=Math.round(Math.min(f,l-c));g.push("_CR"+[a,c,d,f].join());return b};b.autoCrop=function(){g.push("_AC");return b};b.blur=function(a){g.push("_BL"+a);return b};b.scaleToRectangle=function(a,c){e=a;l=c;g.push("_SR"+a+","+c);return b};b.scaleToSquare=function(a){l=
e=a;g.push("_SS"+a);return b};b.scaleToWidth=function(a){e>a&&(l=Math.round(a*l/e),e=Math.round(a));g.push("_SX"+a);return b};b.scaleToHeight=function(a){l>a&&(e=Math.round(a*e/l),l=Math.round(a));g.push("_SY"+a);return b};b.scaleToLongest=function(a){e>l?a<e&&(l=Math.round(a*l/e),e=Math.round(a)):a<l&&(e=Math.round(a*e/l),l=Math.round(a));g.push("_SL"+a);return b};b.upscaleToHeight=function(a){e=0<l?Math.round(a*e/l):0;l=Math.round(a);this.rendering.push("_UY"+a);return b};b.upscaleToLongest=function(a){e>
l?(l=Math.round(a*l/e),e=Math.round(a)):(e=0<l?Math.round(a*e/l):0,l=Math.round(a));this.rendering.push("_UL"+a);return b};b.upscaleToWidth=function(a){l=0<e?Math.round(a*l/e):0;e=Math.round(a);this.rendering.push("_UX"+a);return b};b.custom=function a(a){this.rendering.push(encodeURIComponent(a));return b};b.build=function(){var a=[];a.push("https://");a.push(d?d:"m.media-amazon.com");c?a.push("/images/G/",n,"/",c,"._CB",t):a.push("/images/I/",f.physicalId,".");g.length&&a.push(g.join(""));(t||g.length)&&
a.push("_");"."!==a[a.length-1]&&a.push(".");a.push(f.extension);return{url:a.join(""),width:e,height:l}};return b});"use strict";p.when("attach.amazonapi.client").register("attach.amazonapi.products.productV2",function(a){return{RESPONSE_TYPE_SUCCESS:"product/v2",RESOURCE_INCLUSIONS:{LINKS:"links(product.links/v2)",PRODUCT_IMAGES:"productImages(product.product-images/v2)"},getProduct:function(b,f,d,c){b={apiPath:"products/"+b,requestType:"product.request/v2",responseType:"product/v2",method:"GET",
resourceInclusions:f,additionalParameters:d||{}};c&&(b.additionalParameters.ref=c);return a.makeRequest(b)},getProductsBatch:function(b,f,d,c){b={apiPath:"products/"+b.join(","),requestType:"product.request/v2",responseType:"collection(product/v2)/v1",method:"GET",resourceInclusions:f,additionalParameters:d||{}};c&&(b.additionalParameters.ref=c);return a.makeRequest(b)}}});"use strict";p.when("A").register("attach.events",function(a){return{Accessories:{ADD_TO_CART_STATUS:"attach:accessories:add-to-cart:status",
SHOW:"attach:accessories:pane:show",HIDE:"attach:accessories:pane:hide",SEE_MORE_EXPAND:"attach:accessories:see-more:expand",SEE_MORE_COLLAPSE:"attach:accessories:see-more:collapse",CAROUSEL_PAGE_VIEW:"attach:accessories:carousel:page-view"},Cart:{ADD_BASE_HUC:"attach:add-base-to-cart",ADD_BASE_HUC_SUCCESS:"attach:add-base-to-cart:huc-success",UPDATE_SUMMARY:"attach:cart:summary:update"}}});"use strict";p.when("A").register("attach.utilities.add-to-cart.natc-parameter-parser",function(a){var b={},
f=/items?\[(\d+(?:\.\w+)?)\]\.?(.*)/,d=/\w+/g,c={asin:"string",offerListingId:"string",quantity:"integer","additionalParameters.giftOptions.includeGiftReceipt":"boolean","additionalParameters.installments.programId":"string"};b.attemptTypeCoercion=function(b,d){if(c.hasOwnProperty(b))switch(c[b]){case "string":return d;case "integer":return parseInt(d);case "boolean":return"true"===d}try{var e=JSON.parse(d);return null===e||"string"===typeof e||a.$.isPlainObject(e)?d:e}catch(l){}return d};b.checkValidParameters=
function(a){return a.hasOwnProperty("items[0.base][asin]")||a.hasOwnProperty("item[0].asin")};b.createAddItemsRequestItems=function(a){var c=[],e={},l;for(l in a)if(a.propertyIsEnumerable(l)){var g=a[l],n=f.exec(l);if(n){var p=n[1];if(n=n[2].match(d)){e.hasOwnProperty(p)||(e[p]={});p=e[p];for(var m=n.join("."),r=0;r<n.length;r++){var y=n[r];r===n.length-1?p[y]=b.attemptTypeCoercion(m,g):(p.hasOwnProperty(y)||(p[y]={}),p=p[y])}}}}for(var v in e)e.propertyIsEnumerable(v)&&(a=e[v],"0.base"===v||"0"===
v?c.unshift(a):c.push(a));return c};return b});"use strict";p.when("A","attach-logging","attach-variant-registration","attach.utilities.add-to-cart.natc-parameter-parser","attach.amazonapi.cart.add-items").register("attach.utilities.add-to-cart.base-product",function(a,b,f,d,c){function n(a){return new p(a)}var p=a.createClass({_rawNatcParameters:null,_cartItems:[],init:function(b){b=a.$(b).serializeArray();for(var c={},e=0;e<b.length;e++){var f=b[e];c[f.name]=f.value}this._rawNatcParameters=c;this._cartItems=
d.createAddItemsRequestItems(this._rawNatcParameters)},isValid:function(){return d.checkValidParameters(this._rawNatcParameters)},getAsins:function(){return this._cartItems.map(function(a){return a.asin})},execute:function(){var a=this;return c.addItems(this._cartItems,"dp_atch_dss_base").then(function(c){b.logCount("attach.utilities.add-to-cart.base-product.success");return{request:a,response:c}}).catch(function(c){b.logCount("attach.utilities.add-to-cart.base-product.error");return{request:a,response:c?
c.data:y,error:c}})}});return{canAddWithCartApi:function(a){return n(a).isValid()},createRequest:n}});"use strict";p.when("A").register("attach.utilities.data-driven-weblabs",function(a){function b(b){var c=a.$(b).val();b=[];if(c&&0<c.length){c=c.slice(1,-1).split(",");for(var d=0;d<c.length;d++){var f=c[d].trim();0<f.length&&b.push(f)}}return b}var f={shouldTriggerClientSideWeblabsEarly:!0,weblabsToTriggerClientSide:[]},d=!1;f.initializeWeblabsToTriggerClientSide=function(){f.weblabsToTriggerClientSide=
c();a.$("#attach-asin-list").val()&&(f.shouldTriggerClientSideWeblabsEarly=!1)};f.triggerClientSideWeblabs=function(){f.weblabsToTriggerClientSide.length&&!d&&r.ue&&ue.trigger&&(f.weblabsToTriggerClientSide.forEach(function(a){ue.trigger(a[0],a[1])}),d=!0)};var c=function(){return b("#attach-weblabsToTriggerOnAddToCart").map(function(a){return a.split(":")})};return f});"use strict";p.register("attach.utilities.focus-management",function(){var a={attemptFocus:function(a){try{a.focus()}catch(f){}return a===
document.activeElement},focusDescendant:function(b,f){if(b&&b.children)for(var d=0;d<b.children.length;d++){var c=b.children.item("last"===f?b.children.length-d-1:d);if(a.attemptFocus(c)||a.focusDescendant(c,f))return!0}return!1}};return a});"use strict";p.when("attach-logging").register("attach.utilities.price-formatter",function(a){var b={};return{formatPrice:function(f,d,c){if(!r.Intl||!r.Intl.NumberFormat)return a.logCount("attach.utilities.price-formatter:UsedSimpleFormat"),d+" "+f.toFixed(2);
a.logCount("attach.utilities.price-formatter:UsedIntlNumberFormat");var n=c+"/"+d;b.hasOwnProperty(n)||(b[n]=new Intl.NumberFormat(c,{style:"currency",currency:d}));return b[n].format(f)}}});"use strict";p.register("attach.utilities.strings",function(){var a=/\$\{(?:hash-get\s+)?([^\}]+)\}/g;return{substituteParameters:function(b,f){return b.replace(a,function(a,b){return f&&f.hasOwnProperty(b)?f[b]:""})}}});"use strict";p.when("A","attach-logging","attach.amazonapi.cart.add-items").register("attach-atc-stay-ajax",
function(a,b,f){function d(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_AJAX_SUCCESS);p.when("nav.setCartCount").execute(function(b){b(a.entity.count.entity.items)})}return{atcStayPost:function(a,n){f.addItems(a.inputs,a.reftag).then(function(a){"add-items.incomplete-add.error/v1"===a.type&&b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_INCOMPLETE_FAILURE);d(a);n&&n(a)}).catch(function(a){b.logCount(b.CSM_METRICS.ATTACH_MBS_ATC_STAY_AJAX_FAILURE);throw a;})}}})});
/* ******** */
(function(c){var b=window.AmazonUIPageJS||window.P,d=b._namespace||b.attributeErrors,a=d?d("DetailPageComparisonChartAssets",""):b;a.guardFatal?a.guardFatal(c)(a,window):a.execute(function(){c(a,window)})})(function(c,b,d){});
/* ******** */
(function(f){var g=window.AmazonUIPageJS||window.P,h=g._namespace||g.attributeErrors,b=h?h("DetailPageFluxComponents",""):g;b.guardFatal?b.guardFatal(f)(b,window):b.execute(function(){f(b,window)})})(function(f,g,h){f.when("dp-flux-utils").register("dp-flux-action",function(b){function e(d,a,c){if(b.isNonEmptyString(d)&&b.isNonEmptyString(a))this._name=d,this._source=a,this._metadata=c;else throw Error("Action(...): Action must be created with valid name and source");}e.prototype={getName:function(){return this._name},
getSource:function(){return this._source},getMetaData:function(){return this._metadata}};return e.prototype.constructor=e});f.when("dp-flux-utils").register("dp-flux-attribution",function(b){function e(d,a,c,k){if(b.isNonEmptyString(d)&&b.isNonEmptyString(a)&&b.isNonEmptyString(c)&&b.isNonEmptyString(k))this._name=d,this._category=a,this._type=c,this._item=k;else throw Error("All parameters (name, categoty, type, item) must be a non-empty string");}e.prototype={getName:function(){return this._name},
getAttribution:function(){return"name: "+this._name+"; CTI\x3d "+this._category+"/"+this._type+"/"+this._item}};return e.prototype.constructor=e});f.when("A","dp-flux-action","dp-flux-attribution").register("dp-flux-dispatcher",function(b,e,d){function a(){this._callbacks={};this._isDispatching=!1;this._pendingAction=null;this._lastID=1}var c=b.$;a.prototype={register:function(a,b){if(!(a instanceof d))throw Error("Dispatch.register(...): attribution must be instance of Attribution");if(!c.isFunction(b))throw Error("Dispatch.register(...): callback must be a function");
var e="ID_"+this._lastID++;this._callbacks[e]={attribution:a,callback:b,_isCallbackExecutionStarted:!1,_isCallbackExecutionCompleted:!1};return e},unregister:function(a){if(this._callbacks[a])delete this._callbacks[a];else throw Error("Dispatcher.unregister(...): "+a+" does not map to a registered callback");},dispatch:function(a){if(this._isDispatching)throw Error("Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch");if(!(a instanceof e))throw Error("Dispatch.dispatch(...): action param must be of type Action");
this._startDispatching(a);for(var c in this._callbacks)this._callbacks[c]._isCallbackExecutionStarted||this._invokeCallback(c);this._stopDispatching()},waitFor:function(a){if(!this._isDispatching)throw Error("Dispatcher.waitFor(...): Must be invoked while dispatching");if(!c.isArray(a))throw Error("Dispatcher.waitFor(...): dispatchTokenList must be an array");for(var b=0;b<a.length;b++){var d=a[b];if(!this._callbacks[d])throw Error("Dispatcher.waitFor(...): "+d+" does not map to a registered callback. ");
if(this._callbacks[d]._isCallbackExecutionStarted)if(this._callbacks[d]._isCallbackExecutionCompleted)continue;else throw Error("Dispatcher.waitFor(...): Circular dependency detected while waiting for "+d);this._invokeCallback(d)}},_invokeCallback:function(a){this._callbacks[a]._isCallbackExecutionStarted=!0;try{this._callbacks[a].callback(this._pendingAction)}catch(c){f.log("Dispatcher._invokeCallback(...): Error while calling dispatcher callback: error message \x3d "+c.message,"FATAL",this._callbacks[a].attribution.getAttribution())}this._callbacks[a]._isCallbackExecutionCompleted=
!0},_startDispatching:function(a){for(var c in this._callbacks)this._callbacks[c]._isCallbackExecutionStarted=!1,this._callbacks[c]._isCallbackExecutionCompleted=!1;this._pendingAction=a;this._isDispatching=!0},_stopDispatching:function(){this._pendingAction=null;this._isDispatching=!1}};return a.prototype.constructor=a});f.when("A","dp-flux-utils").register("dp-flux-emitter",function(b,e){function d(){this._subscriptions={}}var a=b.$;d.prototype={emit:function(a){if(e.isNonEmptyString(a))b.each(this._subscriptions[a]||
[],function(a){a()});else throw Error("Emitter.emit()...: eventType must be a non empty string");},addListener:function(c,b){if(e.isNonEmptyString(c)&&a.isFunction(b))this._subscriptions[c]=this._subscriptions[c]||[],this._subscriptions[c].push(b);else throw Error("Emitter.addListener()...: Invalid arguments - eventType must be a non empty string \x26 callback must be a function ");},removeListener:function(c,b){if(e.isNonEmptyString(c)&&a.isFunction(b)){if(c=this._subscriptions[c])b=a.inArray(b,
c),-1!==b&&c.splice(b,1)}else throw Error("Emitter.removeListener()...: Invalid arguments - eventType must be a non empty string \x26 callback must be a function");}};return d});f.when("A","dp-flux-emitter","dp-flux-attribution","dp-flux-dispatcher","dp-flux-utils").register("dp-flux-store",function(b,e,d,a,c){function f(b,k,g,h){if(!(b instanceof d))throw Error("storeAttribution should be instance of Attribution");if(!(g instanceof a))throw Error("dispatcher must be an instance of Dispatcher");if(!l.isFunction(k))throw Error("Store must provide a reduce callback method");
this.reduce=k;this.dispatcher=g;this._storeAttribution=b;this._state=h||{};c.deepFreeze(this._state);this._dispatchToken=this.dispatcher.register(this._storeAttribution,this._invokeOnDispatch.bind(this));this._changed=!1;this._changeEvent=this._storeAttribution.getName()+":change";this._emitter=new e}var l=b.$;f.prototype={addListener:function(a){return this._emitter.addListener(this._changeEvent,a)},removeListener:function(a){this._emitter.removeListener(this._changeEvent,a)},getDispatcher:function(){return this.dispatcher},
getDispatchToken:function(){return this._dispatchToken},getState:function(){return this._state},getStoreAttribution:function(){return this._storeAttribution},_invokeOnDispatch:function(a){this._changed=!1;var b=this._state;(a=this.reduce(this._state,a)||b)&&a!==b&&(this._state=a,c.deepFreeze(this._state),this._changed=!0,this._emitter.emit(this._changeEvent))}};return f.prototype.constructor=f});f.when("A","dp-flux-attribution").register("dp-flux-store-group",function(b){function e(b,a,c){this._stores=
a;this._callBack=c;this._attribution=b;this._registerStoreGroup()}e.prototype={_registerStoreGroup:function(){var b=this._getUniformDispatcher();this._dispatchToken=b.register(this._attribution,function(){b.waitFor(this._getStoreTokens());this._callBack()}.bind(this))},unregisterStoreGroup:function(){this._getUniformDispatcher().unregister(this._dispatchToken)},_getUniformDispatcher:function(){var d=this._stores[0].getDispatcher();b.each(this._stores,function(a){if(d!==a.getDispatcher())throw Error("All stores must have common dispatcher");
});return d},_getStoreTokens:function(){return b.map(this._stores,function(b){return b.getDispatchToken()})}};return e.prototype.constructor=e});f.when("A","dp-flux-store-group").register("dp-flux-store-subscription",function(b,e){function d(a,b,d){this._stores=b;this._changed=!1;this._updatedStores=[];this._viewUpdateCallBack=d;this._viewAttribution=a;this._allListeners=[];this._addListenerToAllStores();this._storeGroup=new e(a,b,this._viewCallBack.bind(this))}d.prototype={_storeListener:function(a){this._changed=
!0;this._updatedStores.push(a)},_addListenerToAllStores:function(){var a;b.each(this._stores,function(b){a=this._storeListener.bind(this,b);this._allListeners.push({listener:a,store:b});b.addListener(a)},this)},_removeListenerFromAllStores:function(){b.each(this._allListeners,function(a){a.store.removeListener(a.listener)})},_viewCallBack:function(){if(this._changed){try{this._viewUpdateCallBack(this._updatedStores)}catch(a){f.log("StoreSubscription._viewCallBack(...): view callback failed "+a,"WARN",
this._viewAttribution.getAttribution())}this._changed=!1;this._updatedStores=[]}},reset:function(){this._removeListenerFromAllStores();this._storeGroup.unregisterStoreGroup()}};return d.prototype.constructor=d});f.when("A").register("dp-flux-utils",function(b){function e(a){return"string"===typeof a||"[object String]"===Object.prototype.toString.call(a)}function d(a){if(!Object.isFrozen(a)){var c=Object.getOwnPropertyNames(a);b.each(c,function(b){var c=a[b];a[b]=c&&"object"===typeof c?d(c):c});Object.freeze(a)}return a}
return{isString:e,isNonEmptyString:function(a){return!(!e(a)||!b.trim(a).length)},deepFreeze:function(a){return Object.freeze&&Object.getOwnPropertyNames&&Object.isFrozen?(d(a),!0):!1}}});f.when("A","dp-flux-attribution","dp-flux-store","dp-flux-store-subscription").register("dp-flux-view",function(b,e,d,a){function c(c,g,h){if(!(c instanceof e))throw Error("View(...): viewAttribution should be an instance of Attribution");if(f.isArray(g)&&1<=g.length)b.each(g,function(a){if(!(a instanceof d))throw Error("View(...): storeList contains an object which is not of type Store");
});else throw Error("View(...): View must listen on at least one store");if(!f.isFunction(h))throw Error("View(...): View must provide update callback method");this._viewAttribution=c;this._storeSubscription=new a(c,g,h)}var f=b.$;c.prototype.getViewAttribution=function(){return this._viewAttribution};c.prototype.unregisterStores=function(){this._storeSubscription.reset()};return c})});
/* ******** */
(function(f){var l=window.AmazonUIPageJS||window.P,n=l._namespace||l.attributeErrors,e=n?n("DetailPageMobileAppAssets",""):l;e.guardFatal?e.guardFatal(f)(e,window):e.execute(function(){f(e,window)})})(function(f,l,n){f.when("jQuery","aw-mash-handler","dp-instant-map","dp-client-counter").execute("dp-instant-atc-handler",function(e,d,a,g){Object.keys(a).forEach(function(c){var d=a[c].instant,I=a[c].triggerButton,f=d.getShouldTrigger();d.disable();f&&(g.inc("dp-instant-"+c+"-clicked"),e(I).trigger("click"))})});
"use strict";f.register("dp-mash-pre-registry-handler");f.when("A","aw-mash","a-checkbox","dp-util-cookie","mobile-app-atc-action","mobile-app-gift","natc-check","atc-metrics","update-atc-data","atc-data-validation").register("aw-mash-handler",function(e,d,a,g,c,k,f,x,p,v){function t(b){b.preventDefault();b.stopPropagation()}function A(){u("#atc-toast-overlay").css("display","");y.addClass("udp-stop-scrolling");y.bind("touchmove touchstart touchend touchcancel",t)}function q(){y.removeClass("udp-stop-scrolling");
y.unbind("touchmove touchstart touchend touchcancel",t);u("#atc-toast-overlay").css("display","none")}function h(b){b="."+b;var c=u(b);0<u("#buybox .a-accordion-active").length&&(c=u("#buybox .a-accordion-active "+b));return c}function D(){A();var b=h("atc-button"),c=h("atc-button-text"),a=h("inst-button-space"),d=h("inst-indicator");b.addClass("inst-btn-opacity");c.hide();a.removeClass("aok-hidden");d.removeClass("aok-hidden")}function z(b){var c=h("atc-toast"),a=h("atc-success"),d=h("atc-failed"),
e=h("atc-failed-deals"),g=h("inst-indicator"),q=h("inst-button-space"),k=h("atc-button-text"),v=h("atc-button");l.requestAnimationFrame(function(){v.removeClass("inst-btn-opacity");g.addClass("aok-hidden");q.addClass("aok-hidden");k.show();c.css("display","");0===b?(a.css("display",""),c.addClass("atc-toast-success-styles")):-1===b?(d.css("display",""),c.addClass("atc-toast-failure-styles")):-2===b&&(e.css("display",""),c.addClass("atc-toast-failure-styles"))})}function w(b){var c=h("atc-toast"),
a=h("atc-success"),d=h("atc-failed"),e=h("atc-failed-deals"),g=h("inst-indicator"),k=h("inst-button-space"),v=h("atc-button-text"),f=h("atc-button");l.requestAnimationFrame(function(){f.removeClass("inst-btn-opacity");g.addClass("aok-hidden");k.addClass("aok-hidden");v.show();c.removeClass("atc-toast-failure-styles");c.removeClass("atc-toast-success-styles");d.css("display","none");e.css("display","none");a.css("display","none");c.css("display","none");setTimeout(function(){q()},b)})}function B(b,
c,a){w(1E3);d.showAlert({title:c,message:b,buttonTitles:[a],successCallback:function(b){},failCallback:function(b){console.log(b)}})}function C(b){b=parseInt(b,10);d.cart.didUpdate({newCartQuantity:b});amazon.cordova.notification.vibrate(50)}function E(b,c,a){function g(){var d=f.getAtcEndpoint(b),m=f.getShouldUseNatc()&&b.queryString!==n&&""!==b.queryString?"?"+b.queryString:"";v.validateData(b);x.recordAtcAjaxCall();e.ajax(d+"/ref\x3d"+b.reftag+m,{method:"post",params:b.inputs,timeout:b.timeout,
success:function(a){x.recordAtcAjaxSuccess();f.getShouldUseNatc()?a&&a.successful?p(a):(a&&a.count&&C(a.count),q()):a&&a.ok?p(a):a&&a.isDeal?A(a):a&&"perOfferingRestrictionViolated"===a.error?c(b,a):a&&a.isCartServiceFailed?h("[Detail Page Mobile App Add to Cart failed due to Cart Service Failure]",a):k(a)},error:function(c,d,g){x.recordAtcAjaxFailure();f.getShouldUseNatc()?q():(c="[Detail Page Mobile App Add to Cart Error Status: "+d+"]",b.inputs.isUSSAjax?r.aa_mash_add_to_cart_lost_connection_message&&
r.aa_mash_add_to_cart_lost_connection_title?h(c):(a(),t()):r.aa_mash_add_to_cart_lost_connection_message&&r.aa_mash_add_to_cart_lost_connection_title?(B(r.aa_mash_add_to_cart_lost_connection_message,r.aa_mash_add_to_cart_lost_connection_title,r.aa_mash_ok),h(c)):t())}})}function q(){a&&b.inputs.isUSSAjax?a():(z(-1),setTimeout(function(){w(0)},2E3))}function k(c){e.trigger("dpx:add-to-cart:error");b.inputs.isUSSAjax?r.aa_mash_failed_add_to_cart&&r.aa_mash_encounter_problem&&r.aa_mash_ok?h("[Detail Page Mobile App Add to Cart Mash Failure]",
c):(a(c),t()):r.aa_mash_failed_add_to_cart&&r.aa_mash_encounter_problem&&r.aa_mash_ok?(B(r.aa_mash_failed_add_to_cart,r.aa_mash_encounter_problem,r.aa_mash_ok),h("[Detail Page Mobile App Add to Cart Mash Failure]")):(z(-1),setTimeout(function(){w(0)},2E3),t())}function h(c,d){e.trigger("dpLogFatalsEvent",c,"ERROR","mobileApp_addtocart_fatal");b.inputs.isUSSAjax&&a(d)}function t(){e.trigger("dpLogFatalsEvent","[Detail Page Mobile App Add to cart String error]","ERROR","mobileApp_addtocart_string_error")}
function A(c){b.inputs.isUSSAjax?a(c):r.aa_mash_deal_not_available?(w(1E3),d.showAlert({title:r.aa_mash_deal_not_available,message:"",successCallback:function(b){},buttonTitles:[r.aa_mash_ok],failCallback:function(b){console.log(b)}})):t()}function p(c){e.trigger("dpx:add-to-cart:success",c);y||(z(0),setTimeout(function(){w(0)},2E3));f.getShouldUseNatc()?c&&c.count&&C(c.count):C(c.numActiveItemsInCart);a&&(b.inputs.isUSSAjax?a(c):a())}var m=u("#add-to-cart-button");if(!m.length||"submit"===m.prop("type")){var r=
b.strings,y=a!==n,m=u("#subscribeToApubPrimeFirstEmailList");y||D();m.length?(m.is(":checked")&&(b.inputs.subscribeToApubPrimeFirstEmailList=1),b.requiresSignIn&&!l.apubPrimeFirstSignInSuccessful?(l.apubPrimeFirstSignInSuccessful=1,d.showLoginDialog({successCallback:function(){g(b)},failCallback:function(b){l.apubPrimeFirstSignInSuccessful=0;"CANCELED"!==b&&k(b)}})):g(b)):b.requiresSignIn?d.showLoginDialog({successCallback:function(){g()},failCallback:function(b){"CANCELED"!==b&&k(b)}}):g()}}function J(b){E(b,
function(b,a){w(1E3);C(a.numActiveItemsInCart);d.showAlert({message:b.strings.aa_mash_some_out_of_stock,buttonTitles:[b.strings.multi_aa_mash_go_to_cart,b.strings.multi_aa_mash_continue_shopping],successCallback:function(b){0===b&&(l.location="/gp/cart/view.html")},failCallback:function(b){console.log(b)}})})}function F(b,c){function d(){var b=a(".mbb-checkbox");return 0<b.size()&&b.isChecked()}b=JSON.parse(JSON.stringify(b));if("undefined"===typeof b.inputs.isSecondaryAtc||1!==b.inputs.isSecondaryAtc)"true"!==
u("#twister-plus-mbb-selected").val()&&(b=p.updateQuantity(b)),"undefined"===typeof b.inputs.isUsedBuyBox||"1"!==b.inputs.isUsedBuyBox?("reftag"in b||(b.reftag="undefined"!==typeof b.isMobbSecondNew&&b.isMobbSecondNew?"dp_atc_ma_secondnew":"mw_pa_dp_buy_crt"),"000-0000000-8675309"===b.inputs.verificationSessionID&&(b.inputs.verificationSessionID=g("session-id")),d()&&!f.getShouldUseNatc()&&(b.inputs.a+="|"+u("#mbb-checkbox-input").val(),b.inputs.oid+="|"+u("#mbb-offering-id").val(),b.inputs.quantity+=
"|"+u("#mbb-quantity").val())):"reftag"in b||(b.reftag="dp_uatc_ma");b=k.updateData(b);E(b,function(b,a){b.inputs.isUSSAjax?c(a):B(b.strings.aa_mash_add_to_cart_failed_quantity_message,b.strings.aa_mash_add_to_cart_failed_quantity_title,b.strings.aa_mash_ok);C(a.numActiveItemsInCart)},c)}function G(b){return{asin:b.a,offerId:b.oid,listId:b.colid,listItemId:b.coliid,dealId:b.di,clickStream:""}}var u=e.$;e.state("a-page-options");var y=u("body"),m=l.ue,H={"add-to-cart":function(b){m&&m.count&&m.count("mobileAppAddToCartMash",
(m.count("mobileAppAddToCartMash")||0)+1);c.atcAction(b,F)},"add-multiple-to-cart":function(b){m&&m.count&&m.count("mobileAppAddMultipleToCartMash",(m.count("mobileAppAddMultipleToCartMash")||0)+1);J(b)},"add-to-wish-list":function(b){m&&m.count&&m.count("mobileAppAddToWishListMash",(m.count("mobileAppAddToWishListMash")||0)+1);A();d.addToWishList({asin:b.inputs.a});q()},"buy-now":function(b){m&&m.count&&m.count("mobileAppBuyNowMash",(m.count("mobileAppBuyNowMash")||0)+1);var a=document.getElementById("same-day-swatches-shipping-speed");
b=G(b.inputs);b.shippingSpeed=a&&a.value||"default";d.buyNow(b)},"buy-now-one-click":function(b){m&&m.count&&m.count("mobileAppBuyNowOneClickMash",(m.count("mobileAppBuyNowOneClickMash")||0)+1);var a=document.getElementById("prime-toggle-main");b=G(b.inputs);b.oneClickShippingSpeed=a&&a.name||"default";d.buyNowWithOneClick(b)}};u.isFunction(l.markFeatureInteractive)&&l.markFeatureInteractive("atc",{hasComponents:!0,components:[{name:"aw-mash",alwaysInteractive:!0}]});e.declarative("aw-mash",["click"],
function(b){var a=l.ue;b&&b.data&&f.setShouldUseNatc(b.data);a&&a.count&&b&&b.data&&"add-to-cart"===b.data.buttonID&&a.count("DetailPage_MobileApp_AddToCart",(a.count("DetailPage_MobileApp_AddToCart")||0)+1);"undefined"!==typeof b.$target.context.id&&"mobb.addToCart"===b.$target.context.id&&(b.data.isMobbSecondNew=!0);b=p.setNatcQuantityFromDom(b);"object"===typeof b&&"object"===typeof b.data&&"string"===typeof b.data.buttonID&&"function"===typeof H[b.data.buttonID]&&H[b.data.buttonID](b.data)});
e.declarative("aw-mash",["touchstart"],function(b){var a=b.$event.originalEvent,c=l.ue;a.acknowledge&&(a.acknowledge(0<b.$currentTarget.length?b.$currentTarget[0]:n),c&&c.count&&c.count("tnr-post-ack-atc",(c.count("tnr-post-ack-atc")||0)+1))});e.on("js-trigger-aw-mash",function(b,a){f.setShouldUseNatc(b);F(b,a)})});"use strict";f.when("A","aw-mash").register("aw-mash-open-external-url",function(e,d){e.declarative("aw-mash-open-external-url",["click"],function(a){d.openInExternalBrowser({url:a.data.url});
return!1})});"use strict";f.when("A").register("mobileiv-images",function(){return{imageArray:[]}});f.when("A","jQuery","a-carousel-framework","atf","mobileiv-images","image-block-exp-weblab","ivx-image-block-handler").execute(function(e,d,a,g,c,k,n){function x(a,c,d){amazon.mash.showImageGallery({title:a,startIndex:c,imageUrls:d});f.when("mobileIBmetricCollectionWeblab").execute(function(a){if(a.isMobileIBmetricCollectionEnabled)if(a.onPrimaryImg)if(a.IVReqCount>a.IVSuccessCount){a.logCountAndTime("dpmob_primaryImageImmersiveViewRequestServed");
a.IVSuccessCount++;var c=a.IVCountsDiff;a.IVCountsDiff=a.IVReqCount-a.IVSuccessCount;a.IVCountsDiff>c&&(a.logSpecificCount("dpmob_primaryImageImmersiveViewRequestFailed",1),a.logSpecificCount("dpmob_primaryImageInteractionFailed",1))}else a.logCountAndTime("dpmob_primaryImageImmersiveViewRequestServedWithoutPlaced");else a.logCountAndTime("dpmob_altImagesImmersiveViewRequestServed")})}function p(c){var d=a.getCarouselByName(c);if("undefined"===typeof d)for(var g=a.getAllCarousels(),e=0;e<g.length;e++){var k=
g[e];if(k.getAttr("name")===c){d=k;break}}return d}l.ue&&l.ue.count&&l.performance&&l.performance.now&&ue.count("immersive_view_mobile_app_time",performance.now());e.declarative("a-secondary-view-native",["click"],function(a){var g=a.data&&a.data.titleText?a.data.titleText:"Product Image Gallery",e=0<d(".lookbook \x3e .lookbook-container .a-carousel").length?!1:0<d(".lookbook \x3e .lookbook-container").length,q=e?d(".lookbook \x3e .lookbook-container"):p("image-block-carousel"),h=0,D=d("#landing-image-wrapper").data("includeInGallery")?
1:0,z=k.enableMobileAppImmersiveVideoExperience&&("T1"===k.storyCXWeblabTreatment||"T3"===k.storyCXWeblabTreatment);"undefined"!==typeof q&&(e=e?q.parent().find("progress").prop("value"):q.getAttr("pageNumber"),"number"===typeof e&&(h=Math.max(0,e-1-D),c.enableDp60Videos&&h>=c.dp60VideoStartIndex-1&&(h-=c.dp60VideoCount),!z&&0!=h&&"undefined"!==typeof q.dom&&"undefined"!==typeof q.dom.$carousel&&0<d(q.dom.$carousel.children("li")[1]).find("a.video-data-wrapper").length&&--h,!z&&c&&c.imageArray&&h>=
c.imageArray.length&&(h=0)));if(z)n.handleIVX(q,h);else if(0<d("#swf-share-icon.android").length&&a.data.shareParams){var q=a.data.shareParams,w={apply:function(a,c){}},B={title:g,startIndex:h,imageUrls:c.imageArray,messagePlain:q.messagePlain,subject:q.subject,imageUrl:q.imageURL,url:q.url};f.when("immersiveViewWithShare").execute(function(a){(l.cordova&&l.cordova.require("cordova/exec"))(w,w,"ShowImageGallerySocial","ShowImageGalleryWithShare",B)})}else x(g,h,c.imageArray);a.$event.preventDefault()})});
"use strict";f.when("A","aw-mash").execute(function(e,d){var a={offers:function(a){var c=a.asin||a.inputs.asin;"1"===a.nativePage?d.showOfferListingPage({asin:c}):l.location.href="/gp/aw/ol/"+c}};e.declarative("aw-mash",["click"],function(d){"object"===typeof d&&"object"===typeof d.data&&"string"===typeof d.data.buttonID&&"function"===typeof a[d.data.buttonID]&&a[d.data.buttonID](d.data)})});"use strict";f.when("a-checkbox","add-to-cart-parameter-name","add-to-cart-constants","natc-check").register("mobile-app-gift",
function(e,d,a,g){return{updateData:function(c){var k=e("#gift-wrap");0<k.size()&&k.isChecked()&&(g.getShouldUseNatc()?(k=d.constructParameterName(a.ITEM_TYPES.BASE,0,a.PARAMETER_PATHS.GIFTOPTIONS),c.inputs[k]="true"):c.inputs.isToBeGiftWrapped=!0);return c}}});"use strict";f.when("A").register("mobile-app-atc-action",function(e){return{atcAction:function(d,a){var g=e.state("program-winner");null!=g&&"undefined"!==typeof g&&"Pantry"===g.Type?f.when("pantry-mobile-app-atc-setup").execute(function(a){a.addToCart(d)}):
a(d)}}});"use strict";f.when("A").register("natc-check",function(e){function d(d){a=d!==n&&d.shouldUseNATCMobileApp!==n&&d.addToCartUrl!==n?d.shouldUseNATCMobileApp:!1}var a=!1;return{setShouldUseNatc:d,getShouldUseNatc:function(){return a},getAtcEndpoint:function(e){d(e);return a?e.addToCartUrl:e.formAction||"/gp/aw/detail/ajax/add-to-cart"}}});"use strict";f.when("natc-check","dp-csm-metrics","atc-constants").register("atc-metrics",function(e,d,a){function g(a,e){d.updateCount(e);d.recordLatencyTime(a)}
return{recordAtcAjaxCall:function(){if(e.getShouldUseNatc()){var c=a.NATC_AJAX_LATENCY;d.updateCount(a.NATC_AJAX_COUNT)}else c=a.ATC_AJAX_LATENCY,d.updateCount(a.ATC_AJAX_COUNT);d.startLatencyTime(c)},recordAtcAjaxSuccess:function(){e.getShouldUseNatc()?g(a.NATC_AJAX_LATENCY,a.NATC_AJAX_SUCCESS_COUNT):g(a.ATC_AJAX_LATENCY,a.ATC_AJAX_SUCCESS_COUNT)},recordAtcAjaxFailure:function(){e.getShouldUseNatc()?g(a.NATC_AJAX_LATENCY,a.NATC_AJAX_FAILURE_COUNT):g(a.ATC_AJAX_LATENCY,a.ATC_AJAX_FAILURE_COUNT)}}});
"use strict";f.register("atc-constants",function(){return{ATC_AJAX_COUNT:"mobileApp:atc:ajax",ATC_AJAX_SUCCESS_COUNT:"mobileApp:atc:ajax:success",ATC_AJAX_FAILURE_COUNT:"mobileApp:atc:ajax:failure",ATC_AJAX_LATENCY:"mobileapp:atc:ajax",NATC_AJAX_COUNT:"mobileApp:atc:ajax:natc",NATC_AJAX_SUCCESS_COUNT:"mobileApp:atc:ajax:success:natc",NATC_AJAX_FAILURE_COUNT:"mobileApp:atc:ajax:failure:natc",NATC_AJAX_LATENCY:"mobileapp:atc:ajax:natc",ADD_TO_CART_INPUT_VALIDATION_SUCCESS:"mobileApp:addToCart:inputValidation:success",
ADD_TO_CART_INPUT_VALIDATION_FAILURE:"mobileApp:addToCart:inputValidation:failure"}});"use strict";f.when("A","add-to-cart-parameter-name","add-to-cart-constants").register("update-atc-data",function(e,d,a){var g=e.$;return{updateQuantity:function(c){var e=d.constructParameterName(a.ITEM_TYPES.BASE,0,a.PARAMETER_PATHS.QUANTITY);c.inputs[e]?c.inputs.quantity=c.inputs[e]:g("#mobileQuantityDropDown").length&&(g(".a-accordion-active select.mobileQuantityDropDown").length?c.inputs[e]=g(".a-accordion-active select.mobileQuantityDropDown").val():
c.inputs[e]=g("#mobileQuantityDropDown").val(),c.inputs.quantity=c.inputs[e]);return c},setNatcQuantityFromDom:function(c){var e=JSON.parse(c.$currentTarget.attr("data-aw-mash")).inputs.quantity,g=d.constructParameterName(a.ITEM_TYPES.BASE,0,a.PARAMETER_PATHS.QUANTITY);e&&(c.data.inputs[g]=e);return c}}});"use strict";f.when("A","atc-constants","add-to-cart-constants","add-to-cart-parameter-name","dp-csm-metrics").register("atc-data-validation",function(e,d,a,g,c){var k=e.$;return{validateData:function(f){var l,
p;p=n;0<k("#buybox .a-accordion-active #atc-declarative").length?p=k("#buybox .a-accordion-active #atc-declarative")[0]:0<k("#buybox #atc-declarative").length&&(p=k("#buybox #atc-declarative")[0]);var v=n;if(p!==n&&p.dataset!=n)for(l in p.dataset)try{v=JSON.parse(String(p.dataset[l]));break}catch(A){}l=v;if(l!==n){if(p=[a.CSRF_TOKEN,a.CLIENT_NAME,g.constructParameterName(a.ITEM_TYPES.BASE,0,a.PARAMETER_PATHS.ASIN),g.constructParameterName(a.ITEM_TYPES.BASE,0,a.PARAMETER_PATHS.OFFER_LISTING_ID)],l!==
n&&l.inputs!==n&&f!==n&&f.inputs!==n&&Array.isArray(p))for(v=0;v<p.length;v++){var t=p[v];l.inputs[t]!==f.inputs[t]?(c.updateCount(d.ADD_TO_CART_INPUT_VALIDATION_FAILURE),e.trigger("dpLogFatalsEvent",'ERROR: Add To Cart Input Validation Failed for "'+t+'". Expected "'+l.inputs[t]+'", but received "'+f.inputs[t]+'".',"ERROR","mobileApp_addtocart_fatal")):c.updateCount(d.ADD_TO_CART_INPUT_VALIDATION_SUCCESS)}}else e.trigger("dpLogFatalsEvent","WARNING: Could not validate add to cart parameters. Could not fetch expected data",
"WARN","mobileApp_addtocart_fatal")}}});"use strict";f.when("A","mash").register("aw-mash",function(e,d){return d});"use strict";f.when("A").execute("tnr-hack-acknowledgement",function(e){function d(){}function a(a,c){e.trigger("dp:click-to-buyable",{featureName:c});a.addEventListener("touchstart",function(a){var d="tnr-post-ack-"+c;a.ack&&(a.ack(),k(d,k(d)||1))})}function g(a,c,d){n("tnr-"+a+"-marked");n("tnr-"+a+"-"+c+"-seen");k("tnr-features-tracked",k("tnr-features-tracked")||1);d?k("tnr-"+a+
"-element-exist",1):k("tnr-"+a+"-element-does-not-exist",1)}var c=l.ue,k=c&&c.count||d,n=c&&c.tag||d,x={imageBlock:"tnr-imageblock",mobile_buybox:"tnr-mobile_buybox",buybox:"tnr-buybox",buyBoxAccordion:"tnr-buyboxaccordion",buyBoxAccordionApp:"tnr-buyboxaccordionapp",mobileapp_buybox:"tnr-mobileapp_buybox",pantryBuyBox:"tnr-pantrybuybox",agsTips:"tnr-agstips"};e.each({imageBlock:["imageBlock"],buybox:"mobile_buybox buybox buyBoxAccordion buyBoxAccordionApp mobileapp_buybox pantryBuyBox agsTips".split(" ")},
function(c,d){e.each(c,function(c){var e=c+"_feature_div",h=document.getElementById(e);h?(a(h,d),g(d,c,!0)):x[c]&&f.when(x[c]).execute(function(){var f=document.getElementById(e);f?(a(f,d),g(d,c,!1)):k("tnr-"+d+"-element-not-available",1)})})});var p=e.$;e.each(["#atc-declarative","#atc-twister-declarative","#prohibitedBuyBox-popover"],function(a){p(a).each(function(){var c=p(this).attr("id")||"unknown-id",d=p(this).data("action")||"unknown-action";n("tnr-atc-marked");"#atc-twister-declarative"===
a&&e.trigger("dp:click-to-buyable",{featureName:"atc"});n("tnr-atc-"+c+"-"+d+"-seen");k("tnr-features-tracked",k("tnr-features-tracked")||1)})});(c=document.getElementById("#prohibited-buybox-addToCart"))&&c.addEventListener("touchstart",function(a){a.ack&&(a.ack(),k("tnr-post-ack-atc",k("tnr-post-ack-atc")||1))})})});
/* ******** */
(function(f){var p=window.AmazonUIPageJS||window.P,v=p._namespace||p.attributeErrors,h=v?v("DetailPageUSSAssets",""):p;h.guardFatal?h.guardFatal(f)(h,window):h.execute(function(){f(h,window)})})(function(f,p,v){f.when("A").register("uss-constants-common",function(h){return{classList:{SHOW_ELEMENT:"aok-block",HIDE_ELEMENT:"aok-hidden",STOP_SCROLLING:"uss-u-no-scroll",LIGHT_BOX_JS_HOOK:"js-light-box",LIGHT_BOX_IDENTIFIER:"uss-o-light-box",RIGHT_SIDE_SHEET:"uss-o-right-side-sheet",RIGHT_SIDE_SHEET_LAYOUT:"uss-l-right-side-sheet",
SHEET_OPEN:"is-open",SHEET_CLOSE:"is-close",USS_SHEET_VIEW_IDENTIFIER:"uss-sheet-view",CLOSE_ICON:"uss-o-close-icon",CLOSE_ICON_MEDIUM:"uss-o-close-icon-medium",USS_SHEET_VIEW_CLOSE_ICON:"uss-sheet-view-close-icon",PROMISING_UI_ELEMENT:"uss-o-promising-ui-element",PROMISING_UI_ELEMENT_ANIMATION:"uss-o-promising-ui-element-animation",IS_LOADING:"is-loading",IS_RESOLVED:"is-resolved",UI_PROMISE:"ui-promise",UI_VALUE:"ui-value",TEMPLATE_STORE:"uss-template-store",TEMPLATE:"uss-template",TEMPLATE_NAME:"template-name",
ATC_ACKNOWLEDGEMENT_MESSAGE:"atc-acknowledgement-message",ATC_GENERIC_ERROR:"atc-generic-error",ATC_STATUS_MESSAGE_COMPONENT:"uss-c-atc-status-msg",ATC_SUCCESS:"atc-success",ATC_ERROR:"atc-error",ITEM_IN_CART:"item-in-cart",CART_STATUS_MESSAGE_COMPONENT:"uss-c-cart-status-msg",CART_SUB_TOTAL:"cart-sub-total",CART_COUNT:"cart-count",SHIPPING_DETAILS:"uss-c-shipping-details",SHIPPING_MESSAGE_PLACEHOLDER:"shipping-message-placeholder",MAIN_IMAGE:"main-image",SUB_NAV:"uss-c-sub-nav",CHECKOUT_BUTTON:"checkout-btn",
CART_BUTTON:"cart-btn",CHECKOUT_FORM:"checkout-form",FACEOUT_IMAGE:"p13n-sc-list-image-container",FACEOUT_TITLE:"uss-asin-title",FACEOUT_REVIEW_STARS:"uss-review-stars",FACEOUT_BEST_SELLER:"p13n-best-seller",FACEOUT_PRICE:"uss-price",CONTINUE_SHOPPING_LINK:"continue-shopping",SUCCESS_ELEMENT:".p13n-sc-atc-success",ERROR_ELEMENT:".p13n-sc-atc-error",BUTTON_ELEMENT:".a-button-primary",DISABLE_BUTTON:"a-button-disabled"},fatalMessagesList:{INVALID_SHEET_ID:"sheetID must be valid string",INVALID_CONSTRUCTOR_USAGE:"Constructor needs to be called with 'new' keyword",
INCORRECT_PARAMETER_PASSED:"Incorrect parameter passed."},widgetType:{WIDGET:"uss-widget",RECOMMENDATION_WIDGET:"uss-recommendation-widget",NO_RECOMMENDATION_WIDGET:"uss-no-recommendation-widget",LIST_RECOMMENDATION:"uss-list-recommendation-widget",CAROUSEL_RECOMMENDATION:"uss-carousel-recommendation-widget",PRIMARY_ACTION_STATUS_WIDGET:"uss-primary-action-status-widget",ATCStatusWidget:"uss-c-atc-status-widget",ATC_STATUS_IMB_WIDGET:"atc-status-imb-widget",MAPLE_WIDGET:"maple-recommendation-widget"},
layout:{defaultLayout:{DEFAULT_LAYOUT:"uss-l-default-layout",HEAD:"uss-c-head",BODY:"uss-c-body",HEAD_DIVIDER:"uss-c-head-divider",BOTTOM_MARGIN_BETWEEN_WIDGETS:"a-spacing-medium",TOP_MARGIN_BETWEEN_WIDGETS:"a-spacing-top-medium",SKELETON_LOADER:"uss-loading-skeleton",RECOMMENDATION_LOADING_MESSAGE:"loading-message",RECOMMENDATION_LOADED_MESSAGE:"uss-recommendations-loaded-message"}},actionSources:{DP_ATC_CLICK:"dp-atc-click",USS_INGRESS_CLICK:"uss-ingress-click",USS_INLINE_ATC_CLICK:"uss-inline-atc-click",
SHEET_CLOSE_BUTTON_CLICK:"sheet-close",CONTINUE_SHOPPING_CLICK:"continue-shopping-click"},stores:{ATC_STATUS_STORE:"uss-atc-status-store",RECOMMENDATION_DATA_STORE:"uss-recommendation-data-store",USS_SHEET_STORE:"uss-sheet-store"},actions:{USS_OPEN:"uss-open",USS_CLOSE:"uss-close",RECOMMENDATION_DATA_RECEIVE:"recommendation-data-receive",ATC_RECEIVE:"atc-receive"},metrics:{CART_API_PROMISE_RESOLVED_TIMER:"cartApiPromiseResolve",PRIMARY_SUMMARY_API_PROMISE_RESOLVED_TIMER:"primarySummaryApiPromiseResolve",
SECONDARY_SUMMARY_API_PROMISE_RESOLVED_TIMER:"secondarySummaryApiPromiseResolve",PRODUCTV2IMAGES_API_PROMISE_RESOLVED_TIMER:"productV2ImagesApiPromiseResolve",ATC_PROMISE_RESOLVED_TIMER:"atcPromiseResolve",SECONDARY_ATC_PROMISE_RESOLVED_TIMER:"secondaryAtcPromiseResolve",PRIMARY_ATC_STATUS_PROMISE_RESOLVED_TIMER:"primaryAtcStatusPromiseResolve",SECONDARY_ATC_STATUS_PROMISE_RESOLVED_TIMER:"secondaryAtcStatusPromiseResolve",PRIMARY_ADDITEMS_API_PROMISE_RESOLVED_TIMER:"primaryAddItemsApiPromiseResolve",
SECONDARY_ADDITEMS_API_PROMISE_RESOLVED_TIMER:"secondaryAddItemsApiPromiseResolve",PERCOLATE_DATA_PROMISE_RESOLVED_TIMER:"percolateDataPromiseResolve",CART_API_PROMISE_REJECTED_COUNTER:"cartApiPromiseRejected",PRIMARY_SUMMARY_API_PROMISE_REJECTED_COUNTER:"primarySummaryApiPromiseRejected",SECONDARY_SUMMARY_API_PROMISE_REJECTED_COUNTER:"secondarySummaryApiPromiseRejected",PRODUCTV2IMAGES_API_PROMISE_REJECTED_COUNTER:"productV2ImagesApiPromiseRejected",USS_PRIMARY_ADD_ITEMS_API_CALL_COUNTER:"ussPrimaryAddItemsApiCall",
USS_PRIMARY_ATC_MASON_CALL_COUNTER:"ussPrimaryAtcMasonCall",USS_PRIMARY_ATC_AW_MASH_CALL_COUNTER:"ussPrimaryAtcAwMashCall",USS_PRIMARY_AW_MASH_GURUPA_COUNTER:"ussPrimaryAtcAwMashCallGurupa",USS_PRIMARY_AW_MASH_NATC_COUNTER:"ussPrimaryAtcAwMashCallNatc",USS_PRIMARY_AW_MASH_SERVER_FAILURE_COUNTER:"ussPrimaryAtcAwMashServerFailure",USS_PRIMARY_AW_MASH_NATC_FAILURE_COUNTER:"ussPrimaryAtcAwMashNatcFailure",USS_PRIMARY_AW_MASH_GURUPA_FAILURE_COUNTER:"ussPrimaryAtcAwMashGurupaFailure",PRIMARY_ATC_NATC_PARAM_V1_COUNTER:"primaryAtcNatcParamV1",
PRIMARY_ATC_NATC_PARAM_V2_COUNTER:"primaryAtcNatcParamV2",PRIMARY_ATC_NATC_PARAM_INVALID_COUNTER:"primaryAtcNatcParamInvalid",ATC_PROMISE_REJECTED_COUNTER:"atcPromiseRejected",PRIMARY_ATC_STATUS_PROMISE_REJECTED_COUNTER:"primaryAtcStatusPromiseRejected",PRIMARY_ATC_MASON_CALL_REJECTED_COUNTER:"primaryAtcMasonCallRejected",SECONDARY_ATC_STATUS_PROMISE_REJECTED_COUNTER:"secondaryAtcStatusPromiseRejected",PRIMARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER:"primaryAddItemsApiPromiseRejected",SECONDARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER:"secondaryAddItemsApiPromiseRejected",
PERCOLATE_DATA_PROMISE_REJECTED_COUNTER:"percolateDataPromiseRejected",SECONDARY_ADD_TO_CART_CLICK_COUNTER:"secondaryAtcClick",COMPATIBLE_BROWSER_COUNTER:"compatibleBrowser",NON_COMPATIBLE_BROWSER_COUNTER:"nonCompatibleBrowser",FACEOUT_IMAGE_CLICK_COUNTER:"faceout:imageClick",FACEOUT_REVIEW_STARS_CLICK_COUNTER:"faceout:reviewStarClick",FACEOUT_TITLE_CLICK_COUNTER:"faceout:titleClick",FACEOUT_PRICE_CLICK_COUNTER:"faceout:priceClick",FACEOUT_BEST_SELLER_CLICK_COUNTER:"faceout:bestSellerClick",SEE_MORE_EXISTENCE_COUNTER:"ussListWidget:seeMore",
SEE_MORE_CLICK_COUNTER:"ussListWidget:seeMoreClick",SEE_LESS_CLICK_COUNTER:"ussListWidget:seeLessClick",CHECKOUT_FORM_CLICK_COUNTER:"checkoutFormClick",CART_BUTTON_CLICK_COUNTER:"cartButtonClick",CONTINUE_SHOPPING_CLICK:"continueShoppingClick",PAGE_LANDING_PRECONDITIONS_PASSED:"pageLandingPreconditionsPassed",POST_ATC_PRECONDITIONS_FAILED:"postATCPreconditionsFailed",PROGRAM_ELIGIBILITY_REGISTRY_OVERWRITTEN:"programEligibilityRegistryOverwritten",USS_WEBLAB_IN_TREATMENT:"ussWeblabInTreatment",POST_ATC_WARRANTY_SELECTED_OR_INVALID_ACTION:"postATCFailedForWarrantyOrInvalidAction",
POST_ATC_WEBLAB_DISABLED:"postATCFailedWeblabIsDisabled",PRIMARY_ADD_TO_CART_CLICK_COUNTER:"primaryAtcClick",USS_PRIMARY_ATC_DEFAULT_ENDPOINT_SUCCESS_RESPONSE:"primaryAtcSuccessMobileWebUsingDefaultEndpoint",USS_PRIMARY_ATC_DEFAULT_ENDPOINT_FAIL_RESPONSE:"primaryAtcFailureMobileWebUsingDefaultEndpoint"},transitionTimingFunction:{EVEN_EASE:"cubic-bezier(0.4, 0, 0.6, 1)",ENTER_EASE:"cubic-bezier(0, 0, 0.2, 1)",EXIT_EASE:"cubic-bezier(0.4, 0, 1, 1)",EASE_IN:"ease-in",EASE_OUT:"ease-out"},animationType:{FADE_IN:"fadeIn",
NO_ANIMATION:"noAnimation"},nexusConstants:{PRODUCER_ID:"uss",SCHEMA_ID:"uss.CounterData.",SCHEMA_VERSION:"3"},cartApiConstants:{USS_CHECKOUT_URL:"/gp/cart/mobile/go-to-checkout.html/ref\x3dpa_lh_co_dup?ie\x3dUTF8\x26dp\x3dcheckout",USS_CART_TYPE:"RETAIL",USS_SHIPPING_MESSAGE:'\n\n      \n\n\n\n  \x3cdiv class\x3d"a-row a-spacing-base"\x3e\n    \n\n  \x3c/div\x3e\n',USS_ENVIRONMENT_PROD:"prod",USS_ENVIRONMENT_DEV:"dev",USS_PRODUCTV2IMAGES_PROD_URL_PATH:"https://m.media-amazon.com/images/I/",USS_PRODUCTV2IMAGES_DEV_URL_PATH:"https://media-origin-na-ssl.integ.amazon.com/images/I/",
USS_PRODUCTV2IMAGES_DIMENSIONS:"._SS40_.",USS_SECONDARY_ATC_QUANTITY:1,USS_PRIMARY_ATC_REFTAG:"mw_pa_dp_buy_crt",BASE_10:10},queryStrings:{qid:"qid",sr:"sr"}}});f.when("dp-flux-attribution","uss-constants-common").register("uss-constants",function(h,f){f.ussCTI={CATEGORY:"Website",TYPE:"Detail Page",ITEM:"USS"};f.metrics.PREFIX="uss:";f.ajaxParams={BASE_URL:"/gp/product/handle-buy-box",REFTAG:"dp_start-bbf_1_glance",ASIN:"ASIN",OFFER_LISTING_ID:"offerListingID",AJAX_TIMEOUT:1E4};f.actionSources.SHEET_CLOSE_BUTTON_CLICK=
"sheet-close-button-click";f.ussCommonAttribution=new h("uss-common",f.ussCTI.CATEGORY,f.ussCTI.TYPE,f.ussCTI.ITEM);f.defaultAtcAnimationType=f.animationType.FADE_IN;f.atcAnimationStatusEvent="uss:atc:animation:status:resolved";return f});f.when("dp-flux-utils","uss-constants","nexus-util").register("uss-logger-service",function(h,f,m){function q(b,a){if(h.isNonEmptyString(b))b=f.metrics.PREFIX+b,ue&&ue.count&&(a===v&&(a=1),ue.count(b,a),m.emitCounterData(b,a));else throw Error("counterKey must be non empty string");
}function c(b){if(h.isNonEmptyString(b))this._timerName=b,this._startTime=0;else throw Error("timerName must be non empty string");}c.prototype={start:function(){this._startTime=Date.now()},stop:function(){this._startTime&&q(this._timerName,Date.now()-this._startTime)}};return{logCounter:q,Timer:c}});f.when("A","uss-utils","uss-logger-service","uss-constants").register("uss-preconditions",function(h,f,m,q){function c(a){a=h.$("#"+a+"_feature_div").html();null!==a&&(a=a.trim());return null!==a&&0<
a.length}function b(){return h.capabilities.transform&&h.capabilities.transition&&f.isFlexBoxSupported()}function a(){return h.$("#uss-weblabTreatment").val()}var d=/^T[0-9]+$/;b()?m.logCounter(q.metrics.COMPATIBLE_BROWSER_COUNTER):m.logCounter(q.metrics.NON_COMPATIBLE_BROWSER_COUNTER);return{isUssConditionsPassed:function(){var a;if(a="true"===h.$("#uss-serverPreconditionsPassed").val()){if(a=b()&&!c("scheduledDelivery")&&!c("simpleBundle")&&!c("partialStateBuyBox"))a=h.$("#add-to-cart-button"),
a=a.length&&"submit"==a.prop("type");a=a&&!(h.$("#attach-accessory-card-deck").length&&(f.isMobileApp()||h.$("#attach-accessory-mobile-web-mbs").length))}return a},isUssWeblabInTreatment:function(){return d.test(a())},triggerUSSWeblabValue:function(){return d.test(h.$("#uss-miniFrameworkWeblabTreatment").val())?h.$("#uss-weblabValue").val():1},ussWeblabTreatmentValue:a,checkIfSnsInterstitialExists:function(){return c("snsInterstitialWidget")},getSnsInterstitialTrigger:function(){return"show-sns-interstitial"},
isBrowserUssCompatible:b}});f.when("A","3p-promise","uss-constants","uss-logger-service").register("uss-utils",function(h,f,m,q){function c(e){var a=null;l.hasOwnProperty(e)&&(a=l[e]);return a}function b(){}function a(e){}var d=h.$,g=m.classList,k=d("body"),l={},n=["isPreview","forceWidgets","previewCampaigns","auditEnabled"];(function(){var e=p.location.search,e=e.substr(1);e.split("\x26").forEach(function(e){e=e.split("\x3d");2===e.length&&(l[e[0]]=e[1])})})();return{loadImage:function(e,a){return new f(function(b,
k){a=a||"";var c=d("\x3cimg src\x3d'"+e+"' alt\x3d'"+a+"'\x3e");c.load(function(){b(c)});c.error(function(e){k(e)});c[0].complete&&b(c)})},isFlexBoxSupported:function(){var e=h.$("\x3cdiv\x3e\x3c/div\x3e")[0];return""===e.style.flex||""===e.style.webkitFlex||""===e.style.msFlex||""===e.style.MozBoxFlex||""===e.style.webkitBoxFlex?!0:!1},disablePageScroll:function(){k.addClass(g.STOP_SCROLLING)},enablePageScroll:function(){k.removeClass(g.STOP_SCROLLING)},isMobileApp:function(){return"true"===h.$("#uss-mobileApp").val()},
getDebugParams:function(){var e={};n.forEach(function(a){var b=c(a);b&&(e[a]=b)});return e},shouldFireAndForgetWeblabTrigger:function(){var e=!1;0!=d("#uss-shouldFireAndForgetWeblabTrigger").length&&(e="true"===d("#uss-shouldFireAndForgetWeblabTrigger").val());return e},fireAndForgetWeblabTrigger:function(e,a){var b="/ussx/weblab-trigger?",b=/^T[0-9]+$/.test(h.$("#uss-miniFrameworkWeblabTreatment").val())?b+("weblabValue\x3d"+e+"\x26treatment\x3d"+a):b+("triggerWeblab\x3d"+e+"\x26treatment\x3d"+a);
p.navigator&&navigator.sendBeacon?navigator.sendBeacon(b)||h.$.ajax({url:b}):h.$.ajax({url:b})},showATCSuccess:function(){h.$("#atc-toast").length&&h.$("#atc-success").length&&(h.$("#atc-toast").css("display","block"),h.$("#atc-toast").addClass("atc-toast-success-styles"),h.$("#atc-success").css("display","block"),setTimeout(function(){h.$("#atc-success").css("display","none");h.$("#atc-toast").css("display","none");h.$("#atc-toast").removeClass("atc-toast-success-styles")},1500))},showATCFailure:function(){h.$("#atc-toast").length&&
h.$("#atc-failed").length&&(h.$("#atc-toast").css("display","block"),h.$("#atc-toast").addClass("atc-toast-failure-styles"),h.$("#atc-failed").css("display","block"),setTimeout(function(){h.$("#atc-failed").css("display","none");h.$("#atc-toast").css("display","none");h.$("#atc-toast").removeClass("atc-toast-failure-styles")},1500))},vibrateMobileApp:function(){return p.amazon&&p.amazon.cordova&&p.amazon.cordova.notification&&p.amazon.cordova.notification.vibrate&&p.amazon.cordova.notification.vibrate(50)},
handleATCAnimationEnd:function(){h.$(".inst-button-space").length&&h.$(".inst-indicator").length&&(h.$(".inst-button-space").addClass("aok-hidden"),h.$(".inst-indicator").addClass("aok-hidden"),h.$(".atc-button-text").removeClass("aok-hidden"),h.$("#add-to-cart-button").removeAttr("disabled"),h.$("body").removeClass("inst-btn-opacity"))},handleATCAnimationEndWeb:function(){h.$("#add-to-cart-button").removeAttr("disabled");var e=h.$("#a-page");0!==e.length&&e[0].style.removeProperty("opacity")},updateCartCount:function(e){p.amazon&&
p.amazon.mash&&p.amazon.mash.cart&&p.amazon.mash.cart.didUpdate&&"function"===typeof p.amazon.mash.cart.didUpdate&&p.amazon.mash.cart.didUpdate({newCartQuantity:e,successCallback:b,failCallback:a})},getUrlParameter:c}});f.when("A","atf","uss-utils").register("uss-init-helper",function(h,r,m,q){return{loadUssCommonAssetsAfterPreload:function(){f.when("uss-constants","dp-flux-action","uss-dispatcher","uss-utils").register("uss-action-creator-helper",function(c,b,a,d){function g(){h.$("#add-to-cart-button").removeAttr("disabled")}
return{primaryATCClick:function(k,l){var n=new b(c.actions.USS_OPEN,c.actionSources.DP_ATC_CLICK,{recommendationBaseIdentifier:k});l.percolateData.then(function(e){var d={isContainsRecommendation:!1,widgets:[]};e.recommendationData&&(d.widgets=e.recommendationData.widgets||[]);g();d.widgets.length||(d.widgets.push({widgetType:c.widgetType.NO_RECOMMENDATION_WIDGET}),d.recommendationBaseIdentifier=k);a.dispatch(n);l.atcData.then(function(e){var d={};1===e.isOk?d=e.atcStatusData:d.isAtcGenericError=
!0;e=new b(c.actions.ATC_RECEIVE,c.actionSources.DP_ATC_CLICK,d);a.dispatch(e)},function(){var e=new b(c.actions.ATC_RECEIVE,c.actionSources.DP_ATC_CLICK,{isAtcGenericError:!0});a.dispatch(e)});d.recommendationBaseIdentifier=k;e=new b(c.actions.RECOMMENDATION_DATA_RECEIVE,c.actionSources.DP_ATC_CLICK,d);a.dispatch(e)},function(){l.atcData.then(function(e){g();1===e.isOk?d.showATCSuccess():d.showATCFailure()},function(){d.showATCFailure()})})},secondaryATCClick:function(d,l){d.atcData.then(function(d){var e=
{};1===d.isOk?e=d.atcStatusData:e.isAtcGenericError=!0;e.params=l;d=new b(c.actions.ATC_RECEIVE,c.actionSources.USS_INLINE_ATC_CLICK,e);a.dispatch(d)},function(){})}}})},loadUssCommonAssets:function(){f.when("dp-flux-dispatcher").register("uss-dispatcher",function(c){return new c});f.when("A","uss-constants").register("promising-ui-element",function(c,b){var a=b.classList;return c.createClass({_element:null,_uiPromiseElement:null,_uiValueElement:null,_isResolved:!1,init:function(b){var c=b.find("."+
a.UI_PROMISE),k=b.find("."+a.UI_VALUE);if((b.hasClass(a.PROMISING_UI_ELEMENT)||b.hasClass(a.PROMISING_UI_ELEMENT_ANIMATION))&&c.length&&k.length)this._uiPromiseElement=c,this._uiValueElement=k,this._element=b,this.showUIPromise();else throw Error("PromisingUIElement.init()...: HTML structure is not compatible with PromisingUIElement");},showUIPromise:function(){this._element.addClass(a.IS_LOADING);this._element.removeClass(a.IS_RESOLVED);this._isResolved=!1},showUIValue:function(){this._element.addClass(a.IS_RESOLVED);
this._element.removeClass(a.IS_LOADING);this._isResolved=!0},getValueElement:function(){return this._uiValueElement},getElement:function(){return this._element},isResolved:function(){return this._isResolved}})});f.when("A","uss-sheet-component","uss-constants","uss-store-repository","dp-flux-attribution","uss-layout","dp-flux-view","widget-creation-helper","dp-flux-action","uss-dispatcher").register("uss-sheet-view",function(c,b,a,d,g,k,l,n,e,u){function t(){f=!0;var c=a.classList,t=a.ussCTI,w=d.getStore(a.stores.USS_SHEET_STORE),
m=d.getStore(a.stores.RECOMMENDATION_DATA_STORE),r=[w,m],t=new g("uss-sheet-view",t.CATEGORY,t.TYPE,t.ITEM),q=new b(c.USS_SHEET_VIEW_IDENTIFIER,{beforeClose:function(){u.dispatch(new e(a.actions.USS_CLOSE,a.actionSources.SHEET_CLOSE_BUTTON_CLICK))}}),c=q.getSheetElement(),x=new k(c);new l(t,r,function(e){var b;if(-1!==h.inArray(w,e))if(b=w.getState(),b.isSheetOpen()){if(b.getActionSource()===a.actionSources.DP_ATC_CLICK){x.reset();var d=n.createAtcStatusWidget();b=n.createIMBWidget(b.getActionSource());
x.renderWidgets([d,b])}q.open()}else b.getActionSource()!==a.actionSources.SHEET_CLOSE_BUTTON_CLICK&&q.close();-1!==h.inArray(m,e)&&x.renderWidgets(n.createRecommendationWidget(m))})}var h=c.$,f=!1;return{initializeUSSSheetView:function(){f||t()}}});f.when("A","uss-constants","uss-template-store","uss-widget-factory").register("widget-creation-helper",function(c,b,a,d){return{createAtcStatusWidget:function(){var c={content:a.getTemplate(b.widgetType.ATCStatusWidget),widgetType:b.widgetType.ATCStatusWidget};
return d.getWidget(c)},createRecommendationWidget:function(a){var b,l=[];a=a.getState().getNewRecommendations();c.each(a,function(a){(b=d.getWidget(a))&&l.push(b)});return l},createIMBWidget:function(){return d.getWidget({content:"\x3cdiv\x3e\x3c/div\x3e",widgetType:b.widgetType.ATC_STATUS_IMB_WIDGET})}}});f.when("A","dp-flux-store","uss-dispatcher").register("uss-store-repository",function(c,b,a){var d={};return{registerStore:function(c,k,l){k=new b(c,k,a,l);return d[c.getName()]=k},getStore:function(a){return d[a]},
getDispatcher:function(){return a}}});f.when("A","uss-store-repository","dp-flux-attribution","uss-sheet-store","uss-constants").register("uss-recommendation-data-store",function(c,b,a,d,g){function k(e,a,b){this._unprocessedChunkIndex=b||0;this._recommendationBaseIdentifier=e;this._dataChunks=a||[]}var l=c.$,n=g.ussCTI;a=new a(g.stores.RECOMMENDATION_DATA_STORE,n.CATEGORY,n.TYPE,n.ITEM);d=b.getStore(g.stores.USS_SHEET_STORE);k.prototype={_getRecommendations:function(e){var a=[];e<this._dataChunks.length&&
c.each(this._dataChunks,function(b,d){d>=e&&c.each(b,function(e){a.push(e)})});return a},getAllRecommendations:function(){return this._getRecommendations(0)},getNewRecommendations:function(){return this._getRecommendations(this._unprocessedChunkIndex)},getRecommendationBaseIdentifier:function(){return this._recommendationBaseIdentifier},addRecommendationChunk:function(e){var a=[];c.each(e,function(e){e.widgetType=e.widgetType||g.widgetType.RECOMMENDATION_WIDGET});a=l.merge(a,this._dataChunks);a=l.merge(a,
[e]);return new k(this._recommendationBaseIdentifier,a,this._dataChunks.length)}};n=new k;return b.registerStore(a,function(e,a){var c=e,l=g.actions;switch(a.getName()){case l.USS_OPEN:b.getDispatcher().waitFor([d.getDispatchToken()]);d.getState().getActionSource()===g.actionSources.DP_ATC_CLICK&&(c=new k(d.getState().getRecommendationBaseIdentifier()));break;case l.RECOMMENDATION_DATA_RECEIVE:l=d.getState().getRecommendationBaseIdentifier(),a=a._metadata,a.recommendationBaseIdentifier===l&&(c=e.addRecommendationChunk(a.widgets))}return c},
n)});f.when("uss-store-repository","dp-flux-attribution","uss-constants").register("uss-sheet-store",function(c,b,a){function d(a,b,e){this._isSheetOpen=a||!1;this._actionSource=b;this._recommendationBaseIdentifier=e}var g=a.actions,k=a.ussCTI;b=new b(a.stores.USS_SHEET_STORE,k.CATEGORY,k.TYPE,k.ITEM);d.prototype={isSheetOpen:function(){return this._isSheetOpen},getActionSource:function(){return this._actionSource},getRecommendationBaseIdentifier:function(){return this._recommendationBaseIdentifier}};
k=new d(!1);return c.registerStore(b,function(b,c){var e=b;switch(c.getName()){case g.USS_OPEN:b.isSheetOpen()||(c.getSource()===a.actionSources.DP_ATC_CLICK?e=new d(!0,c.getSource(),c.getMetaData().recommendationBaseIdentifier):c.getSource()===a.actionSources.USS_INGRESS_CLICK&&b.getRecommendationBaseIdentifier()&&(e=new d(!0,c.getSource(),b.getRecommendationBaseIdentifier())));break;case g.USS_CLOSE:b.isSheetOpen()&&(e=new d(!1,c.getSource(),b.getRecommendationBaseIdentifier()))}return e},k)});
f.when("A","uss-store-repository","dp-flux-attribution","uss-constants","dp-flux-utils").register("uss-atc-status-store",function(c,b,a,d,g){function k(){this.status=v;this.cart={subTotal:{}};this.mainImage={};this.isAtcGenericError=this.shippingMessageHTML=this.imbHTML=v}c=new a("uss-atc-status-store",d.ussCTI.CATEGORY,d.ussCTI.TYPE,d.ussCTI.ITEM);k.prototype={setStatus:function(a){this.status=1===a||a===d.classList.ATC_SUCCESS?d.classList.ATC_SUCCESS:d.classList.ATC_ERROR},setCart:function(a,b,
e){a&&(this.cart.count=a);b&&(this.cart.subTotal=b);g.isNonEmptyString(e)&&(this.cart.checkoutUrl=e)},setMainImage:function(a,b){g.isNonEmptyString(a)&&(this.mainImage.src=a,g.isNonEmptyString(b)?this.mainImage.altText:this.mainImage.altText="")},setImbHTML:function(a){g.isNonEmptyString(a)&&(this.imbHTML=a)},setShippingMessageHTML:function(a){g.isNonEmptyString(a)&&(this.shippingMessageHTML=a)},setIsAtcGenericError:function(a){this.isAtcGenericError=a}};a=new k;b.registerStore(c,function(a,b){var e=
a;switch(b.getName()){case d.actions.ATC_RECEIVE:var c=b.getMetaData();b.getSource()===d.actionSources.DP_ATC_CLICK?(e=new k,c.isAtcGenericError?e.setIsAtcGenericError(!0):(e.setStatus(c.status),e.setCart(c.cart.count,c.cart.subTotal,c.cart.checkoutUrl),e.setMainImage(c.mainImage.src,c.mainImage.altText),e.setImbHTML(c.imbHTML),e.setShippingMessageHTML(c.shippingMessageHTML))):b.getSource()!==d.actionSources.USS_INLINE_ATC_CLICK||c.isAtcGenericError||(e=new k,e.setStatus(a.status),e.setMainImage(a.mainImage.src,
a.mainImage.altText),e.setImbHTML(a.imbHTML),e.setShippingMessageHTML(a.shippingMessageHTML),c.cart&&e.setCart(c.cart.count,c.cart.subTotal,a.cart.checkoutUrl));break;case d.actions.USS_OPEN:b.getSource()===d.actionSources.DP_ATC_CLICK&&(e=new k)}return e},a)});f.when("A","uss-constants").register("uss-template-store",function(c,b){var a=c.$,d=b.classList,g={};return{init:function(){var b=a("."+d.TEMPLATE_STORE),c;1===b.length&&b.find("."+d.TEMPLATE).each(function(b,e){c=a("\x3cdiv\x3e\x3c/div\x3e");
e=a(e);c.append(e);(b=e.data(d.TEMPLATE_NAME))&&(g[b]=c.html())})},getTemplate:function(a){return g[a]},_nameToTemplateMap:g}});f.when("A","dp-flux-attribution","dp-flux-utils","uss-store-repository","uss-widget","uss-constants").register("uss-widget-factory",function(c,b,a,d,g,k){var l=c.$,n={};n[k.widgetType.WIDGET]=g;c=k.ussCTI;var e=new b("uss-widget-factory",c.CATEGORY,c.TYPE,c.ITEM);return{registerWidgetType:function(b,e){if(!a.isNonEmptyString(b))throw Error("uss-widget-factory.registerWidgetType()... : name parameter must be valid string. provided name param is \x3d "+
b);if(!(e.prototype instanceof g))throw Error("uss-widget-factory.registerWidgetType()... : constructor.prototype must be instance of Widget. provided constructor param is \x3d "+e);n[b]=e},getWidgetType:function(a){return n[a]},getWidget:function(a){var c,d=e;try{var g=a.widgetType||k.widgetType.WIDGET,h=n[g];if(!h)return f.log("Widget.getWidget()... : Constructor not exist for type : "+g,"FATAL",d.getAttribution()),c;var m=h.getAttribution&&h.getAttribution();m&&(d=m);if(a.attribution)var w=a.attribution,
d=new b(w.name,w.category,w.type,w.item);var r=l(a.content),q=l("\x3cdiv\x3e\x3c/div\x3e");q.append(r);c=new h(d,q)}catch(p){f.log("Widget.getWidget()... : "+p.message,"FATAL",d.getAttribution&&d.getAttribution())}return c}}});f.when("A","uss-constants","dp-flux-view","uss-store-repository","uss-dispatcher").register("uss-widget",function(c,b,a,d,g){function k(a){var b=[];c.each(a,function(a){var e=d.getStore(a);if(e)b.push(e);else throw Error("Widget.getWidget().getStores()... : store with name \x3d "+
a+" not exists");});return b}var l=b.classList,n=b.widgetType;return c.createClass({init:function(b,c){this._element=c;this._element.addClass(n.WIDGET);this._element.addClass(l.HIDE_ELEMENT);this._attribution=b;this._dispacther=g;this.getStoreNames().length&&(c=k(this.getStoreNames()),this._fluxView=new a(b,c,this.update.bind(this)),this.update(c))},show:function(a){a=a||{};a=a.showWidgetAnimation||{};var d=b.animationType;a.animationType=a.animationType||d.NO_ANIMATION;switch(a.animationType){case d.FADE_IN:c.fadeIn(this._element,
a.timeDuration||100,a.transitionTimingFunction||b.transitionTimingFunction.EVEN_EASE);break;case d.NO_ANIMATION:this._element.addClass(l.SHOW_ELEMENT),this._element.removeClass(l.HIDE_ELEMENT)}},hide:function(){this._element.addClass(l.HIDE_ELEMENT);this._element.removeClass(l.SHOW_ELEMENT)},beforeRender:function(){},afterRender:function(){},getElement:function(){return this._element},getAttribution:function(){return this._attribution},getDispatcher:function(){return this._dispacther},update:function(a){},
getStoreNames:function(){return[]},deleteWidget:function(){this._element.remove();this._fluxView&&this._fluxView.unregisterStores()}})});f.when("A","uss-constants","uss-widget-factory","uss-logger-service").register("uss-recommendation-widget",function(c,b,a,d){var g=b.widgetType;c=a.getWidgetType(g.WIDGET);var k=b.classList,l=b.metrics;b=c.extend({init:function(a,b){this._super(a,b);this._element.addClass(g.RECOMMENDATION_WIDGET);this._addTrackingMetrics()},_addTrackingMetrics:function(){this._element.find("."+
k.FACEOUT_IMAGE).click(function(){d.logCounter(l.FACEOUT_IMAGE_CLICK_COUNTER)});this._element.find("."+k.FACEOUT_REVIEW_STARS).click(function(){d.logCounter(l.FACEOUT_REVIEW_STARS_CLICK_COUNTER)});this._element.find("."+k.FACEOUT_PRICE).click(function(){d.logCounter(l.FACEOUT_PRICE_CLICK_COUNTER)});this._element.find("."+k.FACEOUT_TITLE).click(function(){d.logCounter(l.FACEOUT_TITLE_CLICK_COUNTER)});this._element.find("."+k.FACEOUT_BEST_SELLER).click(function(){d.logCounter(l.FACEOUT_BEST_SELLER_CLICK_COUNTER)})}});
a.registerWidgetType(g.RECOMMENDATION_WIDGET,b);return b});f.when("A","uss-constants","uss-widget-factory","dp-flux-attribution","uss-template-store","dp-flux-action","uss-logger-service").register("uss-no-recommendation-widget",function(c,b,a,d,g,k,l){var n=b.widgetType;c=a.getWidgetType(n.WIDGET);var e=b.ussCTI,u=new d(b.widgetType.NO_RECOMMENDATION_WIDGET,e.CATEGORY,e.TYPE,e.ITEM);d=c.extend({init:function(a,e){this._super(a,e);this._element.addClass(n.NO_RECOMMENDATION_WIDGET);a=g.getTemplate(b.widgetType.NO_RECOMMENDATION_WIDGET);
this._element.append(a);this._continueShoppingLink=this._element.find("."+b.classList.CONTINUE_SHOPPING_LINK);this._continueShoppingLink.click(function(a){a.preventDefault();l.logCounter(b.metrics.CONTINUE_SHOPPING_CLICK);this.getDispatcher().dispatch(new k(b.actions.USS_CLOSE,b.actionSources.CONTINUE_SHOPPING_CLICK))}.bind(this))}});d.getAttribution=function(){return u};a.registerWidgetType(n.NO_RECOMMENDATION_WIDGET,d);return d});f.when("A","uss-constants","uss-widget-factory").register("primary-action-status-widget",
function(c,b,a){var d=b.widgetType;c=a.getWidgetType(d.WIDGET).extend({init:function(a,b){this._super(a,b);this.getElement().addClass(d.PRIMARY_ACTION_STATUS_WIDGET)}});a.registerWidgetType(d.PRIMARY_ACTION_STATUS_WIDGET,c);return c});f.when("A","promising-ui-element","uss-utils","uss-constants").register("promising-image",function(c,b,a,d){var g=c.$,k=d.classList;return b.extend({init:function(a,b){this._element=g(b);this._attribution=a;this._super(this._element);this._eventHandle=v},_showTickMarkImage:function(a){switch(a){case k.ATC_SUCCESS:this._showSuccessTickMark();
break;case k.ATC_ERROR:this._showErrorTickMark();break;default:return}c.off(this._eventHandle.event,this._eventHandle.callback)},_showSuccessTickMark:function(){g(".main-image").find(".success-tick-mark-placeholder").addClass("success-tick-mark-image")},_showErrorTickMark:function(){var a=g(".main-image").find(".error-tick-mark-placeholder");a.addClass("error-tick-mark-image");c.fadeIn(a,200,d.transitionTimingFunction.EASE_OUT)},showUIValue:function(b,k,e){var u=this,t=d.defaultAtcAnimationType,h=
this._super.bind(this);t===d.animationType.FADE_IN&&(this._eventHandle=c.on(d.atcAnimationStatusEvent,this._showTickMarkImage.bind(this,e)));return a.loadImage(b,k).then(function(a){if(t===d.animationType.FADE_IN){var b=g(".main-image").find(".ui-promise");c.fadeOut(b,200,d.transitionTimingFunction.EASE_IN,function(){u._appendImageToUIValue(a);h();var b=g(".main-image").find(".ui-value");c.fadeIn(b,200,d.transitionTimingFunction.EASE_OUT)})}else this._appendImageToUIValue(a),h();return!0}.bind(this),
function(){f.log("PromisingImage.showUIValue() ... : failed to load image","FATAL",this._attribution.getAttribution());return!1}.bind(this))},_appendImageToUIValue:function(a){this.getValueElement().empty();this.getValueElement().append(a)}})});f.when("A","promising-ui-element","uss-constants").register("atc-status-msg",function(c,b,a){var d=a.classList;return b.extend({init:function(a){this._atcStatusElement=a;this._super(this._atcStatusElement)},_showSuccessMessage:function(){this._atcStatusElement.addClass(d.ATC_SUCCESS);
this._atcStatusElement.removeClass(d.ATC_ERROR);this._atcStatusElement.removeClass(d.ITEM_IN_CART)},_showFailureMessage:function(){this._atcStatusElement.addClass(d.ATC_ERROR);this._atcStatusElement.removeClass(d.ATC_SUCCESS);this._atcStatusElement.removeClass(d.ITEM_IN_CART)},_showItemInCartMessage:function(){this._atcStatusElement.addClass(d.ITEM_IN_CART);this._atcStatusElement.removeClass(d.ATC_ERROR);this._atcStatusElement.removeClass(d.ATC_SUCCESS)},showUIValue:function(b){var k=this,l=a.defaultAtcAnimationType;
switch(b){case d.ATC_SUCCESS:this._showSuccessMessage();break;case d.ATC_ERROR:this._showFailureMessage();break;case d.ITEM_IN_CART:this._showItemInCartMessage();break;default:return}this._super();l===a.animationType.FADE_IN&&(b=this._atcStatusElement.find("."+d.UI_PROMISE),c.fadeOut(b,200,a.transitionTimingFunction.EASE_IN,function(){var b=k._atcStatusElement.find("."+d.UI_VALUE);c.fadeIn(b,200,a.transitionTimingFunction.EASE_OUT,function(){c.trigger(a.atcAnimationStatusEvent)})}))}})});f.when("A",
"promising-ui-element","uss-constants","dp-flux-utils").register("cart-status-message",function(c,b,a,d){var g=a.classList;return b.extend({init:function(a){this._cartStatusElement=a;this._subTotalElement=this._cartStatusElement.find("."+g.CART_SUB_TOTAL);this._cartCountElement=this._cartStatusElement.find("."+g.CART_COUNT);this._cartCountSingularTemplate=this._cartCountElement.data("cart-count-singular-template");this._cartCountPluralTemplate=this._cartCountElement.data("cart-count-plural-template");
this._super(this._cartStatusElement);this._eventHandle=v},_atcAnimationStatusResolved:function(){setTimeout(function(){this._cartStatusElement.addClass("uss-c-cart-status-msg-transition");c.off(this._eventHandle.event,this._eventHandle.callback)}.bind(this),200)},showUIValue:function(b,g){var n=a.defaultAtcAnimationType;if("number"===typeof b&&d.isNonEmptyString(g)){var e;1===b?e=this._cartCountSingularTemplate.replace("###cartCount",b):1<b&&(e=this._cartCountPluralTemplate.replace("###cartCount",
b));this._cartCountElement.html(e);this._subTotalElement.html(g);this._super();n===a.animationType.FADE_IN&&(this._eventHandle=c.on(a.atcAnimationStatusEvent,this._atcAnimationStatusResolved.bind(this)))}}})});f.when("A","a-button","uss-constants","uss-logger-service").register("uss-sub-nav",function(c,b,a,d){var g=a.classList,k=a.metrics;return{getInstance:function(l){var n={},e=l.find("."+g.CHECKOUT_FORM);b("."+g.CHECKOUT_BUTTON,l);var u=l.find("."+g.CART_BUTTON),t=v;e.submit(function(){d.logCounter(k.CHECKOUT_FORM_CLICK_COUNTER)});
u.click(function(){d.logCounter(k.CART_BUTTON_CLICK_COUNTER)});n.updateCheckoutUrl=function(a){e.attr("action",a)};n.hide=function(){c.$(l).addClass("is-hidden")};n.atcAnimationStatusResolved=function(){setTimeout(function(){c.$(l).addClass("uss-c-sub-nav-margin");c.$(l).addClass("uss-c-sub-nav-transition");c.off(t.event,t.callback)}.bind(),200)};n.show=function(){c.$(l).removeClass("is-hidden");a.defaultAtcAnimationType===a.animationType.FADE_IN&&(t=c.on(a.atcAnimationStatusEvent,n.atcAnimationStatusResolved.bind()))};
n.preInitiate=function(){var a=e.parent();a.find("iframe#ussCheckoutPrefetch").remove();var b=(new Date).getTime(),c="/gp/checkoutprefetch/checkout-prefetch.html?cartInitiateId\x3d"+b,d=document.createElement("iframe");d.setAttribute("src",c);d.setAttribute("style","width:0px;height:0px;display:none;position:absolute;");d.setAttribute("name","ussCheckoutPrefetch");d.setAttribute("id","ussCheckoutPrefetch");a.append(d);a=e.find("#cartInitiateId");a.length?a.val(b):e.append("\x3cinput type\x3d'hidden' name\x3d'cartInitiateId' id\x3d'cartInitiateId' value\x3d'"+
b+"'\x3e")};n.hide();return n}}});f.when("A","uss-constants").register("uss-shipping-details",function(c,b){var a=c.$;return{getInstance:function(d){var g=d.find("."+b.classList.SHIPPING_DETAILS),k=g.find("."+b.classList.SHIPPING_MESSAGE_PLACEHOLDER),l=b.defaultAtcAnimationType,n=v,e=function(){var b=k.find(".a-row").find("a"),e=b.attr("onclick");if("undefined"!==typeof e&&e.includes("amz_js_PopWin")){var c=[];a.each(b[0].attributes,function(a,b){c.push(b.name)});a.each(c,function(a,e){b.removeAttr(e)});
b.attr("href","/gp/help/customer/display.html?nodeId\x3d527692")}},u={hide:function(){g.addClass(b.classList.HIDE_ELEMENT);g.removeClass(b.classList.SHOW_ELEMENT)},atcAnimationStatusResolved:function(){setTimeout(function(){g.addClass("uss-c-shipping-details-transition");c.off(n.event,n.callback)}.bind(),200)},show:function(a){k.empty();k.append(c.$(a));e();g.addClass(b.classList.SHOW_ELEMENT);g.removeClass(b.classList.HIDE_ELEMENT);l===b.animationType.FADE_IN&&(n=c.on(b.atcAnimationStatusEvent,u.atcAnimationStatusResolved.bind()))}};
u.hide();return u}}});f.when("A","uss-constants","primary-action-status-widget","dp-flux-attribution","uss-widget-factory","atc-status-msg","cart-status-message","promising-image","uss-sub-nav","uss-shipping-details").register("atc-status-widget",function(c,b,a,d,g,k,l,n,e,u){var t=b.ussCTI,h=b.widgetType,f=b.classList,m=new d(b.widgetType.ATCStatusWidget,t.CATEGORY,t.TYPE,t.ITEM);a=a.extend({init:function(a,b){this._atcGenericError=b.find("."+f.ATC_GENERIC_ERROR);this._atcAcknowledgementMessage=
b.find("."+f.ATC_ACKNOWLEDGEMENT_MESSAGE);this._mainImage=new n(a,this._atcAcknowledgementMessage.find("."+f.MAIN_IMAGE));this._atcStatusMessage=new k(this._atcAcknowledgementMessage.find("."+f.ATC_STATUS_MESSAGE_COMPONENT));this._cartStatusMessage=new l(this._atcAcknowledgementMessage.find("."+f.CART_STATUS_MESSAGE_COMPONENT));this._subNav=e.getInstance(this._atcAcknowledgementMessage.find("."+f.SUB_NAV));this._shippingDetails=u.getInstance(this._atcAcknowledgementMessage);this._viewState={};this._super(a,
b)},update:function(a){var e;c.each(a,function(a){if(a.getStoreAttribution().getName()===b.stores.ATC_STATUS_STORE){var d=a.getDispatcher()._pendingAction;d&&d.getName()===b.actions.ATC_RECEIVE&&this._subNav.preInitiate();e=a.getState();e.isAtcGenericError?this.showGenericError():(a=c.diff(this._viewState,e),a.status&&e.status&&this._atcStatusMessage.showUIValue(e.status),a.cart.count&&e.cart.count&&(this._cartStatusMessage.showUIValue(e.cart.count,e.cart&&e.cart.subTotal&&e.cart.subTotal.displayString||
""),a.cart.checkoutUrl&&e.cart.checkoutUrl&&this._subNav.updateCheckoutUrl(e.cart.checkoutUrl),this._subNav.show()),a.mainImage.src&&e.mainImage.src&&this._mainImage.showUIValue(e.mainImage.src,e.mainImage.altText,e.status),a.shippingMessageHTML&&e.shippingMessageHTML&&this._shippingDetails.show(e.shippingMessageHTML));this._viewState=e}}.bind(this))},showGenericError:function(){this._atcAcknowledgementMessage.addClass(f.HIDE_ELEMENT);this._atcAcknowledgementMessage.removeClass(f.SHOW_ELEMENT);this._atcGenericError.removeClass(f.HIDE_ELEMENT);
this._atcGenericError.addClass(f.SHOW_ELEMENT)},getStoreNames:function(){return[b.stores.ATC_STATUS_STORE]}});a.getAttribution=function(){return m};g.registerWidgetType(h.ATCStatusWidget,a);return a});f.when("A","uss-constants","dp-flux-attribution","uss-widget-factory").register("atc-status-imb-widget",function(c,b,a,d){var g=d.getWidgetType(b.widgetType.WIDGET),k=b.ussCTI,l=new a("atc-status-imb-widget",k.CATEGORY,k.TYPE,k.ITEM);a=g.extend({init:function(a,e){e.addClass(b.widgetType.ATC_STATUS_IMB_WIDGET);
this._super(a,e)},update:function(a){var e;c.each(a,function(a){if(a.getStoreAttribution().getName()===b.stores.ATC_STATUS_STORE)if(e=a.getState(),e.imbHTML){this.getElement().empty();a=c.$(e.imbHTML);var d=a.children().length;if(1<=d){a.find(".a-declarative a").unwrap();var k=a.find(".a-declarative span");k.removeClass("a-color-link huc-cursor-pointer");k.unwrap();this.getElement().append(a);this.show();1<d&&f.log("ImbWidget.update(...): More than one IMB message exist : html \x3d "+e.imbHTML,"WARN",
l.getAttribution())}else this.hide()}else this.hide()}.bind(this))},afterRender:function(){this.hide()},getStoreNames:function(){return[b.stores.ATC_STATUS_STORE]}});a.getAttribution=function(){return l};d.registerWidgetType(b.widgetType.ATC_STATUS_IMB_WIDGET,a);return a});f.when("A").register("uss-base-layout",function(c){return c.createClass({init:function(b){this._ussSheetElement=b},renderWidgets:function(b){throw Error("Layout.renderWidgets()...: Subclass must implement update method");},reset:function(){throw Error("Layout.reset()...: Subclass must implement reset method");
},getUssSheetElement:function(){return this._ussSheetElement}})});f.when("A","uss-base-layout","promising-ui-element","uss-constants","primary-action-status-widget","atc-status-imb-widget").register("uss-default-layout",function(c,b,a,d,g,k){var l=d.layout.defaultLayout;return b.extend({init:function(a){this._super(a);this._element=a.find("."+l.DEFAULT_LAYOUT);this._ussHead=this._element.find("."+l.HEAD);this._ussBody=this._element.find("."+l.BODY);this._widgetList=[];this._recommendationLoader=c.$("."+
l.SKELETON_LOADER);this._recommendationLoadingMessage=c.$("."+l.RECOMMENDATION_LOADING_MESSAGE);this._recommendationLoadedMessage=c.$("."+l.RECOMMENDATION_LOADED_MESSAGE);this._ussBody.append(this._recommendationLoader);this._recommendationLoaderFadeOutOptions={timeDuration:200,transitionTimingFunction:d.transitionTimingFunction.EASE_IN};this._recommendationLoaderFadeInOptions={timeDuration:200,transitionTimingFunction:d.transitionTimingFunction.EASE_OUT};this._recommendationWidgetOptions={showWidgetAnimation:{animationType:d.animationType.FADE_IN,
timeDuration:200,transitionTimingFunction:d.transitionTimingFunction.EASE_OUT}}},renderWidgets:function(a){var b,d=!1;c.each(a,function(a){b={};a.beforeRender();this._widgetList.push(a);if(a instanceof g)this._ussHead.prepend(a.getElement());else if(a.getElement().addClass(l.BOTTOM_MARGIN_BETWEEN_WIDGETS),a.getElement().addClass(l.TOP_MARGIN_BETWEEN_WIDGETS),a instanceof k)this._ussBody.prepend(a.getElement());else{if(!d){d=!0;var h=this;c.fadeOut(this._recommendationLoader,this._recommendationLoaderFadeOutOptions.timeDuration,
this._recommendationLoaderFadeOutOptions.transitionTimingFunction,function(){c.fadeIn(h._recommendationLoadedMessage,h._recommendationLoaderFadeInOptions.timeDuration,h._recommendationLoaderFadeInOptions.transitionTimingFunction)})}b=this._recommendationWidgetOptions;this._ussBody.append(a.getElement())}a.show(b);a.afterRender()}.bind(this))},reset:function(){c.each(this._widgetList,function(a){a.deleteWidget()});this._widgetList=[];this._ussBody.empty();this._ussBody.append(this._recommendationLoader);
this._ussBody.append(this._recommendationLoadedMessage);this._recommendationLoader.css({display:"block"});this._recommendationLoadingMessage.css({display:"none"});this._recommendationLoadedMessage.css({display:"none"});this.resetScrollPosition()},resetScrollPosition:function(){this._ussBody.scrollTop(0)}})});f.when("uss-constants","dp-flux-action","uss-dispatcher","uss-utils").register("uss-action-creator-helper",function(c,b,a,d){function g(){h.$("#add-to-cart-button").removeAttr("disabled")}return{primaryATCClick:function(k,
l){var h=new b(c.actions.USS_OPEN,c.actionSources.DP_ATC_CLICK,{recommendationBaseIdentifier:k});l.percolateData.then(function(e){var d={isContainsRecommendation:!1,widgets:[]};e.recommendationData&&(d.widgets=e.recommendationData.widgets||[]);g();d.widgets.length||(d.widgets.push({widgetType:c.widgetType.NO_RECOMMENDATION_WIDGET}),d.recommendationBaseIdentifier=k);a.dispatch(h);l.atcData.then(function(e){var d={};1===e.isOk?d=e.atcStatusData:d.isAtcGenericError=!0;e=new b(c.actions.ATC_RECEIVE,c.actionSources.DP_ATC_CLICK,
d);a.dispatch(e)},function(){var e=new b(c.actions.ATC_RECEIVE,c.actionSources.DP_ATC_CLICK,{isAtcGenericError:!0});a.dispatch(e)});d.recommendationBaseIdentifier=k;e=new b(c.actions.RECOMMENDATION_DATA_RECEIVE,c.actionSources.DP_ATC_CLICK,d);a.dispatch(e)},function(){l.atcData.then(function(a){g();1===a.isOk?d.showATCSuccess():d.showATCFailure()},function(){d.showATCFailure()})})},secondaryATCClick:function(d,g){d.atcData.then(function(d){var e={};1===d.isOk?e=d.atcStatusData:e.isAtcGenericError=
!0;e.params=g;d=new b(c.actions.ATC_RECEIVE,c.actionSources.USS_INLINE_ATC_CLICK,e);a.dispatch(d)},function(){})}}})},initializeUSSComponents:function(){f.when("uss-template-store","uss-sheet-store","uss-recommendation-data-store","uss-store-repository","uss-widget","uss-recommendation-widget","primary-action-status-widget","uss-widget-factory","uss-sheet-view","uss-layout").register("uss-framework-ready",function(c){c.init()});f.when("uss-sheet-view","uss-framework-ready").register("uss-sheet-view-ready",
function(c){c.initializeUSSSheetView()})},initializeBuyBox:function(){f.when("buy-box-override","atc-status-widget","atc-status-imb-widget","uss-atc-status-store","uss-framework-ready","uss-sheet-view-ready").execute(function(c){c.init()})}}});f.when("A","uss-constants","uss-logger-service").register("uss-eligibility",function(h,f,m){var q=f.metrics,c={};return{getUssEligibility:function(b,a){return{primaryAsinData:{asin:b,offerListingId:a},eligibility:c}},registerProgramEligibility:function(b,a){b&&
(c[b]&&m.logCounter(q.PROGRAM_ELIGIBILITY_REGISTRY_OVERWRITTEN+"."+programName),c[b]=a)}}});f.when("A","atf","uss-init-helper","uss-preconditions","uss-logger-service","uss-constants").register("uss-init",function(h,r,m,q,c,b){function a(){m.loadUssCommonAssets();f.when("A","3p-promise","uss-light-box","uss-constants","uss-logger-service").register("uss-sheet-component",function(a,b,d,e,c){function g(b,l){if(!(this instanceof g))throw Error(r.INVALID_CONSTRUCTOR_USAGE);if("string"===typeof b)if(this._sheet=
h("#"+b),1===this._sheet.length)this._sheetID=b,this._sheet.addClass(f.RIGHT_SIDE_SHEET),this._sheet.addClass(f.RIGHT_SIDE_SHEET_LAYOUT),this._sheet.addClass(f.SHEET_CLOSE),this._sheet.attr("role","dialog"),this._sheet.appendTo(p),this._closeIcon=this._createCloseIcon(),this._closeIcon.click(function(){var a=this.close();l.beforeClose&&l.beforeClose(a);c.logCounter(this._sheetID+":closeIconClick")}.bind(this)),this._sheet.append(this._closeIcon),d.getElement().click(function(){var a=this.close();
l.beforeClose&&l.beforeClose(a);c.logCounter(this._sheetID+":lightBoxClick")}.bind(this)),this._sheet.removeClass(f.HIDE_ELEMENT),a.on(e.atcAnimationStatusEvent,function(){v.is(":visible")&&a.fadeIn(B,200,m.EASE_OUT)});else throw Error("Unique element with id '"+b+"' must exist inside a DOM");else throw Error(r.INVALID_SHEET_ID);}var h=a.$,f=e.classList,m=e.transitionTimingFunction,r=e.fatalMessagesList,q=e.layout.defaultLayout,p=h("body"),v=h("."+q.SKELETON_LOADER),B=h("."+q.RECOMMENDATION_LOADING_MESSAGE);
g.prototype.open=function(){var e=this;return new b(function(b){var g=e._getSheetSize();e._sheet.css({right:"-"+g+"px"});d.show();a.animationFrameDelay(function(){a.animate(e._sheet,{right:0},400,m.ENTER_EASE,function(){e._sheet.removeClass(f.SHEET_CLOSE);e._sheet.addClass(f.SHEET_OPEN);e.showCloseIcon();b(!0);c.logCounter(e._sheetID+":open")})});e._closeIcon.css({right:g+15+"px"})})};g.prototype.close=function(){return new b(function(b){var e="-"+this._getSheetSize()+"px";a.animate(this._sheet,{right:e},
300,m.EXIT_EASE,function(){this._sheet.removeClass(f.SHEET_OPEN);this._sheet.addClass(f.SHEET_CLOSE);b(!0);c.logCounter(this._sheetID+":close")}.bind(this));this.hideCloseIcon();d.hide()}.bind(this))};g.prototype.getSheetElement=function(){return this._sheet};g.prototype._getSheetSize=function(){return this._sheet.outerWidth()};g.prototype._createCloseIcon=function(){return h("\x3cdiv class \x3d '"+(f.CLOSE_ICON+" "+f.CLOSE_ICON_MEDIUM+"  "+f.HIDE_ELEMENT)+"'\x3e\x3c/div\x3e")};g.prototype.showCloseIcon=
function(){a.fadeIn(this._closeIcon,200,m.EVEN_EASE)};g.prototype.hideCloseIcon=function(){a.fadeOut(this._closeIcon,200,m.EVEN_EASE)};return g});f.when("A","uss-constants","uss-utils").register("uss-light-box",function(a,b,d){var e=a.$,c=b.classList,g=e("\x3cdiv class\x3d'"+c.LIGHT_BOX_IDENTIFIER+" "+c.LIGHT_BOX_JS_HOOK+" "+c.HIDE_ELEMENT+"'\x3e\x3c/div\x3e");e("body").append(g);return{show:function(){g.addClass(c.SHOW_ELEMENT);g.removeClass(c.HIDE_ELEMENT);d.disablePageScroll();a.animationFrameDelay(function(){a.animate(g,
{opacity:.6},400,b.transitionTimingFunction.EVEN_EASE)})},hide:function(){g.removeClass(c.SHOW_ELEMENT);a.animate(g,{opacity:0},300,b.transitionTimingFunction.EVEN_EASE,function(){g.addClass(c.HIDE_ELEMENT);g.removeClass(c.SHOW_ELEMENT);d.enablePageScroll()})},getElement:function(){return g}}});f.when("A","uss-constants","dp-flux-attribution","dp-flux-view","uss-store-repository","uss-atc-status-store").register("nav-bar-cart-count-view",function(a,b,d,e,c,g){var h=a.$;a=b.ussCTI;d=new d("nav-bar-cart-count-view",
a.CATEGORY,a.TYPE,a.ITEM);g=c.getStore(b.stores.ATC_STATUS_STORE);new e(d,[g],function(a){if(-1!==h.inArray(g,a)){var b=g.getState();p.$Nav.when("api.setCartCount").run(function(a){b.cart.count&&a(b.cart.count)})}})});f.when("A").register("buy-box-utility",function(a){var b=a.$;return{isWarrantySelectedInBuyBox:function(){var a=!1;b("#abbWrapper .abbListItem input[type\x3dcheckbox]").each(function(){a=a||b(this).prop("checked")});return a}}});f.when("A","uss-action-creator-helper","uss-preconditions",
"uss-logger-service","uss-constants","uss-utils","uss-eligibility","uss.cart.add-items","aapi-handler","percolateUI-ajax-utility").register("uss-atc",function(a,b,d,e,c,g,h,f,m,r){function q(){a.$("#add-to-cart-button").attr("disabled",!0);var b=a.$("#a-page");0!==b.length&&(b[0].style.opacity=.3)}function p(a){this.widgetName=a;this.isPrimaryAtc="DetailPageBuyBox"===a}function v(){var b=a.$("body");return(b=a.parseJSON(b.find("[data-a-state*\x3datc-page-state]").html()))&&b.shouldUseNatc?b.shouldUseNatc:
!1}function B(){var a="",b=x("#addToCart");0!=b.length&&(a=b.attr("action"));return a}var x=a.$,E=c.ajaxParams.AJAX_TIMEOUT,C={},y=c.metrics,A=c.queryStrings;p.prototype._addQueryParams=function(a){var b="",e=g.getUrlParameter(A.qid),d=g.getUrlParameter(A.sr);null!=e&&null!=d&&(b=A.qid+"\x3d"+e+"\x26"+A.sr+"\x3d"+d);a.queryString=b;return a};p.prototype._addUssParameters=function(a){a.params.isUSSAjax=1;this.isPrimaryAtc&&(a.params.isPrimaryATC=1,g.shouldFireAndForgetWeblabTrigger()||(a.params.triggerUSSWeblab=
d.triggerUSSWeblabValue()));a=this._addEligibilityParameters(a);var b=g.getDebugParams();Object.keys(b).forEach(function(e){a.params[e]=b[e]});return a};p.prototype._addEligibilityParameters=function(a){var b=h.getUssEligibility(a.params[c.ajaxParams.ASIN],a.params[c.ajaxParams.OFFER_LISTING_ID]);a.params.ussEligibility=JSON.stringify(b);return a};p.prototype._callback=function(){var a=arguments[0],b=Array.prototype.slice.call(arguments,1);"function"===typeof a&&a.apply(this,b)};var D=function(a,
d,c,g,k,h){g?(e.logCounter(y.PRIMARY_ADD_TO_CART_CLICK_COUNTER),h=r.callPercolateUI(a,d),k.percolateData=h,b.primaryATCClick(a,k)):(d={},d.baseAsin=a,d.baseReftag=c,e.logCounter(y.SECONDARY_ADD_TO_CART_CLICK_COUNTER),b.secondaryATCClick(k,d))},z=function(a,b,e,d,c,k,h,f){m.atcStatusDataByApi(a,d).then(function(g){g.atcStatusData.status=h;k.resolve(g);D(a,b,e,d,c,f)}).catch(function(l){k.reject();d&&h?(g.handleATCAnimationEndWeb(),g.showATCSuccess()):D(a,b,e,d,c,f)});c.atcData=k},F=function(b,d,c,
g,h,f,l,n,u){var t=0;a.post(u,{params:f.params,success:function(a,k,u){f.hasOwnProperty("success")&&self._callback(f.success,a,k,u);e.logCounter(y.USS_PRIMARY_ATC_DEFAULT_ENDPOINT_SUCCESS_RESPONSE);t=1;z(b,d,c,g,l,h,t,n)},error:function(a,k,u){f.hasOwnProperty("error")&&self._callback(f.error,a,k,u);e.logCounter(y.USS_PRIMARY_ATC_DEFAULT_ENDPOINT_FAIL_RESPONSE);z(b,d,c,g,l,h,t,n)},abort:function(a){f.hasOwnProperty("abort")&&self._callback(f.abort,a);z(b,d,c,g,l,h,t,n)},timeout:f.timeout||E})},G=
function(a,b,d,c,g,k,h,l,n){var u=0,t=new e.Timer(y.SECONDARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER);t.start();l.done(function(a){t.stop()});l.fail(function(){e.logCounter(y.SECONDARY_ADDITEMS_API_PROMISE_REJECTED_COUNTER);t.stop()});k.inputs=k.params;var m=k.inputs;m&&m["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]&&(m["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]="true"===m["items[0.base][additionalParameters][giftOptions][includeGiftReceipt]"]);
f.addItems(k,c).then(function(a){l.resolve(a)}).catch(function(a){l.reject(a)});h.addItems=l;h.addItems.then(function(e){u=1;z(a,b,d,c,h,g,u,n)},function(e){z(a,b,d,c,h,g,u,n)})};p.prototype._addToCart=function(a,b){this.isPrimaryAtc&&d.isUssWeblabInTreatment()&&q();b=this._addUssParameters(b);b=this._addQueryParams(b);var g=x.Deferred(),k=x.Deferred(),h=x.Deferred(),f={},l=b.params.a;a=a.ref;var t=b.params[c.ajaxParams.OFFER_LISTING_ID],m=this.isPrimaryAtc,r=B();f.atcData=g;var p=new e.Timer(m?y.PRIMARY_ATC_STATUS_PROMISE_RESOLVED_TIMER:
y.SECONDARY_ATC_STATUS_PROMISE_RESOLVED_TIMER);p.start();g.done(function(a){p.stop()});g.fail(function(){p.stop()});m&&!v()?F(l,t,a,m,g,b,f,h,r):G(l,t,a,m,g,b,f,h,k);return f};return{addToCart:function(a,b,e){if(!a||!a.trim().length||"object"!==typeof b)throw c.fatalMessagesList.INCORRECT_PARAMETER_PASSED;C[a]||(C[a]=new p(a));return C[a]._addToCart(e,b)}}});f.when("A","uss-atc","uss-action-creator-helper","uss-preconditions","uss-logger-service","uss-constants","buy-box-utility","uss-utils").register("buy-box-override",
function(a,b,d,e,c,g,h,f){var m=a.$;a={actionButton:null,AllowedActions:{"submit.add-to-cart":1},init:function(){this.checkPreconditionsAndManipulateBuyBox()},checkPreconditionsAndManipulateBuyBox:function(){this.buyBoxForm=m("#addToCart");e.isUssConditionsPassed()&&this.attachFormHandler()},attachFormHandler:function(){this.buyBoxForm.submit(this.submitForm.bind(this));this.buyBoxForm.find("input[type\x3dsubmit], input[type\x3dbutton]").click(function(a){this.actionButton=a.target}.bind(this))},
isValidAction:function(){return this.actionButton&&this.actionButton.name in this.AllowedActions},submitForm:function(a){if(!h.isWarrantySelectedInBuyBox()&&this.isValidAction())if(e.isUssWeblabInTreatment()){a.preventDefault();a={params:this.getAddToCartParameters()};var d={ref:g.ajaxParams.REFTAG};f.shouldFireAndForgetWeblabTrigger()&&f.fireAndForgetWeblabTrigger(e.triggerUSSWeblabValue(),e.ussWeblabTreatmentValue());b.addToCart("DetailPageBuyBox",a,d)}else c.logCounter(g.metrics.POST_ATC_WEBLAB_DISABLED),
f.shouldFireAndForgetWeblabTrigger()?f.fireAndForgetWeblabTrigger(e.triggerUSSWeblabValue(),e.ussWeblabTreatmentValue()):this.addHiddenUSSField("triggerUSSWeblab",e.triggerUSSWeblabValue());else c.logCounter(g.metrics.POST_ATC_WARRANTY_SELECTED_OR_INVALID_ACTION)},addHiddenUSSField:function(a,b){m("\x3cinput\x3e").attr({type:"hidden",id:a,name:a,value:b}).appendTo(this.buyBoxForm)},getAddToCartParameters:function(){var a={},b=this.buyBoxForm.serializeArray();m.each(b,function(b,e){a[e.name]=e.value});
return a}};return{init:a.init.bind(a)}})}function d(){q.isUssConditionsPassed()&&(c.logCounter(b.metrics.PAGE_LANDING_PRECONDITIONS_PASSED),g||(a(),g=!0,m.initializeUSSComponents()),m.initializeBuyBox())}var g=!1;h.on("PageRefresh:ATF",function(){d()});d()});"use strict";f.when("jQuery","A","a-component","uss-widget-footer","uss-widget-partial-content","uss-widget-full-content","p13n-sc-call-on-visible","p13n-sc-logger").register("uss-list-widget",function(h,f,m,q,c,b,a,d){function g(a){var b="a:expandControl:"+
a._$footer.getName()+":toggle";f.on(b,function(){var b=!a.isExpanded();a._$element.attr("data-a-expanded",b);l(a,b);a._$firstToggleEvent&&0<a._$widgetImpressionElement.length&&(a._$firstToggleEvent=0,k(a._$widgetImpressionElement,a._$fullContent._$element,{action:"see_more"}))})}function k(b,c,g){a.register(b,function(){d.logAsyncAction(h.extend(!0,{},{featureElement:b,isEventComplete:function(){return c.is(":visible")},logOnlyNew:!0,replicateAsinImpressions:!0},g))},{distance:10})}function l(a,b){a._$footer.toggleExpansion(b,
!a.isExpanded(),a._$firstToggleEvent);a._$fullContent.toggleExpansion(b);a._$partialContent.toggleExpansion(b)}var n=m.create({_componentName:"ussListWidget",init:function(a,h){this._super(a,h);this._$partialContent=c(this._$element.find(".uss-partial-list-container"));this._$fullContent=b(this._$element.find(".uss-full-list-container"));this._$footer=q(this._$element.find(".uss-widget-footer"));this._$firstToggleEvent=1;this._$widgetImpressionElement=this._$element.find(".p13n-sc-static-list");0<
this._$widgetImpressionElement.length&&("function"===typeof d.resetImpressions&&d.resetImpressions(this._$widgetImpressionElement.attr("data-p13n-feature-name")),k(this._$widgetImpressionElement,this._$partialContent._$element,{action:"view",initialDelay:0}));g(this);l(this,this.isExpanded())},isExpanded:function(){return"true"===this._$element.attr("data-a-expanded")}});return function(a,b){return new n(a,b)}});f.when("jQuery","A").execute("uss-sp-help-link",function(h,f){f.on("a:popover:beforeShow:uss-sp-help-link-popover",
function(h){h.popover.$container.css("z-index",501)})});"use strict";f.when("jQuery","A","p13n-sc-line-truncator","a-component").register("uss-widget-partial-content",function(h,f,m,q){var c=q.create({_componentName:"ussWidgetPartialContent",init:function(b,a){this._super(b,a);this._$element.find(".p13n-sc-truncate").toggleClass("uss-asin-title");m.truncateLines(this._$element);f.loadDynamicImage(this._$element.find(".p13n-sc-list-image-container"))},toggleExpansion:function(b){var a=this;a._$element.attr("data-a-expanded",
b);b?a._$element.hide():f.delay(function(){a._$element.show()},50)}});return function(b,a){return new c(b,a)}});"use strict";f.when("jQuery","A","p13n-sc-line-truncator","a-component").register("uss-widget-full-content",function(h,f,m,q){var c=q.create({_componentName:"ussWidgetFullcontent",init:function(b,a){this._super(b,a);this._$dynamicImagesLoaded=this._$isTitleTruncated=!1;b=this._$element.find(".p13n-sc-truncate");b.toggleClass("uss-asin-title");b.attr("data-rows","4")},toggleExpansion:function(b){var a=
this;a._$element.attr("data-a-expanded",b);b?f.delay(function(){a._$element.show();m.truncateLines(a._$element);a._$dynamicImagesLoaded||(f.loadDynamicImage(a._$element.find(".p13n-sc-list-image-container")),a._$dynamicImagesLoaded=!0)},50):a._$element.hide()}});return function(b,a){return new c(b,a)}});"use strict";f.when("jQuery","A","a-component","uss-widget-see-more","uss-widget-expander-icon","uss-constants","uss-logger-service").register("uss-widget-footer",function(f,r,m,q,c,b,a){function d(b){var d=
b.getName();b=b.isExpanded();r.trigger("a:expandControl:"+d+":toggle");b?(a.logCounter(g.SEE_LESS_CLICK_COUNTER),a.logCounter(g.SEE_LESS_CLICK_COUNTER+":"+d)):(a.logCounter(g.SEE_MORE_CLICK_COUNTER),a.logCounter(g.SEE_MORE_CLICK_COUNTER+":"+d))}var g=b.metrics,k=function(a,b){return a+":"+b},l=m.create({_componentName:"ussWidgetFooter",init:function(b,e){var f=this;f._super(b,e);f._$expanderIcon=c(f._$element.find(".uss-expander-icon-container"));f._$seeMore=q(f._$element.find(".uss-see-more"));f._$element.length&&
(a.logCounter(g.SEE_MORE_EXISTENCE_COUNTER),a.logCounter(k(g.SEE_MORE_EXISTENCE_COUNTER,f.getName())));f._$element.click(function(){d(f)});f._$element.keypress(function(a){var b=r.constants.keycodes;a=a.which;a!==b.ENTER&&a!==b.SPACE||d(f)})},toggleExpansion:function(a,b,d){var c=this;c._$element.attr("data-a-expanded",a);r.fadeOut(c._$element,200,"linear",function(){c._$seeMore.toggleSeeMore(a);c._$expanderIcon.toggleExpanderIcon(a);r.fadeIn(c._$element,200)});a||!b||d||c._$element.parent().get(0).scrollIntoView(!0)},
isExpanded:function(){return"true"===this._$element.attr("data-a-expanded")},getName:function(){return this._$element.attr("data-name")}});return function(a,b){return new l(a,b)}});"use strict";f.when("jQuery","A","a-component").register("uss-widget-see-more",function(f,r,m){var q=m.create({_componentName:"ussWidgetSeeMore",init:function(c,b){this._super(c,b);this._$seeMoreText=this._$element.find(".uss-see-more-text");this._$seeLessText=this._$element.find(".uss-see-less-text")},toggleSeeMore:function(c){this._$seeMoreText.toggle(!c);
this._$seeLessText.toggle(c)}});return function(c,b){return new q(c,b)}});"use strict";f.when("jQuery","A","a-component").register("uss-widget-expander-icon",function(f,r,m){var q=m.create({_componentName:"ussWidgetExpanderIcon",init:function(c,b){this._super(c,b);this._$icon=this._$element.find(".uss-expander-icon")},toggleExpanderIcon:function(c){this._$icon.toggleClass("a-css-icon-expand",!c).toggleClass("a-css-icon-collapse",c)}});return function(c,b){return new q(c,b)}});"use strict";f.when("jQuery",
"A","uss-atc").execute("uss-inline-atc",function(f,r,m){function q(b){var a={};b.find("input[type\x3dhidden]").each(function(b,c){a[c.name]=f(c).val()});return a}function c(b,a,d,c){b.atcData.then(function(b){c.hide();1===b.isOk?a.show():d.show()},function(){c.hide();d.show()})}(function(){f("body").delegate(".uss-list-widget .uss-add-to-cart-button","click",function(b){b=f(b.currentTarget);var a=b.parent().find("input[name\x3dASIN]").val(),d=f(".uss-add-to-cart-form-"+a),a=d.siblings(".uss-atc-success"),
g=d.siblings(".uss-atc-error"),k=d.siblings(".uss-atc-spinner");d.hide();k.show();var l={params:q(d)},n=JSON.parse(d.attr("data-link-params")),d={linkParams:f.param(n),ref:d.attr("data-ref")};b=m.addToCart(b.parents(".uss-widget-body").attr("data-p13n-feature-name"),l,d);c(b,a,g,k)})})()});f.when("uss-constants-common").register("nexus-util",function(f){return{emitCounterData:function(r,m){r={counterName:r,counterValue:m};p.ue&&ue.event&&p.ue.event(r,f.nexusConstants.PRODUCER_ID,f.nexusConstants.SCHEMA_ID+
f.nexusConstants.SCHEMA_VERSION)}}});f.when("A","3p-promise","uss-constants").register("uss-amazonapi-client",function(f,r,m){function q(a){var c=f.$(b.ENDPOINT).val()+"/"+a.apiPath,g=[];if(a.additionalParameters)for(var k in a.additionalParameters)a.additionalParameters.hasOwnProperty(k)&&g.push(k+"\x3d"+encodeURIComponent(a.additionalParameters[k]));g.length&&(c+="?"+g.join("\x26"));return c}function c(a){var c=f.$(b.CSRF_TOKEN).val(),g;g=["application/vnd.com.amazon.api+json",'type\x3d"'+a.responseType+
'"'];a.resourceInclusions&&g.push('expand\x3d"'+a.resourceInclusions.join(",")+'"');g=g.join("; ");var k;k=f.$(b.LANGUAGE_OF_PREFERENCE).val();a.languageOfPreference&&(k=a.languageOfPreference);k=k.replace(/_/g,"-");c={Accept:g,"Accept-Language":k,"x-api-csrf-token":c};a.requestType&&(c["Content-Type"]='application/vnd.com.amazon.api+json; type\x3d"'+a.requestType+'"');return c}var b={CSRF_TOKEN:"#uss-amazonApiAjaxCsrfToken",ENDPOINT:"#uss-amazonApiAjaxEndpoint",LANGUAGE_OF_PREFERENCE:"#uss-languagePreference"};
return{makeRequest:function(a){return new r(function(d,g){var k=q(a),l=c(a),m=a.data?JSON.stringify(a.data):v,e;e="integ.amazon.com"!==f.$(b.ENDPOINT).val().split("/")[2].substring(8,24)?"prod":void 0;return f.$.ajax({type:a.method,url:k,headers:l,data:m,xhrFields:{withCredentials:!0},dataType:"json",success:function(a){a.environment=e;d(a)},error:function(a){var b={statusCode:a.status,xhr:a};if(a.responseText)try{b.data=JSON.parse(a.responseText)}catch(c){b.data=a.responseText}g(b)}})})}}});f.when("summary-api",
"productV2Images-api","3p-promise","uss-constants","uss-logger-service").register("aapi-handler",function(f,r,m,q,c){var b=q.metrics,a=q.cartApiConstants,d=new c.Timer(b.PRIMARY_SUMMARY_API_PROMISE_RESOLVED_TIMER),g=new c.Timer(b.SECONDARY_SUMMARY_API_PROMISE_RESOLVED_TIMER),k=new c.Timer(b.PRODUCTV2IMAGES_API_PROMISE_RESOLVED_TIMER),l=function(d,g){d=r.productV2Images(d);d.then(function(b){if(!(b&&b.entity&&b.entity.productImages&&b.entity.productImages.entity&&b.entity.productImages.entity.images))throw b;
var c=b.entity.productImages.entity.images[0].lowRes.physicalId,d=b.entity.productImages.entity.images[0].lowRes.extension,e=b.entity.productImages.entity.altText;b=b.environment===a.USS_ENVIRONMENT_PROD?a.USS_PRODUCTV2IMAGES_PROD_URL_PATH+c+a.USS_PRODUCTV2IMAGES_DIMENSIONS+d:a.USS_PRODUCTV2IMAGES_DEV_URL_PATH+c+a.USS_PRODUCTV2IMAGES_DIMENSIONS+d;g.mainImage.altText=e;g.mainImage.src=b;k.stop()}).catch(function(a){c.logCounter(b.PRODUCTV2IMAGES_API_PROMISE_REJECTED_COUNTER);k.stop();return a});return d},
n=function(a,k,l){a=f.summary(a);a.then(function(a){if(!(a&&a.entity&&a.entity.summary&&a.entity.summary[0]))throw a;var b=a.entity.summary[0].subtotal;k.cart.count=a.entity.summary[0].itemCount;k.cart.subTotal.amount=b.amount;k.cart.subTotal.displayString=b.displayString;k.cart.subTotal.iso=b.currencyCode;l?d.stop():g.stop()}).catch(function(a){c.logCounter(l?b.PRIMARY_SUMMARY_API_PROMISE_REJECTED_COUNTER:b.SECONDARY_SUMMARY_API_PROMISE_REJECTED_COUNTER);l?d.stop():g.stop()});return a};return{atcStatusDataByApi:function(e,
f){return new m(function(h,q){var r={cart:{checkoutUrl:a.USS_CHECKOUT_URL,count:{},subTotal:{amount:{},displayString:{},iso:{}}},imbHTML:"",mainImage:{altText:{},src:{}},shippingMessageHTML:a.USS_SHIPPING_MESSAGE,status:1};f?d.start():g.start();var p=[n(a.USS_CART_TYPE,r,f)];if(!0===f){k.start();var v=l(e,r);p.push(v)}m.all(p).then(function(){h({atcStatusData:r,isOk:1})}).catch(function(){c.logCounter(b.CART_API_PROMISE_REJECTED_COUNTER);q()})})}}});f.when("A","uss-amazonapi-client","natc-utils",
"buy-box-utility","uss-constants").register("uss.cart.add-items",function(f,r,m,q,c){function b(a,b){b.reftag&&(a.additionalParameters.ref_=b.reftag);(b.queryString!==v&&""!==b.queryString?b.queryString:"").split("\x26").forEach(function(b){b=b.split("\x3d");2===b.length&&(a.additionalParameters[b[0]]=b[1])})}var a=c.cartApiConstants;return{addItems:function(c,f){var k;if(f){k=m.constructAddItemsRequest(c);c.reftag=a.USS_PRIMARY_ATC_REFTAG;var h=k.items,n=c.inputs.a;if(h)for(var e=0;e<h.length;++e)if(n&&
n===h[e].asin){var p=q.getSelectedQuantityInMobileAppBuyBox();p&&!isNaN(p)?h[e].quantity=Number(p):h[e].quantity=1}}else c?(k=c.cartArgs.offerListingID,h=a.USS_SECONDARY_ATC_QUANTITY,n=c.inputs.additionalParameters,e={},e.asin=c.inputs.a,e.offerListingId=k,e.quantity=h,n&&(e.additionalParameters=n),k={items:[e]}):k={};h=!f&&c&&c.reftag?"cart/carts/retail/items?ref_\x3d"+c.reftag.replace("?","\x26"):"cart/carts/retail/items";k={apiPath:h,requestType:"cart.add-items.request/v1",responseType:"cart.add-items/v1",
method:"POST",data:k,additionalParameters:{}};f&&c&&b(k,c);return r.makeRequest(k)}}});"use strict";f.when("uss-amazonapi-client").register("summary-api",function(f){return{summary:function(p){var m={apiPath:"cart/summary",responseType:"cart.summary/v1",method:"GET",additionalParameters:{}};p&&(m.additionalParameters.cartTypes=p);return f.makeRequest(m)}}});f.when("uss-amazonapi-client").register("productV2Images-api",function(f){"use-strict";return{productV2Images:function(p){return f.makeRequest({apiPath:"products/"+
p,responseType:"product/v2",method:"GET",resourceInclusions:["productImages(product.product-images/v2)"]})}}});f.when("A").register("natc-utils",function(f){function p(b){if(!b||!b.inputs)return c.INVALID;b=b.inputs;for(var a in b){if(a.startsWith("items[0.base][asin]"))return c.V2;if(a.startsWith("item[0].asin"))return c.V1}return c.INVALID}function m(b){var a=b.inputs;b={};for(var c in a){var f=c.replace("items[","").slice(0,-1).split("][");f.reduce(function(b,h,m){return b[h]||(b[h]=f.length-1===
m?a[c]:{})},b)}return b}function q(b){var a=b.inputs;b={};for(var c in a){var f=c.replace(/item\[(\d+)\]/,"$1").split(".");f.reduce(function(b,h,m){return b[h]||(b[h]=f.length-1===m?a[c]:{})},b)}return b}var c={V1:"NATC_Params_Version_1",V2:"NATC_Params_Version_2",INVALID:"NATC_Params_Version_Invalid"};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{value:function(b,a){a=0<a?a|0:0;return this.substring(a,a+b.length)===b}});return{constructAddItemsRequest:function(b){switch(p(b)){case c.V2:b=
m(b);break;case c.V1:b=q(b);break;default:throw Error("Could not determine or invalid NATC params version");}var a=[],d;for(d in b)"object"===typeof b[d]&&b[d].asin&&a.push(b[d]);return{items:a}},determineNATCParamsVersion:p,PARAM_VERSIONS:c}})});
/* ******** */
(function(p){var F=window.AmazonUIPageJS||window.P,t=F._namespace||F.attributeErrors,e=t?t("DetailPageTwisterPlusAssets",""):F;e.guardFatal?e.guardFatal(p)(e,window):e.execute(function(){p(e,window)})})(function(p,F,t){"use strict";p.when("A").register("twister-plus-constants",function(e){return{ASIN:"asin",PRICE:"price",SAVINGS:"savings",TOTAL_PRICE:"totalPrice",YOU_SAVE:"youSave",PRICE_UNIT:"priceUnit",OFFER_LISTING_ID:"offerListingId",QUANTITY:"quantity",TWISTER_REFRESH_EVENT:"twister-refresh",
CC_SELECTION_UPDATE_EVENT:"cc-selection-update",TWISTER_PLUS_FRAMEWORK:"TwisterPlusFramework",UNKNOWN:"UNKNOWN",DEVICE_TYPE_WEB:"web",DEFAULT_BUYING_OPTION_POSITION:0,SPACE:" ",OPENING_BRACKET:"(",CLOSING_BRACKET:")",TP_AFTER_BUYBOX_UPDATE_EVENT:"twisterPlus:selection:afterBuyBox:update",ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",registrationMap:{CALLBACKS:"callbacks",FEATURE_ATTRIBUTION:"featureAttribution",IS_MULTI_SELECTION:"isMultiSelection",UPDATE_QTY_AS_BASE_ITEM:"updateQtyAsBaseItem",INCLUDE_SAVINGS_CALCULATION_IN_SUBTOTAL:"includeSavingsCalculationInSubtotal",
DISPLAY_SAVINGS_ROW_IN_BOTTOM_SHEET:"displaySavingsRowInBottomSheet",BASE_ITEM_SAVINGS:"baseItemSavings"},TWISTER_PLUS_VIEW_REGISTRATION:{viewAttribution:"DetailPage",viewName:"MobileTwisterPlusFramework"},ccManager:{FEATURE_NAME:"ccManager",ACTIVE_CARDS:"twisterPlusActiveCards",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus"},itemAssociation:{KEY_BUYBACK:"buyback",CUSTOM_NAME_STRING:"custom-name",CUSTOM_VALUE_STRING:"custom-value",CUSTOM_DATA_KEY:"customData",INPUT_TYPE_HIDDEN:"hidden",ENCODED_ITEM_ASSOC_VAL:"encodedItemAssocVal",
ITEM_ASSOCIATION_GROUP_KEY:"ItemAssociationGroupKey",ITEM_ASSOCIATION_GROUP_VAL:"itemAssociationGroup",ASIN_KEY:"asin",QUANTITY_KEY:"quantity",OFFERING_ID_KEY:"offeringID",OFFER_LISTING_ID_KEY:"offerListingId",FORM_DATA_ASIN_KEY:"a",FORM_DATA_OID_KEY:"oid",FIRST_INDEX:".1",DEVICE_TYPE_MOBILE_WEB:"mWeb",DEVICE_TYPE_MOBILE_APP:"mApp",IS_BUYBACK_INPUT_FLAG:"isBuyBack",IS_BUYBACK_INPUT_FLAG_VALUE:"1",PIPE_SEPARATOR:"|",FEATURE_NAME_KEY:"featureName",BASE_ASIN_INDEX:1,BASE_ASIN_INDEX_FOR_NATC:0,BASE_ASIN_ITEM_TYPE:"base",
ITEMS_PREFIX:"items",PARAM_NAMES:{ASIN:["asin"],QUANTITY:["quantity"],OFFER_LISTING_ID:["offerListingId"],ITEM_ASSOCIATION:["additionalParameters","itemAssociation"],ASSOCIATED_ITEM_ID:["associatedItemId"],DELETE_CONSTRAINT:["deleteConstraint","mutuallyInclusive"],PROGRAM_TYPE:["programType"],RENDER_TYPE:["renderType"],ACCESSORY_TYPE:["properties","accessoryType"],CUSTOMER_APPOINTMENT_TYPE:["properties","customerAppointmentType"],paymentOfferInfo:["additionalParameters","paymentOfferInfo"],inHouseInstallments:["additionalParameters",
"installments","programId"]},OPENING_SQUARE_BRACKET:"[",CLOSING_SQUARE_BRACKET:"]"},htmlTags:{INPUT:"input",FIELDSET:"fieldset"},selectors:{DECLARATIVE_CLASS:".a-declarative",BUYBOX_ACCORDION:"#buybox .a-accordion",BUYBOX_ACCORDION_ACTIVE:"#buybox .a-accordion-active",BUYNOW_ELEMENT_ID:"form#buyNow, form#buyNowCheckout",BUYNOW_CHECKOUT_ELEMENT_ID:"#buyNowCheckout",BUYNOW_BUTTON_ID:"#buy-now-button",ADD_TO_CART_BUTTON_ID:"#add-to-cart-button, #installments-button, #add-to-cart-button-ubb-mobile",ADD_TO_CART_ELEMENT_ID:"#addToCart, #mobile-installments",
ITEM_ASSOCIATION_INPUTS_CLASS:".itemAssocInputs",ITEM_ASSOCIATION_INPUTS_CLASS_NAME:"itemAssocInputs",DATA_ATTRIBUTE_ACTION:"action",PPD_RIGHT_COL_ID:"#rightCol",BUYING_OPTIONS_PRICE_DATA_CLASS:".twister-plus-buying-options-price-data",ACCORDION_ROW_CLASS:".accordion-row"},ccFeatures:{PAYMENT_OPTIONS_FEATURE:"paymentOptions",PAYMENT_OPTIONS_BUY_NOW_CART_TYPE:"BUY_NOW",PAYMENT_OPTIONS_ATC_CART_TYPE:"ADD_TO_CART",CART_TYPE:"cartType",IS_BUYBACK_KEY:"isBuyBackKey",IS_BUYBACK_FEE:"isBuyBackFee",BUY_NOW_DATA:"buynowData",
COUPONS_FEATURE:"couponsCard",PAYMENT_OFFER_INPUT_NAME:"paymentOfferInfo"},bottomSheet:{FEATURE_NAME:"bottomSheet",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",BOTTOM_SHEET_NAME:"twisterPlusBottomSheet",RESIZE_DURATION:.3,BOTTOM_SPACING:21,ITEM_COUNT_SINGULAR_TEMPLATE:"item-count-singular-template",ITEM_COUNT_PLURAL_TEMPLATE:"item-count-plural-template",ITEM_COUNT_PLACEHOLDER:"###itemQuantity",DEFAULT_DISCOUNT_STRING:"default-discount-string",MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE:"monthly-payment-footnote-template"},
unavailableMessage:{ACTIVE_ACCORDION:".a-accordion-active",CLASS:".",DISPLAYABLE_MESSAGE:"tp-bbm-info-message-displayable",HIDDEN:"aok-hidden",MESSAGE_ITEM:"twister-plus-unavailable-message-item",MULTIPLE:".tp-bbm-info-message-container",SINGLE:".tp-bbm-info-message-with-card-name-container",TEMPLATE:"twister-plus-unavailable-message-item-template",QUANTITY_RESTRICTION:".tp-bbm-info-message-quantity-restriction-container",BUYBOX_ACCORDION_ROWS:"#buyBoxAccordion"},sideSheet:{FEATURE_NAME:"sideSheet",
EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",RESIZE_DURATION:300,SYMBOL_HASH:"#",DISPLAY:"display",INLINE:"inline",CAROUSEL_CONTAINER_CLASS:".a-carousel-container",CAROUSEL_CONTAINER_CLASS_NAME:"a-carousel-container",CAROUSEL_INITIALIZED_CLASS_NAME:"a-carousel-initialized",CAROUSEL_NOT_INITIALIZED_CLASS_NAME:"a-carousel-static",SIDE_SHEET_AJAX_SUCCESS:"twister-plus:side-sheet:ajax:success"},ccCardsRefresh:{SINGLE_CARD_INVALID:"single-card-invalid-message",
SINGLE_SELECTION_INVALID:"single-selection-invalid-message",SINGLE_DETAILS_UPDATE:"single-details-update-message",MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH:"multiple-details-update-or-cards-refresh-message",MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID:"multiple-card-invalid-or-selection-invalid-message",CARD_NAME_PLACEHOLDER:"###cardName"},metrics:{CC_CARD_COUNT:"ccCardCount",TWISTER_PLUS_TTI:"TTI",BOTTOM_SHEET_GV:"priceBottomSheetGV",BOTTOM_SHEET_TIMER:"priceBottomSheetTimer",CC_REMOVAL:"ccRemoval",
CC_SELECTION:"ccSelection",PREFIX:"twisterPlus.",FEATURE_NAME:"twisterPlus",TWISTER_PLUS_TWISTER_REFRESH_GV:"twisterPlusTwisterRefreshGV"},toolTip:{FEATURE_NAME:"toolTip",EVENT_NAME:"cc-selection-update",FEATURE_ATTRIBUTION:"Website/ DetailPage/ TwisterPlus",TOOL_TIP_NAME:"twisterPlusPopOver",ITEM_COUNT_SINGULAR_TEMPLATE:"item-count-singular-template",ITEM_COUNT_PLURAL_TEMPLATE:"item-count-plural-template",ITEM_COUNT_PLACEHOLDER:"###itemQuantity",MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE:"monthly-payment-footnote-template"}}});
"use strict";p.when("A").register("twister-plus-preconditions",function(e){return{isTwisterPlusEligible:function(){return"true"===e.$("#twister-plus-eligible").val()},isCcCardsRendered:function(){return"true"===e.$("#ccCardsRendered").val()}}});"use strict";p.when("A","twister-plus-logger-service","twister-plus-constants").register("twister-plus-feature-state",function(e,c,h){function k(b){d.currentBuyingOptionPosition=b||0}function z(b){return d.ccFeaturesState[b]}function a(b){return d.ccRemovedSelections[b]}
var d={},m=h.metrics;return{initialize:function(b){d.twisterState=b.twisterState||{};d.priceData=b.priceData||{};k(b.currentBuyingOptionPosition);d.ccFeaturesState=b.ccFeaturesState||{};d.ccRemovedSelections=b.ccRemovedSelections||{}},getTwisterPlusFeaturesState:function(){return d},getTwisterState:function(){return d.twisterState},setTwisterState:function(b){d.twisterState=b||{}},getCCFeaturesState:function(){return d.ccFeaturesState},getCCRemovedSelections:function(){return d.ccRemovedSelections},
getPriceData:function(){return d.priceData},getCurrentBuyingOptionPosition:function(){return d.currentBuyingOptionPosition},updateCCFeatureState:function(b,a,k){var e=!1;if(b!==t&&a!==t){var e=d.ccFeaturesState,h;h=z(b);if("add"===a.selectionType)k[b].hasOwnProperty("updateQtyAsBaseItem")&&k[b].updateQtyAsBaseItem&&(a.quantity=d.twisterState.quantity),h!==t?h.push(a):(d.ccFeaturesState[b]=[],d.ccFeaturesState[b].push(a)),c.logCounter(m.CC_SELECTION+"."+b);else if("delete"===a.selectionType&&(k=a.itemType,
a=a[k],h!==t))for(var v=0;v<h.length;v++)if(h[v][k]===a){h.splice(v,1);c.logCounter(m.CC_REMOVAL+"."+b);break}h=z(b);e[b]=h;e=!0}else p.log("CC featureName or featureData passed to Twister+ is not defined.","FATAL",b);return e},updateTwisterPlusFeatureStateForQuantity:function(b,a){d.twisterState.quantity=b;e.each(d.ccFeaturesState,function(c,m){a[m].hasOwnProperty("updateQtyAsBaseItem")&&a[m].updateQtyAsBaseItem&&e.each(c,function(a,c){d.ccFeaturesState[m][c].quantity=b})})},updateCCRemovedSelections:function(b,
c){var m=!1;b!==t&&c!==t?(m=d.ccRemovedSelections,a(b)===t&&(d.ccRemovedSelections[b]=[]),a(b).push(c),c=a(b),m[b]=c,m=!0):p.log("CC featureName or featureData passed to Twister+ is not defined.","FATAL",b);return m},clearCCFeatureSelections:function(b){var a=!1;b!==t?(z(b)!==t&&(a=d.ccFeaturesState[b].length,0<a&&c.logCounter(m.CC_REMOVAL+"."+b,a),d.ccFeaturesState[b]=[]),a=!0):p.log("CC featureName passed to Twister+ is not defined.","FATAL",b);return a},clearCCRemovedSelections:function(b){var c=
!1;b!==t?(a(b)!==t&&delete d.ccRemovedSelections[b],c=!0):p.log("CC featureName passed to Twister+ is not defined.","FATAL",b);return c},updatePriceData:function(a){d.priceData=a||{}},updateCurrentBuyingOptionPosition:function(a){k(a)}}});"use strict";p.when("A","twister-plus-constants").register("twister-plus-feature-registration",function(e,c){var h={},k=[c.TWISTER_REFRESH_EVENT,c.CC_SELECTION_UPDATE_EVENT];(function(){for(var c=0;c<k.length;c++)h[k[c]]=[]})();return{registerFeature:function(c,
a,d){var m;m=!0;c.hasOwnProperty("featureName")&&c.hasOwnProperty("featureAttribution")||(m=!1,p.log("Feature Registration does not contain valid featureName or featureAttribution","ERROR",c.featureName+": "+c.featureAttribution));m&&(m=!0,-1===k.indexOf(a)&&(p.log("Feature passed invalid event name while registering to Twister+: "+a,"ERROR",c.featureName+": "+c.featureAttribution),m=!1));if(m){m=c.featureName;for(var b=!1,e=0;e<h[a].length;e++)if(h[a][e].featureName===m){b=!0;break}b?p.log("Feature already registered to TwisterPlus for the event: "+
a,"ERROR",m):(b={},b.featureName=m,b.featureAttribution=c.featureAttribution,b.callback=d,h[a].push(b))}},callRegisteredFeaturesCallback:function(c){for(var a=0;a<h[c].length;a++)h[c][a].callback.apply()}}});"use strict";p.when("A","twister-plus-feature-state","twister-plus-feature-registration","twister-plus-constants","priceUpdate","itemAssociation","buy-box-price-update","twister-plus-unavailable-message","turbo-checkout-handler","utils").register("twister-plus-framework",function(e,c,h,k,z,a,
d,m,b,y){function G(){var g=y.getBuyingOptionPriceDataList();if(g){var f=N;g[f]===t&&p.log("Buying option data missing for the selected offer at position: "+JSON.stringify(f),"FATAL",k.TWISTER_PLUS_FRAMEWORK);return g[f]}}function C(){N=y.getBuyingOptionPosition();u=v();L=l();var g=e.$("#twister-plus-asin");A=g?g.val():t;c.initialize(r())}function x(){J(document).delegate("#quantity","change",function(g){g=f();E=!0;c.updateTwisterPlusFeatureStateForQuantity(g,M);n();E=!1})}function v(){var g=G();
if(g)return{price:g.priceAmount,savings:0,priceUnit:g.currencySymbol};var g=(g=e.$("#twister-plus-price-data-price"))?g.val():t,f=e.$("#twister-plus-price-data-savings"),f=f?f.val():t,a=e.$("#twister-plus-price-data-price-unit"),a=a?a.val():t;return{price:parseFloat(g),savings:parseFloat(f),priceUnit:a}}function l(){var g=G();return g?g.offerListingId:(g=e.$("#twister-plus-offer-listing-id"))?g.val():t}function r(){var g=H(),f={};f[w.TOTAL_PRICE]=u.price;f[w.YOU_SAVE]=u.savings;return{twisterState:g,
priceData:f,currentBuyingOptionPosition:N}}function H(){var g={};g[w.ASIN]=A;g[w.PRICE]=u.price;g[w.SAVINGS]=u.savings;g[w.PRICE_UNIT]=u.priceUnit;g[w.OFFER_LISTING_ID]=L;g[w.QUANTITY]=f();return g}function f(){var g=y.getBaseItemQuantity();g===t&&(g=1);return g}function n(){u=v();L=l();c.setTwisterState(H());var g=c.getTwisterPlusFeaturesState(),f=z.getTotalPriceAndYouSave(g,M);c.updatePriceData(f);c.updateCurrentBuyingOptionPosition(N);d.updatePriceSubtotalFeature(g);m.update(c);y.getBuyingOptionType(N)===
k.UNKNOWN||E&&!y.isFeatureSelectionPresent(c.getCCFeaturesState())||a.addItemAssociationBundleData(c.getTwisterPlusFeaturesState(),!0);h.callRegisteredFeaturesCallback(w.CC_SELECTION_UPDATE_EVENT);b.updateInputCheckbox(g)}var w=k,u,L,A,J=e.$,M,E=!1,N;return{initializeTwisterPlus:function(){C();x()},refreshTwisterPlusData:function(){C();x();h.callRegisteredFeaturesCallback(w.TWISTER_REFRESH_EVENT)},ccSelectionFetch:function(g){return c.getCCFeaturesState()[g]},ccRemovedSelectionFetch:function(g){return c.getCCRemovedSelections()[g]},
ccSelectionUpdate:function(g,f){g=c.updateCCFeatureState(g,f,M);n();return g},ccRemovedSelectionUpdate:function(g,f){g=c.updateCCRemovedSelections(g,f);n();return g},ccSelectionsClear:function(g){g=c.clearCCFeatureSelections(g);n();return g},ccRemovedSelectionsClear:function(g){g=c.clearCCRemovedSelections(g);n();return g},setFeatureRegistrationMap:function(g){M=g},setCurrentBuyingOptionPosition:function(g){N=g;c.updateCurrentBuyingOptionPosition(g);a.reInitialiseItemCountVal()},getCurrentBuyingOptionPosition:function(){return N},
updateTwisterPlusComponents:function(){n()},getTwisterPlusState:function(){return e.copy(c.getTwisterPlusFeaturesState())},registerFeature:function(g,f,a){try{"function"===typeof a?h.registerFeature(g,f,a):p.log("Registering function should provide callback as a function","ERROR",g.featureName)}catch(b){F.ueLogError&&F.ueLogError(b,{logLevel:"ERROR",attribution:g.featureName,message:"TwisterPlus Framework: Error caused by the feature: "+g.featureName+" (C/T/I: "+g.featureAttribution+") while registering to TwisterPlus to listen to "+
f+" event"+b})}}}});p.when("A","twister-plus-framework","twister-plus-constants","twister-plus-logger-service","utils").register("cc-manager",function(e,c,h,k,z){function a(a){return r[a].hasOwnProperty(f.IS_MULTI_SELECTION)&&r[a][f.IS_MULTI_SELECTION]}function d(f){var g=n.indexOf(f);if(-1!==g&&g!==n.length-1&&(g=m(g),!(0>g))){var a=H(".cc-card-"+f);f=n[g];var b=r[f]&&r[f].callbacks;setTimeout(function(){a[0]&&H("html, body").animate({scrollTop:a.offset().top},500);b&&b.hasOwnProperty("cardExpand")&&
b.cardExpand()},800)}}function m(f){var g=z.getBuyingOptionPosition(),a=z.getBuyingOptionType(g);for(f+=1;f<n.length;f++){var b=n[f];if((b=r[b]&&r[b].callbacks)&&b.hasOwnProperty("isBuyingOptionUnsupported")){if(!b.isBuyingOptionUnsupported(g,a))return f}else return f}return-1}function b(f,g){J=c.getTwisterPlusState();g=c.ccSelectionUpdate(f,g);c.ccRemovedSelectionsClear(f);return g}function y(f){J=c.getTwisterPlusState();return c.ccSelectionsClear(f)}function G(a){var g=!0,b=a;n=C();r.hasOwnProperty(a)?
-1===n.indexOf(a)&&(g=!1,b=r[a][f.FEATURE_ATTRIBUTION],p.log("CC selection update called for non rendered feature","ERROR",b)):(g=!1,p.log("CC selection update called for unregistered feature","ERROR",b));return g}function C(){var f=H("#twister-plus-active-cards"),f=f.length?f.val():"";return(f=f.trim())?f.split(","):[]}function x(a,g){var b={},c;for(c in n){var d=n[c];if(d!==g&&r.hasOwnProperty(d)){var m=r[d];m[f.CALLBACKS].hasOwnProperty("refreshCard")&&(m=m[f.CALLBACKS].refreshCard(a,g),"NO_CHANGE"!==
m&&a.ccFeaturesState[d]!==t&&0<a.ccFeaturesState[d].length&&(b[m]===t&&(b[m]=[]),b[m].push(d)))}}a=r[g][f.CALLBACKS];d=Object.keys(b).length;if(a.hasOwnProperty("ccCardsRefreshNotification")&&0<d){var l;g=H("#tp-cc-cards-refresh-strings");c=!0;if(1===d)if(d=Object.keys(b)[0],b=b[d],1===b.length){switch(d){case "CARD_INVALID":l=g.data(u.SINGLE_CARD_INVALID);break;case "SELECTION_INVALID":l=g.data(u.SINGLE_SELECTION_INVALID);break;case "DETAILS_UPDATE":l=g.data(u.SINGLE_DETAILS_UPDATE),c=!1}l=l.replace(u.CARD_NAME_PLACEHOLDER,
b[0])}else switch(d){case "CARD_INVALID":l=g.data(u.MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID);break;case "SELECTION_INVALID":l=g.data(u.MULTIPLE_CARD_INVALID_OR_SELECTION_INVALID);break;case "DETAILS_UPDATE":l=g.data(u.MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH),c=!1}else 1<d&&(l=g.data(u.MULTIPLE_DETAILS_UPDATE_OR_CARD_REFRESH));b=c?H("#tp-cc-cards-refresh-red-notification"):H("#tp-cc-cards-refresh-green-notification");b.find(".a-alert-content").text(l);l=b.html();a.ccCardsRefreshNotification(l)}else 0<
d&&p.log("Feature callback ccCardsRefreshNotification() missing for the feature","ERROR",r[g][f.FEATURE_ATTRIBUTION])}function v(a,g,b){for(var c in n){var d=n[c];if(d!==b&&r.hasOwnProperty(d)){var m=r[d];m[f.CALLBACKS].hasOwnProperty("restorePreviousSelection")&&m[f.CALLBACKS].restorePreviousSelection(a.ccFeaturesState[d],g.ccFeaturesState[d],b)}}}function l(f,g){var a=!1;if(A&&A===f&&J.ccFeaturesState!==t&&J.ccFeaturesState[A]!==t)if("SELECTION_CLEAR_ITEM_DATA"===g)a=0===J.ccFeaturesState[A].length?
!0:!1;else{f=J.ccFeaturesState[A];for(var b=g.itemType,d=0;d<f.length;d++){var c=f[d].itemType;if(c===b&&f[d][c]===g[b]){a=!0;break}}}return a}var r={},H=e.$,f=h.registrationMap,n,w=h.metrics,u=h.ccCardsRefresh,L,A,J,M="",E;return{registerFeature:function(a,g){var b=!0;a.hasOwnProperty("featureName")&&a.hasOwnProperty(f.FEATURE_ATTRIBUTION)||(p.log("Properties missing in feature registration passed","ERROR",a.featureAttribution||a.featureName),b=!1);b&&(b=!0,g.hasOwnProperty("init")&&g.hasOwnProperty("validateInputParams")||
(p.log("Functions missing in callbacks passed","ERROR",a.featureAttribution||a.featureName),b=!1),b&&(b=a.featureName,r[b]={},r[b][f.CALLBACKS]=g,r[b][f.FEATURE_ATTRIBUTION]=a.featureAttribution,r[b][f.IS_MULTI_SELECTION]=a.isMultiSelection,r[b][f.UPDATE_QTY_AS_BASE_ITEM]=a.updateQtyAsBaseItem,r[b][f.BASE_ITEM_SAVINGS]=a.baseItemSavings,r[b][f.DISPLAY_SAVINGS_ROW_IN_BOTTOM_SHEET]=a.displaySavingsRowInBottomSheet,r[b][f.INCLUDE_SAVINGS_CALCULATION_IN_SUBTOTAL]=a.includeSavingsCalculationInSubtotal,
g.init()))},ccSelectionUpdate:function(n,g,m){var k=!1;if(G(n))if(r[n][f.CALLBACKS].validateInputParams(g)){if("T2"===E||"T3"===E)if(d(n),m)return;l(n,g)?(k=b(n,g),v(c.getTwisterPlusState(),J,n)):(A=n,k=b(n,g),x(c.getTwisterPlusState(),n));g=a(n);M===h.DEVICE_TYPE_WEB&&k&&!g&&(g=r[n][f.CALLBACKS],g.hasOwnProperty("cardCollapse")?g.cardCollapse():p.log("Feature callback cardCollapse() missing for the feature","ERROR",r[n][f.FEATURE_ATTRIBUTION]))}else p.log("Validation failed for the passed itemData",
"ERROR",r[n][f.FEATURE_ATTRIBUTION]);return k},ccRemovedSelectionUpdate:function(a,g){var b=!1;G(a)&&(r[a][f.CALLBACKS].validateInputParams(g)?b=c.ccRemovedSelectionUpdate(a,g):p.log("Validation failed for the passed itemData","ERROR",r[a][f.FEATURE_ATTRIBUTION]));return b},ccSelectionsClear:function(f,g){var a=!1;G(f)&&(!g||"T2"!==E&&"T3"!==E||d(f),l(f,"SELECTION_CLEAR_ITEM_DATA")?(a=y(f),v(c.getTwisterPlusState(),J,f)):(A=f,a=y(f),x(c.getTwisterPlusState(),f)));return a},ccRemovedSelectionsClear:function(f){var a=
!1;G(f)&&(a=c.ccRemovedSelectionsClear(f));return a},getFeatureRegistrationDetails:function(){return r},init:function(){M=z.getDeviceType();n=C();c.setFeatureRegistrationMap(r);for(var a in n){var g=n[a];r.hasOwnProperty(g)&&r[g][f.CALLBACKS].init()}k.logCounter(w.CC_CARD_COUNT,n.length);if(a=H("[data-wireless-multi-card]").data("wireless-multi-card"))E=a.enhancementTreatment},getRenderedFeaturesList:C,cardExpanded:function(a){var g=G(a),b=L;g&&(e.trigger("twisterPlus-removeCCCardNotification"),b&&
b!==a?(L=a,a=r[b][f.CALLBACKS],a.hasOwnProperty("cardCollapse")?"T3"!==E&&a.cardCollapse():p.log("Feature callback cardCollapse() missing for the feature","ERROR",r[b][f.FEATURE_ATTRIBUTION])):L=a)},switchBuyingOption:function(a){var g=z.getBuyingOptionType(a);c.setCurrentBuyingOptionPosition(a);for(var b in n){var d=n[b];if(r.hasOwnProperty(d)){var m=r[d];m[f.CALLBACKS].hasOwnProperty("switchBuyingOption")&&m[f.CALLBACKS].switchBuyingOption(a,c.ccSelectionFetch(d),c.ccRemovedSelectionFetch(d),g)}}n&&
n.length&&c.updateTwisterPlusComponents()},getFeatureCurrentlyExpanded:function(){return L},isMultiSelectionFeature:a}});"use strict";p.when("A","utils").register("buy-box-price-update",function(e,c){function h(){v.text("/"+b.termType);l.text(b.termCount.toString()+" "+b.termType);r.removeClass("aok-hidden")}function k(){v.text("");l.text("");r.addClass("aok-hidden")}function z(){2===y.length?G.find(".a-price-fraction").text(String(y[1].substring(0,2))):G.find(".a-price-fraction").text("00");G.find(".a-price-whole").contents().filter(function(){return 3===
this.nodeType||""===this.textContent.trim()}).first().replaceWith(Number(y[0]).toLocaleString(t))}var a=e.$;e={};var d,m,b,y,G,C,x,v,l,r;e.init=function(){d=0;G=a("#tp_price_block_total_price_ww");C=a("#tp_options_detail");x=a("#tp_monthly_options_detail");v=a("#tp-price-update-payment-term");l=a("#tp-price-update-payment-term-length");r=a("#tp-price-update-payment-period")};e.updatePriceSubtotalFeature=function(l){m=l.ccFeaturesState;var f=l.priceData;if(f&&c.isValidNumber(f.totalPrice)&&c.isValidNumber(f.youSave)){var f=
m.hasOwnProperty("paymentOptions")&&0<m.paymentOptions.length,n=0,e;for(e in m)if("paymentOptions"!==e&&0<m[e].length){n=1;break}f?(b=m.paymentOptions[0],b.isOrderLevel?(y=b.price.toFixed(2).split("."),z(),h(),1===n?C.removeClass("aok-hidden"):C.addClass("aok-hidden"),x.addClass("aok-hidden")):1===n?(y=(l.priceData.totalPrice+b.price-l.twisterState.price).toFixed(2).split("."),z(),k(),C.addClass("aok-hidden"),x.removeClass("aok-hidden")):(y=b.price.toFixed(2).split("."),z(),h(),C.addClass("aok-hidden"),
x.addClass("aok-hidden"))):(y=l.priceData.totalPrice.toFixed(2).split("."),z(),k(),C.removeClass("aok-hidden"),x.addClass("aok-hidden"));l=a("#tp_price_update_feature_ww");e=a("#tp_price_row_ww");1===d&&(e.css("display","none"),l.css("display","none"),d=0)}};return e});"use strict";p.when("A","twister-plus-constants").register("priceUpdate",function(e,c){function h(b,c,k,e){var h=b;z.each(k,function(b,l){var k=e&&e[b]&&e[b][m.INCLUDE_SAVINGS_CALCULATION_IN_SUBTOTAL];z.each(l,function(c,f){b!==a.PAYMENT_OPTIONS_FEATURE&&
f.price!==t&&(b===d.KEY_BUYBACK?f.isBuyBack&&(h=h-f.savings+f.price):b===a.COUPONS_FEATURE?h-=f.savings:(c=f.quantity!==t?f.quantity:1,h+=f.price*c,k&&f.savings!==t&&(h-=f.savings*c)))});k&&e[b][m.BASE_ITEM_SAVINGS]!==t&&(h-=e[b][m.BASE_ITEM_SAVINGS]*c)});return h}function k(b,c,e,k,h){var v=c;z.each(k,function(b,c){z.each(c,function(c,f){b!==a.PAYMENT_OPTIONS_FEATURE&&f.savings!==t&&(b===d.KEY_BUYBACK?f.isBuyBack&&(v+=f.savings):v+=f.savings*(f.quantity!==t?f.quantity:1))});h&&h[b]&&h[b][m.BASE_ITEM_SAVINGS]!==
t&&(v+=h[b][m.BASE_ITEM_SAVINGS]*e)});return v}var z=e.$;e={};var a=c.ccFeatures,d=c.itemAssociation,m=c.registrationMap;e.getTotalPrice=function(a,c){var d={},m=a.twisterState.quantity?a.twisterState.quantity:1;d.totalPrice=h(a.twisterState.price*m,m,a.ccFeaturesState,c);return d};e.getTotalPriceAndYouSave=function(a,c){var d={},m=a.twisterState.quantity?a.twisterState.quantity:1,e=a.twisterState.price*m,z=a.twisterState.savings*m;d.totalPrice=h(e,m,a.ccFeaturesState,c);d.youSave=k(e,z,m,a.ccFeaturesState,
c);return d};return e});"use strict";p.when("A","utils","twister-plus-constants","twister-plus-feature-state","item-association-utils").register("itemAssociation",function(e,c,h,k,z){function a(){var a=c.getActiveAccordionRow(k.getCurrentBuyingOptionPosition());return a&&1===a.length?a.find(D.ADD_TO_CART_ELEMENT_ID):g(D.ADD_TO_CART_ELEMENT_ID)}function d(f){return 0<a().clone().find(D.ITEM_ASSOCIATION_INPUTS_CLASS).remove().end().find('input[name\x3d"'+f+'"]').length}function m(a,f,b){var c=[],d=
q.CUSTOM_NAME_STRING+"."+a+"."+f,d=g("\x3c"+I.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:d,name:d,value:b[q.ITEM_ASSOCIATION_GROUP_KEY]});a=q.CUSTOM_VALUE_STRING+"."+a+"."+f;b=g("\x3c"+I.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:a,name:a,value:JSON.stringify(b[q.ENCODED_ITEM_ASSOC_VAL])});c.push(d);c.push(b);return c}function b(a){return g("\x3c"+I.INPUT+"\x3e",{type:a.inputType,id:a.inputId,name:a.inputName,value:"string"===typeof a.inputValue?a.inputValue:JSON.stringify(a.inputValue)})}function y(a,
f,b,g){var d=a.featureName;a=a.formData;var c=[];if(a!==t){var n;d===T.PAYMENT_OPTIONS_FEATURE&&a[0].inputName===T.PAYMENT_OFFER_INPUT_NAME&&(n=b?T.PAYMENT_OPTIONS_BUY_NOW_CART_TYPE:T.PAYMENT_OPTIONS_ATC_CART_TYPE);for(b=0;b<a.length;b++)n!==t&&(a[b].inputValue[T.CART_TYPE]=n),d=a[b],"function"!==typeof f||g&&!q.PARAM_NAMES[d.inputName]||(d=f(d),c.push(d))}return c}function G(a,f,b){var g=b.quantity,d=b.offerListingId;g!==t&&d!==t?(a.push('\x3cinput type\x3d"hidden" id\x3d"asin.'+f+'" name\x3d"asin.'+
f+'" value\x3d"'+b.asin+'"\x3e'),b=J(f,g,!1),a.push(b),f=M(f,d,!1),a.push(f)):p.log("offerListingId or quantity is not defined for the asin in the itemData","Error",JSON.stringify(b));return a}function C(){return g("\x3c"+I.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:q.IS_BUYBACK_INPUT_FLAG,name:q.IS_BUYBACK_INPUT_FLAG,value:q.IS_BUYBACK_INPUT_FLAG_VALUE})}function x(f,n){var l=N(f),k=g("\x3c"+I.FIELDSET+"\x3e",{"class":D.ITEM_ASSOCIATION_INPUTS_CLASS_NAME}),h=[],u={},w=2;V&&c.isFeatureSelectionPresent(U.ccFeaturesState)&&
(w={},w.quantity=g("#addToCart #atc-mbb-quantity").val(),w.asin=e.$("#mbb-checkbox-input").val(),w.offerListingId=g("#addToCart #atc-mbb-offering-id").val(),h=G(h,2,w),w=3);for(var O=0;O<l.length;O++){var r=l[O],P=r.featureName;u[P]=u[P]!==t?u[P]+1:0;if(W)for(var B=l[O].customData||[],p=0;p<B.length;p++){var x=m(w,p+1,B[p]);g.merge(h,x);x=z.createCustomInputFieldsForNATC(u[P],P,B[p]);g.merge(h,x)}r.asin!==t&&(h=G(h,w,r),w++,h=z.addAsinItemsInputFieldsForNATC(u[P],P,h,r));r=y(l[O],b,!1,!1);g.merge(h,
r);r=y(l[O],z.createFormInputFieldForNATC,!1,!0);g.merge(h,r)}if(h.length)for(l=[],d(q.ASIN_KEY+q.FIRST_INDEX)||(u=q.BASE_ASIN_INDEX,l.push('\x3cinput type\x3d"hidden" id\x3d"asin.'+u+'" name\x3d"asin.'+u+'" value\x3d"'+U.baseAsinState.asin+'"\x3e')),d(q.QUANTITY_KEY+q.FIRST_INDEX)||(u=X?c.getBaseItemQuantity():a().find('input[id\x3d"quantity"]').val(),u=J(q.BASE_ASIN_INDEX,u),l.push(u)),d(q.OFFERING_ID_KEY+q.FIRST_INDEX)||(u=M(q.BASE_ASIN_INDEX,U.baseAsinState.offerListingId),l.push(u)),g.merge(h,
l),n&&(l=C(),h.push(l)),l=0;l<h.length;l++)g(k).append(h[l]);h=g("\x3c"+I.FIELDSET+"\x3e",{"class":D.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});l=[];u=2;w=1;for(O=0;O<f.length;O++){r=f[O];if(W)if(f[O][q.FEATURE_NAME_KEY]===q.KEY_BUYBACK){for(var B=f[O].buynowData||[],P=u,p=[],v=0;v<B.length;v++)x=B[v].name===T.IS_BUYBACK_KEY?g("\x3c"+I.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:B[v].id,name:q.CUSTOM_NAME_STRING+"."+P+".1",value:B[v].value}):B[v].name===T.IS_BUYBACK_FEE?g("\x3c"+I.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,
id:B[v].id,name:q.CUSTOM_VALUE_STRING+"."+P+".1",value:B[v].value}):g("\x3c"+I.INPUT+"\x3e",{type:q.INPUT_TYPE_HIDDEN,id:B[v].id,name:B[v].name,value:B[v].value}),p.push(x);P=p;g.merge(l,P)}else for(B=f[O].customData||[],p=0;p<B.length;p++)P=m(u,p+1,B[p]),g.merge(l,P);r.asin!==t&&(l=G(l,w,r),u++,w++);r=y(f[O],b,!0,!1);g.merge(l,r)}if(l.length)for(n&&(f=C(),l.push(f)),f=0;f<l.length;f++)g(h).append(l[f]);k.length&&(f=a().find(D.ITEM_ASSOCIATION_INPUTS_CLASS),f.length?g(f).replaceWith(k):a().append(k));
h.length&&(k=D.BUYNOW_ELEMENT_ID,f=g(k).find(D.ITEM_ASSOCIATION_INPUTS_CLASS),f.length?g(f).replaceWith(h):g(k).append(h))}function v(){if(K===t||0===K.length)K=a().find('input[name\x3d"itemCount"]'),Q=0===K.length?0:parseInt(K[0].value)}function l(){var a=g(D.BUYBOX_ACCORDION);return 1===a.length?a.find(D.ADD_TO_CART_BUTTON_ID):g(D.ADD_TO_CART_BUTTON_ID)}function r(a,f,b){var g={};g[q.CUSTOM_NAME_STRING+"."+a+"."+f]=b[q.ITEM_ASSOCIATION_GROUP_KEY];g[q.CUSTOM_VALUE_STRING+"."+a+"."+f]=JSON.stringify(b[q.ENCODED_ITEM_ASSOC_VAL]);
return g}function H(a){var f={},b=a.inputName;a="string"===typeof a.inputValue?a.inputValue:JSON.stringify(a.inputValue);f[b]=a;return f}function f(a,f){f={};var b={};B={};aa={};for(var d=U.baseAsinState.asin,n=c.getBaseItemQuantity(),n=n?n:R.addToCartData[0]&&R.addToCartData[0].initialFormData&&R.addToCartData[0].initialFormData.inputs?R.addToCartData[0].initialFormData.inputs.quantity:"",l=U.baseAsinState.offerListingId,m=0;m<a.length;m++){var h=a[m],k=m+2,e=h.featureName;b[e]=b[e]!==t?b[e]+1:0;
var u=h.asin,w=h.quantity,p=h.offerListingId;u!==t&&w!==t&&p!==t&&(d+=q.PIPE_SEPARATOR+u,n+=q.PIPE_SEPARATOR+w,l+=q.PIPE_SEPARATOR+p,aa[u]={quantity:w,offerListingId:p},h=z.addAsinItemKeyValuePairsForNATC(b[e],e,h),B=g.extend(B,h));if(W)for(h=a[m].customData||[],u=0;u<h.length;u++)w=r(k,u+1,h[u]),f=g.extend(f,w),w=z.createCustomKeyValuePairForNATC(b[e],e,h[u]),B=g.extend(B,w);e=y(a[m],H,!1,!1);for(k=0;k<e.length;k++)f=g.extend(f,e[k]);B=g.extend(B,f);e=y(a[m],z.createFormInputKeyValuePairForNATC,
!1,!0);for(k=0;k<e.length;k++)B=g.extend(B,e[k])}f[q.FORM_DATA_ASIN_KEY]=d;f[q.QUANTITY_KEY]=n;f[q.FORM_DATA_OID_KEY]=l;return f}function n(a,f){var b={},d=c.getBaseItemQuantity();b[q.QUANTITY_KEY]=d?d:R.buyNowData[0]&&R.buyNowData[0].initialFormData&&R.buyNowData[0].initialFormData.inputs?R.buyNowData[0].initialFormData.inputs.quantity:"";for(d=0;d<a.length;d++){var n=a[d],l=d+2,m=d+1;b[q.ASIN_KEY+"."+m]=n.asin;var h=J(m,n.quantity,!0),b=g.extend(b,h),n=M(m,n.offerListingId,!0),b=g.extend(b,n);if(W)if(a[d][q.FEATURE_NAME_KEY]===
q.KEY_BUYBACK){n=a[d].buynowData||[];m={};for(h=0;h<n.length;h++){var k=n[h].name,e=n[h].value;n[h].name===T.IS_BUYBACK_KEY?m[q.CUSTOM_NAME_STRING+"."+l+".1"]=e:n[h].name===T.IS_BUYBACK_FEE?m[q.CUSTOM_VALUE_STRING+"."+l+".1"]=e:m[k]=e}b=g.extend(b,m)}else for(n=a[d].customData||[],h=0;h<n.length;h++)m=r(l,h+1,n[h]),b=g.extend(b,m);l=y(a[d],H,!0,!1);for(n=0;n<l.length;n++)b=g.extend(b,l[n])}!c.isEmpty(b)&&f&&(b[q.IS_BUYBACK_INPUT_FLAG]=q.IS_BUYBACK_INPUT_FLAG_VALUE);return b}function w(a){var f=[];
a.each(function(){if(c.getAccordionRowBuyingOptionType(g(this).parents(D.ACCORDION_ROW_CLASS))!==h.UNKNOWN){var a=g(this).parents(D.DECLARATIVE_CLASS);if(0<a.length){var b=g(a).data(D.DATA_ATTRIBUTE_ACTION),b=c.convertHTMLDataAttributesToKeys(b),a=e.copy(g(a).data(b));f.push({dataActionKey:b,initialFormData:a})}}});return f}function u(a,f,b){var g=b.a.split(q.PIPE_SEPARATOR);b=f[q.FORM_DATA_ASIN_KEY].split(q.PIPE_SEPARATOR);f[q.QUANTITY_KEY].split(q.PIPE_SEPARATOR);var d=f[q.FORM_DATA_OID_KEY].split(q.PIPE_SEPARATOR);
e.each(b,function(f,b){g.includes(f)||ba[f]!==t||(a[q.FORM_DATA_ASIN_KEY]=a[q.FORM_DATA_ASIN_KEY]+q.PIPE_SEPARATOR+f,a[q.QUANTITY_KEY]=a[q.QUANTITY_KEY]+q.PIPE_SEPARATOR+c.getBaseItemQuantity(),a[q.FORM_DATA_OID_KEY]=a[q.FORM_DATA_OID_KEY]+q.PIPE_SEPARATOR+d[b])})}function L(a,f,b,d){var n=0;a.each(function(){if(c.getAccordionRowBuyingOptionType(g(this).parents(D.ACCORDION_ROW_CLASS))!==h.UNKNOWN){var a=g(this).parents(D.DECLARATIVE_CLASS);if(0<a.length){var l=f[n++];if(l!==t){var m=g.extend({},l.initialFormData.inputs,
b),e=g.extend({},l.initialFormData);d&&u(m,l.initialFormData.inputs,b);e.inputs=m;a.data(l.dataActionKey,e)}}}});if(d){var n=0,l=w(a);a.each(function(){if(c.getAccordionRowBuyingOptionType(g(this).parents(D.ACCORDION_ROW_CLASS))!==h.UNKNOWN){var a=g(this).parents(D.DECLARATIVE_CLASS);if(0<a.length){var f=l[n++];if(f!==t){e.each(Object.keys(Z),function(a,b){delete f.initialFormData.inputs[a]});var b=g.extend({},f.initialFormData.inputs,B),d=g.extend({},f.initialFormData);d.inputs=b;a.data(f.dataActionKey,
d)}}}});Z=B;ba=aa}}function A(a,b){var d=N(a),c=f(d,b);e.delay(function(){R.addToCartData=w(l());L(l(),R.addToCartData,c,!0)});a=n(a,b);L(g(D.BUYNOW_BUTTON_ID),R.buyNowData,a,!1)}function J(a,f,b){return b?(b={},b[q.QUANTITY_KEY+"."+a]=f,b):'\x3cinput type\x3d"hidden" id\x3d"quantity.'+a+'" name\x3d"quantity.'+a+'" value\x3d"'+f+'"\x3e'}function M(a,f,b){return b?(b={},b[q.OFFERING_ID_KEY+"."+a]=f,b):'\x3cinput type\x3d"hidden" id\x3d"offeringID.'+a+'" name\x3d"offeringID.'+a+'" value\x3d"'+f+'"\x3e'}
function E(f,d){if(S===q.DEVICE_TYPE_MOBILE_APP)A(f,d),x(f,d);else if(S===q.DEVICE_TYPE_MOBILE_WEB)x(f,d);else{var n=N(f);f=g("\x3c"+I.FIELDSET+"\x3e",{"class":D.ITEM_ASSOCIATION_INPUTS_CLASS_NAME});g(D.ITEM_ASSOCIATION_INPUTS_CLASS).remove();var c=[],l={},h=a().find('input[name^\x3d"offeringID"]').length+1,e=h+1,k=n.length;v();K.length?K[0].value=Q+k:(a().append('\x3cinput type\x3d"hidden" name\x3d"itemCount" value\x3d"'+k+'"\x3e'),K=a().find('input[name\x3d"itemCount"]'));for(k=0;k<n.length;k++){var u=
n[k],w=u.featureName;l[w]=l[w]!==t?l[w]+1:0;if(W)for(var r=n[k].customData||[],B=0;B<r.length;B++){var p=m(e,B+1,r[B]);g.merge(c,p);p=z.createCustomInputFieldsForNATC(l[w],w,r[B]);g.merge(c,p)}u.asin!==t&&(c=G(c,h,u),h++,e++,c=z.addAsinItemsInputFieldsForNATC(l[w],w,c,u));u=y(n[k],b,!1,!1);g.merge(c,u);u=y(n[k],z.createFormInputFieldForNATC,!1,!0);g.merge(c,u)}if(c.length)for(d&&(d=C(),c.push(d)),d=0;d<c.length;d++)g(f).append(c[d]);f.length&&(c=a().find(D.ITEM_ASSOCIATION_INPUTS_CLASS),c.length?
g(c).replaceWith(f):a().append(f))}}function N(a){for(var f=[],b=0;b<a.length;b++){var g=a[b];g[q.FEATURE_NAME_KEY]!==q.KEY_BUYBACK&&f.push(g)}return f}var g=e.$,F={name:"itemAssociation"},S="",V,X=!1,Z={},B={},aa={},ba={},W,U={ccFeaturesState:{},baseAsinState:{}},R={addToCartData:[],buyNowData:[]},q=h.itemAssociation,I=h.htmlTags,D=h.selectors,T=h.ccFeatures,K,Q;F.addItemAssociationBundleData=function(a,f,b,d){V=b;W=f;X=d;var c=!1,n=[];U.ccFeaturesState=a.ccFeaturesState;U.baseAsinState=a.twisterState;
g.each(U.ccFeaturesState,function(a,f){g.each(f,function(f,b){a===q.KEY_BUYBACK&&b.isBuyBack&&(c=!0);f={};var g=[];f[q.ASIN_KEY]=b.asin;f[q.QUANTITY_KEY]=b.quantity;f[q.OFFER_LISTING_ID_KEY]=b.offerListingId;if(b.enableIA){var d={};d[q.ITEM_ASSOCIATION_GROUP_KEY]=q.ITEM_ASSOCIATION_GROUP_VAL;d[q.ENCODED_ITEM_ASSOC_VAL]=b.IAData;g.push(d);f[q.CUSTOM_DATA_KEY]=g}f[q.FEATURE_NAME_KEY]=a;b.formData!==t&&0<b.formData.length&&(f.formData=b.formData);a===q.KEY_BUYBACK&&(f[T.BUY_NOW_DATA]=b.buynowData);n.push(f)})});
E(n,c);S===q.DEVICE_TYPE_MOBILE_APP&&e.trigger(h.TP_AFTER_BUYBOX_UPDATE_EVENT)};F.init=function(){S=c.getDeviceType();Z={};ba={};S===q.DEVICE_TYPE_MOBILE_APP&&(R.addToCartData=w(l()),R.buyNowData=w(g(D.BUYNOW_BUTTON_ID)));S===h.DEVICE_TYPE_WEB&&v()};F.reInitialiseItemCountVal=function(){K=t;S=c.getDeviceType();S===h.DEVICE_TYPE_WEB&&v()};return F});"use strict";p.when("A","twister-plus-constants").register("utils",function(e,c){var h=e.$,k={},z=c.selectors;k.isEmpty=function(a){for(var d in a)if(a.hasOwnProperty(d))return!1;
return!0};k.capitalizeFirstLetter=function(a){return a.charAt(0).toUpperCase()+a.slice(1)};k.convertHTMLDataAttributesToKeys=function(a){a=a.split("-");for(var d=a[0],c=1;c<a.length;c++)d+=k.capitalizeFirstLetter(a[c]);return d};k.getBaseItemQuantity=function(a){var d;"web"===this.getDeviceType()?h("#quantity").length&&(d=h("#quantity").val()):h("#mobileQuantityDropDown").length&&(d=h(".a-accordion-active select.mobileQuantityDropDown").length?h(".a-accordion-active select.mobileQuantityDropDown").val():
h("#mobileQuantityDropDown").val());return d};k.getDeviceType=function(){var a=h("#twister-plus-device-type").val();return"web"===a?"web":"mobile"===a?"mWeb":"mApp"};k.isMbbCheckboxChecked=function(){var a=!1,d=h("#mbb-checkbox-input");d!==t&&(a=d.prop("checked"));return a};k.isFeatureSelectionPresent=function(a){var d=!1,c;for(c in a)if(0<a[c].length){d=!0;break}return d};k.isValidNumber=function(a){var d=!1;null===a||isNaN(a)||(d=!0);return d};k.getBuyingOptionPosition=function(){var a=c.DEFAULT_BUYING_OPTION_POSITION,
d=h(z.BUYBOX_ACCORDION_ACTIVE);d.length&&(a=d.index());return a};k.getBuyingOptionPriceDataList=function(){var a,d=h(z.BUYING_OPTIONS_PRICE_DATA_CLASS).html();if(d)try{a=JSON.parse(d)}catch(m){p.log("Error ( "+m+" ) while parsing twister plus price json: "+d,"ERROR",c.TWISTER_PLUS_FRAMEWORK)}return a};k.getBuyingOptionType=function(a){var d,c=k.getBuyingOptionPriceDataList();c&&c[a]&&(d=c[a].buyingOptionType);return d};k.getAccordionRowBuyingOptionType=function(a){var d;a.length&&(a=a.index(),d=k.getBuyingOptionType(a));
return d};k.getActiveAccordionRow=function(a){return k.isValidNumber(a)?h(c.unavailableMessage.BUYBOX_ACCORDION_ROWS).children().eq(a):null};return k});"use strict";p.when("A").register("turbo-checkout-handler",function(e){var c=e.$,h;return{updateInputCheckbox:function(k){var e;k=k.ccFeaturesState;var a=!1;for(e in k)if(0<k[e].length){a=!0;break}e=a;h=c("#twister-plus-checkbox");k=h.prop("checked");e&&!k?h.prop("checked","true").trigger("change"):!e&&k&&h.click()}}});p.when("twister-plus-constants").register("twister-plus-logger-service",
function(e){function c(c,h){if(c!==t&&""!==c)c=e.metrics.PREFIX+c,ue&&ue.count&&(h===t&&(h=(ue.count(c)||0)+1),ue.count(c,h),"undefined"!=typeof F.csa&&(h=ue.count(c),F.csa("Events",{producerId:"dp-rpcx"})("log",{schemaId:"dpRpcx.CSALoggingSchema.5",eventName:c,valueToLog:h},{ent:"all"})));else throw Error("counterKey must be non empty string");}function h(c){if(c!==t&&""!==c)this._timerName=c,this._startTime=0;else throw Error("timerName must be non empty string");}h.prototype={start:function(){this._startTime=
Date.now()},stop:function(){this._startTime&&c(this._timerName,Date.now()-this._startTime)}};return{Timer:h,logCounter:c}});"use strict";p.when("A","dp-time-to-interactive","twister-plus-logger-service","twister-plus-constants","ready","twister-plus-init").register("twister-plus-tti-logger",function(e,c,h,k){function p(){var a=k.metrics,d=c.getTimeToInteractivity({twisterPlus:{name:"twisterPlus"}});if(d&&d.interactiveTime){var e=F.performance;"object"===typeof e&&"object"===typeof e.timing&&h.logCounter(a.TWISTER_PLUS_TTI,
d.interactiveTime-e.timing.navigationStart)}}p();return{logTTI:p}});"use strict";p.when("A","twister-plus-constants").register("item-association-utils",function(e,c){function h(a,b){var d=l.ITEMS_PREFIX;return d+=l.OPENING_SQUARE_BRACKET+(a+"."+b)+l.CLOSING_SQUARE_BRACKET}function k(a,b){var d="string"===typeof a?a:"";"object"===typeof b&&Array.isArray(b)?e.each(b,function(a,f){d+=l.OPENING_SQUARE_BRACKET+a+l.CLOSING_SQUARE_BRACKET}):"string"===typeof b&&(d+=l.OPENING_SQUARE_BRACKET+b+l.CLOSING_SQUARE_BRACKET);
return d}function t(a,b,d){return x("\x3c"+r.INPUT+"\x3e",{type:d,id:a,name:a,value:b})}function a(a,b){var d={};d[a]=b;return d}function d(a,b){if("number"===typeof a&&0<=a&&"string"===typeof b)return a=h(a,b),a=k(a,l.PARAM_NAMES.ITEM_ASSOCIATION);p.log("Invalid data-type for itemIndex or itemType: itemIndex \x3d "+a+", itemType \x3d "+b,"ERROR",H)}function m(b,d,c){return c?a(b,d):t(b,d,l.INPUT_TYPE_HIDDEN)}function b(a,b,d,c){if("string"===typeof d)return a=k(a,b),m(a,d,c)}function y(a,b,d){if("string"===
typeof b||"number"===typeof b)return a=k(a,l.PARAM_NAMES.QUANTITY),m(a,b,d)}function G(a,b,d){if("object"===typeof b&&Array.isArray(b)&&"DELETE"===b[0].type)return a=k(a,l.PARAM_NAMES.DELETE_CONSTRAINT),m(a,b[0].mutuallyInclusive,d)}function C(b,d,c){var h;if(d){if(d.AccessoryType){var e=k(b,l.PARAM_NAMES.ACCESSORY_TYPE);c?(h={},e=a(e,d.AccessoryType),h=x.extend(h,e)):(h=[],e=t(e,d.AccessoryType,l.INPUT_TYPE_HIDDEN),h.push(e))}d.CustomerAppointmentType&&(b=k(b,l.PARAM_NAMES.CUSTOMER_APPOINTMENT_TYPE),
c?(d=a(b,d.CustomerAppointmentType),h=x.extend(h,d)):(d=t(b,d.CustomerAppointmentType,l.INPUT_TYPE_HIDDEN),h.push(d)))}return h}var x=e.$,v={},l=c.itemAssociation,r=c.htmlTags,H=c.ATTRIBUTION;v.createCustomInputFieldsForNATC=function(a,c,h){var e=[];a=d(a,c);h=h[l.ENCODED_ITEM_ASSOC_VAL];"string"===typeof a&&h&&(c=b(a,l.PARAM_NAMES.ASSOCIATED_ITEM_ID,h.parentAsin,!1),e.push(c),c=b(a,l.PARAM_NAMES.PROGRAM_TYPE,h.type,!1),e.push(c),c=b(a,l.PARAM_NAMES.RENDER_TYPE,h.renderType,!1),e.push(c),c=G(a,h.constraintList,
!1),e.push(c),a=C(a,h.properties,!1),e=e.concat(a));return e};v.addAsinItemsInputFieldsForNATC=function(a,d,c,e){var m=e.asin,k=e.quantity,r=e.offerListingId;m&&k&&r?(a=h(a,d),m=b(a,l.PARAM_NAMES.ASIN,m,!1),c.push(m),k=y(a,k,!1),c.push(k),r=b(a,l.PARAM_NAMES.OFFER_LISTING_ID,r,!1),c.push(r)):p.log("Invalid data (asin/offerListingId/quantity) is present in itemData"+JSON.stringify(e),"ERROR",H);return c};v.createFormInputFieldForNATC=function(a){var b=h(l.BASE_ASIN_INDEX_FOR_NATC,l.BASE_ASIN_ITEM_TYPE),
b=k(b,l.PARAM_NAMES[a.inputName]),d="string"===typeof a.inputValue?a.inputValue:JSON.stringify(a.inputValue);return t(b,d,a.inputType)};v.createCustomKeyValuePairForNATC=function(a,c,h){var e={};a=d(a,c);h=h[l.ENCODED_ITEM_ASSOC_VAL];"string"===typeof a&&h&&(c=b(a,l.PARAM_NAMES.ASSOCIATED_ITEM_ID,h.parentAsin,!0),e=x.extend(e,c),c=b(a,l.PARAM_NAMES.PROGRAM_TYPE,h.type,!0),e=x.extend(e,c),c=b(a,l.PARAM_NAMES.RENDER_TYPE,h.renderType,!0),e=x.extend(e,c),c=G(a,h.constraintList,!0),e=x.extend(e,c),a=
C(a,h.properties,!0),e=x.extend(e,a));return e};v.createFormInputKeyValuePairForNATC=function(b){var d=h(l.BASE_ASIN_INDEX_FOR_NATC,l.BASE_ASIN_ITEM_TYPE),d=k(d,l.PARAM_NAMES[b.inputName]);b="string"===typeof b.inputValue?b.inputValue:JSON.stringify(b.inputValue);return a(d,b)};v.addAsinItemKeyValuePairsForNATC=function(a,d,c){var e={},m=c.asin,k=c.quantity,r=c.offerListingId;m&&k&&r?(a=h(a,d),m=b(a,l.PARAM_NAMES.ASIN,m,!0),e=x.extend(e,m),k=y(a,k,!0),e=x.extend(e,k),r=b(a,l.PARAM_NAMES.OFFER_LISTING_ID,
r,!0),e=x.extend(e,r)):p.log("Invalid data (asin/offerListingId/quantity) is present in itemData"+JSON.stringify(c),"ERROR",H);return e};return v});"use strict";p.when("A","twister-plus-constants").register("twister-plus-pinning",function(e,c){var h=e.$,k=c.selectors;return{init:function(){var c=h(k.PPD_RIGHT_COL_ID);c&&c.addClass("twister-plus-pinning")}}});"use strict";p.when("A","twister-plus-constants").register("side-sheet",function(e,c){function h(){d("#twister-plus-side-sheet-content").show(function(){p({right:"0px"})})}
function k(){d("#twister-plus-side-sheet-content").show(function(){p({right:"-600px"})})}function p(c,b){e.animate(d("#twister-plus-side-sheet-content"),c,a.RESIZE_DURATION,b)}var a=c.sideSheet,d=e.$;e.declarative("side-sheet","click",function(a){d("body").css("overflow","hidden");e.show("#twister-plus-dp-bg");h()});e.declarative("close-side-sheet","click",function(a){k();e.hide("#twister-plus-dp-bg");d("body").css("overflow","scroll")});return{getContentContainer:function(){return d("#tp-side-sheet-main-section")}}});
"use strict";p.when("A","twister-plus-constants","cc-manager","twister-plus-framework","side-sheet","a-carousel-framework").register("twister-plus-side-sheet",function(e,c,h,k,p,a){function d(){var a=h.getFeatureCurrentlyExpanded();a&&((a=h.isMultiSelectionFeature(a))||e.trigger("a:declarative:close-side-sheet:click"))}function m(b){(b=b.hasClass(y.CAROUSEL_CONTAINER_CLASS_NAME)?b:b.find(y.CAROUSEL_CONTAINER_CLASS))&&0<b.length&&!b.hasClass(y.CAROUSEL_INITIALIZED_CLASS_NAME)&&(b.addClass(y.CAROUSEL_NOT_INITIALIZED_CLASS_NAME),
a.createAll(),a.initializeAll())}var b=e.$,y=c.sideSheet,t,C,x,v=!1;e.on("a:declarative:side-sheet:click",function(a){t.html(C.html());x=p.getContentContainer();var d=b(y.SYMBOL_HASH+a.data.contentId),c=b(y.SYMBOL_HASH+a.data.contentId).clone(),f=a.data.url;f&&!d.prop("data-urlLoaded")?(c=b(y.SYMBOL_HASH+a.data.preUrlLoadDomId).clone(),c.prop("id",a.data.contentId+"-sideSheet"),c.removeClass("aok-hidden"),x.html(c),x.removeClass("aok-hidden"),b("#twister-plus-side-sheet-content").removeClass("aok-hidden"),
e.ajax(f,{method:"get",success:function(c){d.prop("data-urlLoaded","true");d.html(c);c=b(y.SYMBOL_HASH+a.data.contentId).clone();c.prop("id",a.data.contentId+"-sideSheet");x.html(c);a.data.postLoadEvent&&e.trigger(a.data.postLoadEvent,a.data);e.trigger(y.SIDE_SHEET_AJAX_SUCCESS,a);c.css(y.DISPLAY,"block");x.removeClass("aok-hidden");b("#twister-plus-side-sheet-content").removeClass("aok-hidden")},failure:function(c){c=b(y.SYMBOL_HASH+a.data.failedUrlLoadDomId).clone();c.removeClass("aok-hidden");
x.html(c);x.removeClass("aok-hidden");b("#twister-plus-side-sheet-content").removeClass("aok-hidden")}})):(c.prop("id",a.data.contentId+"-sideSheet"),x.append(c),c.css(y.DISPLAY,"block"),x.removeClass("aok-hidden"),b("#twister-plus-side-sheet-content").removeClass("aok-hidden"),m(c))});return{init:function(){t=b("#tp-side-sheet");C=t.clone();if(!v){var a={};a.featureName=y.FEATURE_NAME;a.featureAttribution=y.FEATURE_ATTRIBUTION;k.registerFeature(a,y.EVENT_NAME,d);v=!0}}}});p.when("A","twister-plus-feature-state",
"twister-plus-constants","cc-manager","a-popover","twister-plus-framework").register("twister-plus-price-tool-tip",function(e,c,h,k,p,a){function d(){w=!0;A.html(F.html());L=A.find("#tp-tool-tip-price-section");H=c.getTwisterPlusFeaturesState()}function m(a,b,c){var d=b[0];(b=b[1])&&"00"!==b?a.find(".a-price-fraction").text(String(b)):c?(a.find(".a-price-fraction").addClass("aok-hidden"),a.find(".a-price-decimal").addClass("aok-hidden")):(b="00",a.find(".a-price-fraction").text(String(b)));a.find(".a-price-whole").contents().filter(function(){return 3===
this.nodeType||""===this.textContent.trim()}).first().replaceWith(Number(d).toLocaleString(t))}function b(a,b){a.find("#display-string").text(b)}function y(a,b,c){a.find("#tp-item-quantity").text(b);a=a.find(".tp-tool-tip-quantity-block");a.removeClass("aok-hidden");m(a,c.toFixed(2).split("."),!0)}function G(a){a+=J.data(1<V?u.ITEM_COUNT_PLURAL_TEMPLATE:u.ITEM_COUNT_SINGULAR_TEMPLATE);return a=a.replace(u.ITEM_COUNT_PLACEHOLDER,V)}function C(a){var b=r.clone();a!==t&&b.attr("id",a);b.find("#tp-tool-tip-price").removeClass("twister-plus-price-template");
return b}function x(){var a=A.find(".twister-plus-subtotal-price-template").clone().removeClass("twister-plus-subtotal-price-template");a.find("#tp-tool-tip-subtotal-price-value").removeAttr("id");return a}function v(a){return E.hasOwnProperty(a)&&0<E[a].length}var l=e.$,r=l("#tp-tool-tip-price-block"),H,f,n,w=!1,u=h.toolTip,L=l("#tp-tool-tip-price-section"),A=l("#twister-plus-tool-tip"),J=A.find("#tp-tool-tip-item-strings"),F=A.clone(),E,N,g=[],Y=0,S,V,X=!1;e.on("a:popover:beforeShow:twisterPlusPopOver",
function(){var a=l(".twister-plus-tool-tip-padding").parents(".a-popover"),c=l("#twister-plus-popover-inner").parents(".a-popover");a.addClass("twister-plus-popover-margin");c.addClass("twister-plus-popover-margin");if(w){c=0;E=H.ccFeaturesState;var d=v("paymentOptions"),a=H.twisterState.quantity;V=parseInt(a);N=H.priceData.totalPrice.toFixed(2).split(".");for(var h in f){var e=f[h];if("paymentOptions"!==e&&v(e)){var k=E[e][0],r=!1;n[e].hasOwnProperty("isMultiSelection")&&n[e].isMultiSelection&&(r=
!0);var q=C("tp-tool-tip-price-block-"+e),I=k.orderSummaryDisplayString,D=E[e].length,F=0,K=0;if("couponsCard"===e){for(var Q=0;Q<D;Q++)var M=E[e][Q].quantity!==t?E[e][Q].quantity:1,K=K+parseInt(M),F=F+E[e][Q].savings*M;q.find("#price-sign-string").text("-")}else for(Q=0;Q<D;Q++)M=E[e][Q].quantity!==t?E[e][Q].quantity:1,K+=parseInt(M),F+=E[e][Q].price*M;d&&(Y+=F,D=c?I.toLowerCase():I,g.push(D),c++);r?I=1<K?I+J.data(u.ITEM_COUNT_PLURAL_TEMPLATE):I+J.data(u.ITEM_COUNT_SINGULAR_TEMPLATE):k.hasOwnProperty("shortDisplayTitle")&&
k.shortDisplayTitle!==t&&(I=I+" ("+k.shortDisplayTitle+")",1<K&&y(q,K,E[e][0].price));V+=K;I=I.replace(u.ITEM_COUNT_PLACEHOLDER,K);m(q.find("#tp-tool-tip-price"),F.toFixed(2).split("."),!1);b(q,I);L.append(q)}}d?(c=E.paymentOptions[0],h=A.find("#tp-tool-tip-footnote-section"),e=C("tp-tool-tip-price-block-interest"),d=c.interestAmount.toFixed(2).split("."),m(e.find("#tp-tool-tip-price"),d,!1),b(e,c.interestDisplayString),L.append(e),c.isOrderLevel||0===g.length?(A.find("#twister-plus-order-level-monthly-payments-section").removeClass("aok-hidden"),
e=A.find("#tp-tool-tip-order-level-monthly-payments-price-block"),b(e,c.orderSummaryDisplayString),d=x(),e.find("#tp-order-level-monthly-payment-subtotal-price").append(d),d=c.price.toFixed(2).split("."),m(e,d,!1),c=c.toolTipFootnoteDisplayString):(A.find("#twister-plus-item-level-monthly-payments-section").removeClass("aok-hidden"),e=C("tp-tool-tip-price-block-monthly-payment"),d=c.price.toFixed(2).split("."),m(e.find("#tp-tool-tip-price"),d,!1),b(e,c.orderSummaryDisplayString),e.addClass("a-spacing-top-base"),
k=A.find("#tp-monthly-payments-breakdown-section"),k.append(e),e=C("tp-tool-tip-price-block-all-selections"),d=Y.toFixed(2).split("."),m(e.find("#tp-tool-tip-price"),d),b(e,g.join(", ")),k.append(e),e=x(),A.find("#tp-item-level-monthly-payment-subtotal-price").append(e),d=(c.price+Y).toFixed(2).split("."),m(e,d,!1),c=A.find("#tp-tool-tip-footnote-string").data(u.MONTHLY_PAYMENTS_FOOTNOTE_TEMPLATE)),d=A.find("#tp-tool-tip-monthly-payment-subtotal-price-block"),e=d.find("#display-string").text(),e=
G(e),b(d,e),e=A.find(".twister-plus-price-template").clone().removeClass("twister-plus-price-template").addClass("a-text-bold"),d.find("#tp-monthly-payment-subtotal-price").append(e),m(d,N,!1),A.find("#tp-tool-tip-subtotal-price-block").addClass("aok-hidden"),d.removeClass("aok-hidden"),e=A.find("#tp-footnote-text").clone().attr("id","tp-monthly-payment-footnote-text"),e.text(c),h.append(e)):(m(A.find("#tp-tool-tip-subtotal-price-value"),N,!1),h=A.find("#tp-tool-tip-subtotal-price-block"),c=h.find("#display-string").text(),
c=G(c),b(h,c));1<a&&(h=C(),c=H.twisterState.price,y(h,a,c),a*=c,m(h.find("#tp-tool-tip-price"),a.toFixed(2).split("."),!1),L.find("#tp-tool-tip-price-block").replaceWith(h));S=p.get(u.TOOL_TIP_NAME).getContent();S.html(A.html());S.addClass("twister-plus-tool-tip-padding")}w=!1});return{init:function(){r=l("#tp-tool-tip-price-block");L=l("#tp-tool-tip-price-section");A=l("#twister-plus-tool-tip");F=A.clone();J=A.find("#tp-tool-tip-item-strings");w=!1;H=c.getTwisterPlusFeaturesState();f=k.getRenderedFeaturesList();
if(!X){var b={};b.featureName=u.FEATURE_NAME;b.featureAttribution=u.FEATURE_ATTRIBUTION;a.registerFeature(b,u.EVENT_NAME,d);n=k.getFeatureRegistrationDetails();X=!0}}}});p.when("A","twister-plus-constants","utils").register("twister-plus-unavailable-message",function(e,c,h){function k(e,b,k){var p=h.getActiveAccordionRow(k);if(p){k=e[0];b=b[k];var t=b[0].displayQuantityMessage;t?(e=1===e.length?d.QUANTITY_RESTRICTION:d.MULTIPLE,p=1===a(e).length?a(e):a(d.ACTIVE_ACCORDION).find(e)):(e=1===e.length?
d.SINGLE:d.MULTIPLE,p=p.find(e));e=p.parent().first();var x=b[0]&&b[0].maxQuantity,v=b[0]&&b[0].orderSummaryDisplayString;v?(k=b[0].invalidSelectionTitle)&&(v=v+c.SPACE+c.OPENING_BRACKET+k+c.CLOSING_BRACKET):v=k;k=p.clone();k.removeClass(d.HIDDEN).addClass(d.DISPLAYABLE_MESSAGE);k.html(function(a,b){return t?b.replace("${cardName}",v).replace("${maxQuantity}",x):b.replace("${cardName}",v)});a(e).append(k)}}function p(c,b){var e=a(d.CLASS+d.TEMPLATE),h=e.parent();a.each(c,function(a,c){a=e&&e.first()&&
e.first().clone();a.removeClass(d.HIDDEN).removeClass(d.TEMPLATE).addClass(d.MESSAGE_ITEM);var k=b[c],l=k[0]&&k[0].orderSummaryDisplayString||c;a.html(function(a,b){return b.replace("%cardName%",l)});h.append(a)})}var a=e.$,d=c.unavailableMessage;return{update:function(c){a(d.CLASS+d.DISPLAYABLE_MESSAGE).remove();a(d.CLASS+d.MESSAGE_ITEM).remove();var b=c.getCCRemovedSelections();c=c.getCurrentBuyingOptionPosition();var e=b?Object.keys(b):t;e&&0<e.length&&(k(e,b,c),p(e,b))}}});"use strict";p.when("A",
"cc-manager").register("twister-plus-mod",function(e,c){function h(){var a=e.$("#twister-plus-feature");!p&&0<a.length&&!a.is(":hidden")?(e.on("a:accordion:buybox-accordion:select",k),p=!0):p&&(0===a.length||a.is(":hidden"))&&(e.off("a:accordion:buybox-accordion:select",k),p=!1)}function k(a){a=a.selectedRow.$row.index();c.switchBuyingOption(a)}var p=!1;h();e.on("PageRefresh:ATF",function(){h()});e.on("twisterPlus:visibility:change",function(){h()})});"use strict";p.when("A","twister-plus-constants",
"twister-plus-logger-service","twister-plus-preconditions","buy-box-price-update","cc-manager","itemAssociation","twister-plus-framework","twister-plus-price-tool-tip","twister-plus-side-sheet","twister-plus-pinning").register("twister-plus-init",function(e,c,h,k,p,a,d,m,b,t,G){function C(){d.init();b.init();t.init();p.init();a.init()}var x=c.metrics;e.on("PageRefresh:ATF",function(){k.isTwisterPlusEligible()&&(m.refreshTwisterPlusData(),C(),k.isCcCardsRendered()&&h.logCounter(x.TWISTER_PLUS_TWISTER_REFRESH_GV))});
k.isTwisterPlusEligible()&&(m.initializeTwisterPlus(),C(),"function"===typeof F.markFeatureInteractive&&F.markFeatureInteractive(x.FEATURE_NAME,{}))})});
/* ******** */
